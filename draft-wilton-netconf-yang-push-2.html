<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>YANG Datastore Telemetry (YANG Push version 2)</title>
<meta content="Robert Wilton" name="author">
<meta content="Holger Keller" name="author">
<meta content="Benoit Claise" name="author">
<meta content="Ebben Aries" name="author">
<meta content="James Cumming" name="author">
<meta content="Thomas Graf" name="author">
<meta content="
       YANG Push version 2 is a YANG datastore telemetry solution, as an alternative lightweight specification to the Subscribed Notifications and YANG Push solution, specifically optimized for the efficient observability of operational data. 
    " name="description">
<meta content="xml2rfc 3.31.0" name="generator">
<meta content="YANG Push" name="keyword">
<meta content="Observability" name="keyword">
<meta content="Network Telemetry" name="keyword">
<meta content="Operational Data" name="keyword">
<meta content="draft-wilton-netconf-yang-push-2-latest" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.31.0
    Python 3.12.12
    ConfigArgParse 1.7
    google-i18n-address 3.1.1
    intervaltree 3.1.0
    Jinja2 3.1.6
    lxml 5.3.1
    platformdirs 4.5.0
    pycountry 24.6.1
    PyYAML 6.0.2
    requests 2.32.5
    wcwidth 0.2.14
-->
<link href="draft-wilton-netconf-yang-push-2.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}

@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Lora SemiBold'), local('Lora-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C8A, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-cyrillic.woff2') format('woff2');
  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-greek.woff2') format('woff2');
  unicode-range: U+0370-0377, U+037A-037F, U+0384-038A, U+038C, U+038E-03A1, U+03A3-03FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C8A, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-greek.woff2') format('woff2');
  unicode-range: U+0370-0377, U+037A-037F, U+0384-038A, U+038C, U+038E-03A1, U+03A3-03FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

:root {
  color-scheme: light dark;
  --background-color: #fff;
  --text-color: #222;
  --title-color: #191919;
  --link-color: #2a6496;
  --highlight-color: #f9f9f9;
  --line-color: #eee;
  --pilcrow-weak: #ddd;
  --pilcrow-strong: #bbb;
  --small-font-size: 14.5px;
  --font-mono: 'Oxygen Mono', monospace;
  --font-title: "Sofia Sans Semi Condensed", sans-serif;
  scrollbar-color: #bbb #eee;
}
body {
  max-width: 600px;
  margin: 75px auto;
  padding: 0 5px;
  color: var(--text-color);
  background-color: var(--background-color);
  font: 16px/22px "Lora", serif;
  scroll-behavior: smooth;
}

.ears {
  display: none;
}

/* headings */
section {
  clear: both;
}
.section-number {
  padding-right: 0.5em;
}
h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-title);
  font-weight: 680;
  margin: 0.8em 0 0.3em;
  font-size-adjust: 0.5;
  color: var(--title-color);
}
h1#title {
  font-size: 32px;
  line-height: 40px;
  clear: both;
}
h1#title, h1#rfcnum {
  margin: 1.5em 0 0.2em;
}
h1#rfcnum + h1#title {
  margin: 0.2em 0;
}

h1, h2, h3 {
  font-size: 22px;
  line-height: 27px;
}
h4, h5, h6 {
  font-size: 20px;
  line-height: 24px;
}

/* general structure */
.author {
  padding-bottom: 0.3em;
  vertical-align: top;
}
#abstract+p {
  font-size: 18px;
  line-height: 24px;
}
#abstract+p code, #abstract+p samp, #abstract+p tt {
  font-size: 16px;
  line-height: 0;
}

p {
  padding: 0;
  margin: 0.5em 0;
  text-align: left;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignRight.art-text pre {
  padding: 0;
  width: auto;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
/* font-family isn't space-separated, but =~ will have to do */
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignCenter.art-text pre {
  padding: 0;
  width: auto;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 0.5em 2em;
  & :is(ol, ul) {
    margin-left: 1em;
  }
}
li {
  margin: 0 0 0.25em 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
  & li {
    margin-top: 0.5em;
  }
}
:is(ul, ol).compact, .ulCompact, .olCompact {
  margin: 0 0 0 2em;
  & li {
    margin: 0;
    & :first-child { margin-top: 0; }
    & :last-child { margin-bottom: 0; }
  }
}

/* definition lists */
dl {
  clear: left;
  --indent: 3ch;
  /* --indent: attr(indent ch); not supported in any browser, but we can dream */
  &.olPercent {
    --indent: 5ch;
    & > dt {
      min-width: calc(var(--indent) - 2ch);
    }
  }
  &.olPercent > dt {
    float: none;
  }

  dl > dd > & {
    margin-top: 0.5em;
    margin-bottom: 0;
  }
}
dl:not(.dlNewline) > dt {
  float: left;
  margin-right: 2ch;
  min-width: 8ch;
}
dl > dd {
  margin-bottom: .8em;
  margin-left: var(--indent) !important; /* stupid element overrides */
  min-height: 2ex;
}
:is(dl.compact, .dlCompact) > dd {
  margin-bottom: 0;
  & > :is(:first-child, .break:first-child + *) {
    margin-top: 0;
  }
  & > :is(:last-child) {
    margin-bottom: 0;
  }
}
:is(dd, span).break {
  display: none;
}

/* links */
a, a[href].selfRef:hover {
  text-decoration: none;
}
a[href] {
  color: var(--link-color);
}
a[href].selfRef, .iref + a[href].internal {
  color: var(--text-color);
}
a[href]:hover {
  text-decoration: underline;
}
a[href].selfRef:hover {
  background-color: var(--highlight-color);
}
a.xref:is(.cite, .auto), :is(#status-of-memo, #copyright) a {
  white-space: nowrap;
}

/* Figures */
tt, code, pre {
  background-color: var(--highlight-color);
  font: 14px/22px var(--font-mono);
}
tt, code {
  /* changing the font for inline elements leads to different ascender
     and descender heights; as we want to retain baseline alignment,
     remove leading to avoid altering the final height of lines
     note: this fails if these blocks take an entire line,
     a different solution would be great */
  line-height: 0;
}
:is(h1, h2, h3, h4, h5, h6) :is(tt, code) {
  font-size: 84%;
}
pre {
  border: 1px solid var(--line-color);
  font-size: 13.5px;
  line-height: 16px;
  letter-spacing: -0.2px;
  margin: 5px;
  padding: 5px;
}
img {
  max-width: 100%;
}
figure {
  margin: 0.5em 0;
  padding: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption, caption {
  font-style: italic;
  margin: 0.5em 1.5em;
  text-align: left;
  caption-side: bottom;
}
@media screen {
  /* Auto-collapse boilerplate. */
  :is(#status-of-memo, #copyright) p {
    margin: -2px 0;
    max-height: 0;
    transition: max-height 2s ease, margin 0.5s ease 0.5s;
    overflow: hidden;
  }
  :is(#status-of-memo, #copyright):hover p,
  :is(#status-of-memo, #copyright) h2:target ~ p {
    margin: 0.5em 0;
    max-height: 500px;
    overflow: auto;
  }
  pre, svg {
    display: inline-block;
    /* In the horizontal direction, sometimes people make over-sized figures.
       Scrollbars for those is therefore necessary: auto adds them as necessary..
       In the vertical direction, the line-height can combine with the font
       asender/descender height to produce scrollbars: hidden avoids that. */
    overflow: auto hidden;
  }
  pre {
    max-width: 100%;
    width: calc(100% - 22px - 1em);
  }
  svg {
    max-width: calc(100% - 22px - 1em);
  }
  figure pre {
    display: block;
    width: calc(100% - 25px);
  }
  :is(pre, svg) + .pilcrow {
    display: inline-block;
    vertical-align: text-bottom;
    padding-bottom: 8px;
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 0 2em;
  font-style: italic;
}
blockquote {
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: auto;
  max-width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
}
table.right {
  margin-left: auto;
}
table.center {
  margin-left: auto;
  margin-right: auto;
}
table.left {
  margin-right: auto;
}
table .text-left {
  text-align: left;
}
table .text-center {
  text-align: center;
}
table .text-right {
  text-align: right;
}

thead, tbody {
  border: 1px solid var(--line-color);
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 5px 10px;
}
th {
  background-color: var(--line-color);
}
:is(tr:nth-child(2n), thead+tbody > tr:nth-child(2n+1)) > td {
  background-color: var(--background-color);
}
:is(tr:nth-child(2n+1), thead+tbody > tr:nth-child(2n)) > td {
  background-color: var(--highlight-color);
}
table caption {
  margin: 0;
  padding: 3px 0 3px 1em;
}
table p {
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  margin-left: 3px;
  opacity: 0.2;
  user-select: none;
  &[href] {
    color: var(--pilcrow-weak);
    &:hover { text-decoration: none; }
  }
}
@media not print {
  :hover > a.pilcrow {
    opacity: 1;
  }
  a.pilcrow[href]:hover {
    color: var(--pilcrow-strong);
    background-color: transparent;
  }
}
@media print {
  a.pilcrow {
    display: none;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid var(--line-color);
}
.bcp14 {
  font-variant: small-caps;
  font-weight: 600;
  font-size: var(--small-font-size);
}
.role {
  font-variant: all-small-caps;
}
sub, sup {
  line-height: 1;
  font-size: 80%;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: var(--small-font-size);
  line-height: 18px;
  --identifier-width: 15ch;
  & dt {
    width: var(--identifier-width);
    min-width: var(--identifier-width);
    clear: left;
    float: left;
    text-align: right;
    margin-right: 1ch;
  }
  & dd {
    margin: 0;
    margin-left: calc(1em + var(--identifier-width)) !important;
    min-width: 5em;
  }
  & .authors {
    & .author {
      display: inline-block;
      margin-right: 1.5em;
    }
    & .org {
      font-style: italic;
    }
  }
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #999;
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;

  & nav {
    & ul {
      margin: 0 0.5em 0 0;
      padding: 0;
      list-style: none;
    }
    & li {
      line-height: 1.3em;
      margin: 2px 0;
      padding-left: 1.2em;
      text-indent: -1.2em;
    }
  }
  & a.xref {
    white-space: normal;
  }
}

.references {
  & > dt {
    text-align: right;
    font-weight: bold;
    min-width: 10ch;
    margin-right: 1.5ch;
    &:target::before {
      content: "⇒";
      margin: 0 10px 0 -25px;
    }
  }
  & > dd {
    margin-left: 12ch !important;
    overflow: visible;
    & .refInstance {
      margin-bottom: 0.8em;
    }
    & .ascii {
      margin-bottom: 0.25em;
    }
  }
}

#rfc\.index\.index + ul {
  margin-left: 0;
}

/* authors */
address.vcard {
  font-style: normal;
  max-width: 20em;
  margin: 1em auto 1em 0;

  & .nameRole {
    font-weight: 700;
    margin-left: 0;
  }
  & .label {
    margin: 0.5em 0;
  }
  & .type {
    display: none;
  }
  & .alternative-contact {
    margin: 0.5em 0 0.25em 0;
  }
  & .non-ascii {
    margin: 0 0 0 2em;
  }
  & div.left {
    text-align: left;
  }
  & div.right {
    text-align: right;
  }
}

hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}
@media (min-width: 500px) {
  #authors-addresses > section {
    column-count: 2;
    column-gap: 20px;
  }
  #authors-addresses > section > h2 {
    column-span: all;
  }
  /* hack for break-inside: avoid-column */
  #authors-addresses address {
    display: inline-block;
    break-inside: avoid-column;
  }
}

/* Comments */
.rfcEditorRemove p:first-of-type {
  font-style: italic;
}
.cref {
  background-color: rgba(249, 232, 105, 0.3);
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}

@media screen {
  #toc nav {
    font-family: var(--font-title);
    font-weight: 360;
    & > ul { margin-bottom: 2em; }
    & ul {
      margin: 0 0 0 4px;
      & :is(p, li) {
        margin: 2px 0;
      }
    }
  }
  #toc a.toplink {
    float: right;
  }
}
@media not screen {
  #toc a.toplink {
    display: none;
  }
}


/* TOC layout for smaller screens */
@media screen and (max-width: 929px) {
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 1px 0 0 0;
    margin: 0;
    border-bottom: 1px solid #ccc;
    opacity: 0.6;
  }
  #toc h2 {
    margin: 0;
    padding: 2px 0 2px 6px;
    padding-right: 1em;
    font-size: 18px;
    line-height: 24px;
    min-width: 190px;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
    &::before { /* css hamburger */
      float: right;
      position: relative;
      width: 1em;
      height: 1px;
      left: -164px;
      margin: 8px 0 0 0;
      background: white none repeat scroll 0 0;
      box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
      content: "";
    }
  }
  #toc nav {
    display: none;
    background-color: var(--background-color);
    padding: 0.5em 1em 1em;
    overflow: auto;
    overscroll-behavior: contain;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
  #toc.active {
    opacity: 1;
    & nav { display: block; }
  }
  /* Make the collapsed ToC header render white on gray also when it's a link */
  #toc h2 a,
  #toc h2 a:is(:link, :focus, :hover),
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
  #toc a.toplink {
    margin: 2px 0.5em 0;
  }
}

/* TOC layout for wide screens */
@media screen and (min-width: 930px) {
  body {
    padding-right: 360px;
    padding-right: calc(min(180px + 20%, 500px));
  }
  #toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 480px);
    width: 312px;
    margin: 0;
    padding: 0;
    z-index: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 2em;
    overflow: auto;
    overscroll-behavior: contain;
    scrollbar-width: thin;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
  #toc a.toplink {
    margin: 8px 0.5em 0;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre, .vcard {
    page-break-inside: avoid;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  :is(h2, h3, h4, h5, h6)+*, dd {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
}

/* Dark mode. */
@media (prefers-color-scheme: dark) {
:root {
  --background-color: #121212;
  --text-color: #f0f0f0;
  --title-color: #fff;
  --link-color: #4da4f0;
  --highlight-color: #282828;
  --line-color: #444;
  --pilcrow-weak: #444;
  --pilcrow-strong: #666;
  scrollbar-color: #777 #333;
}
}

/* SVG Trick: a prefix match works because only black and white are allowed */
svg :is([stroke="black"], [stroke^="#000"]) {
  stroke: var(--text-color);
}
svg :is([stroke="white"], [stroke^="#fff"]) {
  stroke: var(--background-color);
}
svg :is([fill="black"], [fill^="#000"], :not([fill])) {
  fill: var(--text-color);
}
svg :is([fill="white"], [fill^="#fff"]) {
  fill: var(--background-color);
}
</style>

</head>
<body class="xml2rfc">
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">YANG-Push v2</td>
<td class="right">December 2025</td>
</tr></thead>
<tfoot><tr>
<td class="left">Wilton, et al.</td>
<td class="center">Expires 13 June 2026</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Network Configuration</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-wilton-netconf-yang-push-2-latest</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2025-12-10" class="published">10 December 2025</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2026-06-13">13 June 2026</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">R. Wilton, <span class="editor">Ed.</span>
</div>
<div class="org">Cisco Systems</div>
</div>
<div class="author">
      <div class="author-name">H. Keller</div>
<div class="org">Deuetsche Telekom</div>
</div>
<div class="author">
      <div class="author-name">B. Claise</div>
<div class="org">Everything OPS</div>
</div>
<div class="author">
      <div class="author-name">E. Aries</div>
<div class="org">Juniper</div>
</div>
<div class="author">
      <div class="author-name">J. Cumming</div>
<div class="org">Nokia</div>
</div>
<div class="author">
      <div class="author-name">T. Graf</div>
<div class="org">Swisscom</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">YANG Datastore Telemetry (YANG Push version 2)</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">YANG Push version 2 is a YANG datastore telemetry solution, as an alternative lightweight specification to the Subscribed Notifications and YANG Push solution, specifically optimized for the efficient observability of operational data.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<section class="note rfcEditorRemove" id="section-note.1">
      <h2 id="name-about-this-document">
<a href="#name-about-this-document" class="section-name selfRef">About This Document</a>
      </h2>
<p id="section-note.1-1">This note is to be removed before publishing as an RFC.<a href="#section-note.1-1" class="pilcrow">¶</a></p>
<p id="section-note.1-2">
        The latest revision of this draft can be found at <span><a href="https://rgwilton.github.io/draft-yp-observability/draft-wilton-netconf-yp-observability.html">https://rgwilton.github.io/draft-yp-observability/draft-wilton-netconf-yp-observability.html</a></span>.
        Status information for this document may be found at <span><a href="https://datatracker.ietf.org/doc/draft-wilton-netconf-yang-push-2/">https://datatracker.ietf.org/doc/draft-wilton-netconf-yang-push-2/</a></span>.<a href="#section-note.1-2" class="pilcrow">¶</a></p>
<p id="section-note.1-3">
        Discussion of this document takes place on the
        Network Configuration Working Group mailing list (<span><a href="mailto:netconf@ietf.org">mailto:netconf@ietf.org</a></span>),
        which is archived at <span><a href="https://mailarchive.ietf.org/arch/browse/netconf/">https://mailarchive.ietf.org/arch/browse/netconf/</a></span>.
        Subscribe at <span><a href="https://www.ietf.org/mailman/listinfo/netconf/">https://www.ietf.org/mailman/listinfo/netconf/</a></span>.<a href="#section-note.1-3" class="pilcrow">¶</a></p>
<p id="section-note.1-4">Source for this draft and an issue tracker can be found at
        <span><a href="https://github.com/rgwilton/draft-yp-observability">https://github.com/rgwilton/draft-yp-observability</a></span>.<a href="#section-note.1-4" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 13 June 2026.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2025 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-document-status" class="internal xref">Document Status</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-conventions" class="internal xref">Conventions</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1" class="keepWithNext"><a href="#section-3.1" class="auto internal xref">3.1</a>.  <a href="#name-background-and-motivation-f" class="internal xref">Background and Motivation for YANG Push v2</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="auto internal xref">3.2</a>.  <a href="#name-complexities-in-modelling-t" class="internal xref">Complexities in Modelling the Operational State Datastore</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="auto internal xref">3.3</a>.  <a href="#name-complexities-for-consumers-" class="internal xref">Complexities for Consumers of YANG Push Data</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.1">
                    <p id="section-toc.1-1.3.2.3.2.1.1"><a href="#section-3.3.1" class="auto internal xref">3.3.1</a>.  <a href="#name-combined-periodic-and-on-ch" class="internal xref">Combined periodic and on-change subscription</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.4">
                <p id="section-toc.1-1.3.2.4.1"><a href="#section-3.4" class="auto internal xref">3.4</a>.  <a href="#name-relationships-to-existing-r" class="internal xref">Relationships to existing RFCs and Internet Drafts</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.4.2.1">
                    <p id="section-toc.1-1.3.2.4.2.1.1"><a href="#section-3.4.1" class="auto internal xref">3.4.1</a>.  <a href="#name-rfc-8639-and-rfc-8641" class="internal xref">RFC 8639 and RFC 8641</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.4.2.2">
                    <p id="section-toc.1-1.3.2.4.2.2.1"><a href="#section-3.4.2" class="auto internal xref">3.4.2</a>.  <a href="#name-and-rfc-5277" class="internal xref">I-D.draft-ietf-netconf-notif-envelope and RFC 5277</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.4.2.3">
                    <p id="section-toc.1-1.3.2.4.2.3.1"><a href="#section-3.4.3" class="auto internal xref">3.4.3</a>.  <a href="#name-rfc-9196-and" class="internal xref">RFC 9196 and I-D.draft-netana-netconf-yp-transport-capabilities</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.4.2.4">
                    <p id="section-toc.1-1.3.2.4.2.4.1"><a href="#section-3.4.4" class="auto internal xref">3.4.4</a>.  <a href="#name-and" class="internal xref">I-D.draft-ietf-netconf-https-notif and I-D.draft-ietf-netconf-udp-notif</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.4.2.5">
                    <p id="section-toc.1-1.3.2.4.2.5.1"><a href="#section-3.4.5" class="auto internal xref">3.4.5</a>.  </p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-yang-push-v2-overview" class="internal xref">YANG Push v2 Overview</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-definitions" class="internal xref">Definitions</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-subscription-paths-and-sele" class="internal xref">Subscription paths and selection filters</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="auto internal xref">6.1</a>.  <a href="#name-ypath-definition" class="internal xref"><em>YPath</em> definition</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a href="#section-6.2" class="auto internal xref">6.2</a>.  <a href="#name-the-filters-container" class="internal xref">The "filters" Container</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3">
                <p id="section-toc.1-1.6.2.3.1"><a href="#section-6.3" class="auto internal xref">6.3</a>.  <a href="#name-decomposing-subscription-fi" class="internal xref">Decomposing Subscription Filters</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-datastore-event-streams" class="internal xref">Datastore Event Streams</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="auto internal xref">7.1</a>.  <a href="#name-notification-envelope" class="internal xref">Notification Envelope</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="auto internal xref">7.2</a>.  <a href="#name-event-records" class="internal xref">Event Records</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.3">
                <p id="section-toc.1-1.7.2.3.1"><a href="#section-7.3" class="auto internal xref">7.3</a>.  <a href="#name-types-of-subscription-event" class="internal xref">Types of subscription event monitoring</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.4">
                <p id="section-toc.1-1.7.2.4.1"><a href="#section-7.4" class="auto internal xref">7.4</a>.  <a href="#name-periodic-events" class="internal xref">Periodic events</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.5">
                <p id="section-toc.1-1.7.2.5.1"><a href="#section-7.5" class="auto internal xref">7.5</a>.  <a href="#name-on-change-events" class="internal xref">On-Change events</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.5.2.1">
                    <p id="section-toc.1-1.7.2.5.2.1.1"><a href="#section-7.5.1" class="auto internal xref">7.5.1</a>.  <a href="#name-on-change-notifiable-datast" class="internal xref">On-Change Notifiable Datastore Nodes</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.5.2.2">
                    <p id="section-toc.1-1.7.2.5.2.2.1"><a href="#section-7.5.2" class="auto internal xref">7.5.2</a>.  <a href="#name-on-change-considerations" class="internal xref">On-Change Considerations</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.6">
                <p id="section-toc.1-1.7.2.6.1"><a href="#section-7.6" class="auto internal xref">7.6</a>.  <a href="#name-combined-periodic-and-on-cha" class="internal xref">Combined periodic and on-change subscriptions</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.7">
                <p id="section-toc.1-1.7.2.7.1"><a href="#section-7.7" class="auto internal xref">7.7</a>.  <a href="#name-streaming-update-examples" class="internal xref">Streaming Update Examples</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="auto internal xref">8</a>.  <a href="#name-receivers-transports-and-en" class="internal xref">Receivers, Transports, and Encodings</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="auto internal xref">8.1</a>.  <a href="#name-receivers" class="internal xref">Receivers</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1.2.1">
                    <p id="section-toc.1-1.8.2.1.2.1.1"><a href="#section-8.1.1" class="auto internal xref">8.1.1</a>.  <a href="#name-receivers-for-configured-su" class="internal xref">Receivers for Configured Subscriptions</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1.2.2">
                    <p id="section-toc.1-1.8.2.1.2.2.1"><a href="#section-8.1.2" class="auto internal xref">8.1.2</a>.  <a href="#name-receivers-for-dynamic-subsc" class="internal xref">Receivers for Dynamic Subscriptions</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1.2.3">
                    <p id="section-toc.1-1.8.2.1.2.3.1"><a href="#section-8.1.3" class="auto internal xref">8.1.3</a>.  <a href="#name-receiver-session-states-and" class="internal xref">Receiver Session States and State Machine</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="auto internal xref">8.2</a>.  <a href="#name-transports" class="internal xref">Transports</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2.2.1">
                    <p id="section-toc.1-1.8.2.2.2.1.1"><a href="#section-8.2.1" class="auto internal xref">8.2.1</a>.  <a href="#name-requirements-for-yang-push-" class="internal xref">Requirements for YANG Push v2 Transport Specifications</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.3">
                <p id="section-toc.1-1.8.2.3.1"><a href="#section-8.3" class="auto internal xref">8.3</a>.  <a href="#name-encodings" class="internal xref">Encodings</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="auto internal xref">9</a>.  <a href="#name-setting-up-and-managing-sub" class="internal xref">Setting up and Managing Subscriptions</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a href="#section-9.1" class="auto internal xref">9.1</a>.  <a href="#name-common-subscription-paramet" class="internal xref">Common Subscription Parameters</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1.2.1">
                    <p id="section-toc.1-1.9.2.1.2.1.1"><a href="#section-9.1.1" class="auto internal xref">9.1.1</a>.  <a href="#name-subscription-states" class="internal xref">Subscription States</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1.2.2">
                    <p id="section-toc.1-1.9.2.1.2.2.1"><a href="#section-9.1.2" class="auto internal xref">9.1.2</a>.  <a href="#name-creating-subscriptions" class="internal xref">Creating Subscriptions</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1.2.3">
                    <p id="section-toc.1-1.9.2.1.2.3.1"><a href="#section-9.1.3" class="auto internal xref">9.1.3</a>.  <a href="#name-modifying-subscriptions" class="internal xref">Modifying Subscriptions</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1.2.4">
                    <p id="section-toc.1-1.9.2.1.2.4.1"><a href="#section-9.1.4" class="auto internal xref">9.1.4</a>.  <a href="#name-terminating-subscriptions" class="internal xref">Terminating Subscriptions</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a href="#section-9.2" class="auto internal xref">9.2</a>.  <a href="#name-subscription-lifecycle-noti" class="internal xref">Subscription Lifecycle Notifications</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2.2.1">
                    <p id="section-toc.1-1.9.2.2.2.1.1"><a href="#section-9.2.1" class="auto internal xref">9.2.1</a>.  <a href="#name-subscription-started" class="internal xref">"subscription-started"</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2.2.2">
                    <p id="section-toc.1-1.9.2.2.2.2.1"><a href="#section-9.2.2" class="auto internal xref">9.2.2</a>.  <a href="#name-subscription-modified" class="internal xref">"subscription-modified"</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2.2.3">
                    <p id="section-toc.1-1.9.2.2.2.3.1"><a href="#section-9.2.3" class="auto internal xref">9.2.3</a>.  <a href="#name-subscription-terminated" class="internal xref">"subscription-terminated"</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2.2.4">
                    <p id="section-toc.1-1.9.2.2.2.4.1"><a href="#section-9.2.4" class="auto internal xref">9.2.4</a>.  <a href="#name-update-completed" class="internal xref">"update-completed"</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.3">
                <p id="section-toc.1-1.9.2.3.1"><a href="#section-9.3" class="auto internal xref">9.3</a>.  <a href="#name-configured-subscriptions" class="internal xref">Configured Subscriptions</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.3.2.1">
                    <p id="section-toc.1-1.9.2.3.2.1.1"><a href="#section-9.3.1" class="auto internal xref">9.3.1</a>.  <a href="#name-creating-a-configured-subsc" class="internal xref">Creating a Configured Subscription</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.3.2.2">
                    <p id="section-toc.1-1.9.2.3.2.2.1"><a href="#section-9.3.2" class="auto internal xref">9.3.2</a>.  <a href="#name-modifying-a-configured-subs" class="internal xref">Modifying a Configured Subscription</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.3.2.3">
                    <p id="section-toc.1-1.9.2.3.2.3.1"><a href="#section-9.3.3" class="auto internal xref">9.3.3</a>.  <a href="#name-deleting-a-configured-subsc" class="internal xref">Deleting a Configured Subscription</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.3.2.4">
                    <p id="section-toc.1-1.9.2.3.2.4.1"><a href="#section-9.3.4" class="auto internal xref">9.3.4</a>.  <a href="#name-resetting-a-configured-subs" class="internal xref">Resetting a Configured Subscription</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.4">
                <p id="section-toc.1-1.9.2.4.1"><a href="#section-9.4" class="auto internal xref">9.4</a>.  <a href="#name-dynamic-subscriptions" class="internal xref">Dynamic Subscriptions</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.4.2.1">
                    <p id="section-toc.1-1.9.2.4.2.1.1"><a href="#section-9.4.1" class="auto internal xref">9.4.1</a>.  <a href="#name-establishing-a-dynamic-subs" class="internal xref">Establishing a Dynamic Subscription</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.4.2.2">
                    <p id="section-toc.1-1.9.2.4.2.2.1"><a href="#section-9.4.2" class="auto internal xref">9.4.2</a>.  <a href="#name-modifying-a-dynamic-subscri" class="internal xref">Modifying a Dynamic Subscription</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.4.2.3">
                    <p id="section-toc.1-1.9.2.4.2.3.1"><a href="#section-9.4.3" class="auto internal xref">9.4.3</a>.  <a href="#name-deleting-a-dynamic-subscrip" class="internal xref">Deleting a Dynamic Subscription</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.4.2.4">
                    <p id="section-toc.1-1.9.2.4.2.4.1"><a href="#section-9.4.4" class="auto internal xref">9.4.4</a>.  <a href="#name-killing-a-dynamic-subscript" class="internal xref">Killing a Dynamic Subscription</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.4.2.5">
                    <p id="section-toc.1-1.9.2.4.2.5.1"><a href="#section-9.4.5" class="auto internal xref">9.4.5</a>.  <a href="#name-rpc-failures" class="internal xref">RPC Failures</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="auto internal xref">10</a>. <a href="#name-robustness-reliability-and-" class="internal xref">Robustness, Reliability, and Subscription Monitoring</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a href="#section-10.1" class="auto internal xref">10.1</a>.  <a href="#name-robustness-and-reliability" class="internal xref">Robustness and Reliability</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a href="#section-10.2" class="auto internal xref">10.2</a>.  <a href="#name-subscription-monitoring" class="internal xref">Subscription Monitoring</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.3">
                <p id="section-toc.1-1.10.2.3.1"><a href="#section-10.3" class="auto internal xref">10.3</a>.  <a href="#name-publisher-capacity" class="internal xref">Publisher Capacity</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="auto internal xref">11</a>. <a href="#name-conformance-and-capabilitie" class="internal xref">Conformance and Capabilities</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.1">
                <p id="section-toc.1-1.11.2.1.1"><a href="#section-11.1" class="auto internal xref">11.1</a>.  <a href="#name-capabilities" class="internal xref">Capabilities</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.2">
                <p id="section-toc.1-1.11.2.2.1"><a href="#section-11.2" class="auto internal xref">11.2</a>.  <a href="#name-subscription-content-versio" class="internal xref">Subscription Content Versioning</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#section-12" class="auto internal xref">12</a>. <a href="#name-core-yang-push-v2-yang-data" class="internal xref">Core YANG Push v2 YANG Data Model</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.1">
                <p id="section-toc.1-1.12.2.1.1"><a href="#section-12.1" class="auto internal xref">12.1</a>.  <a href="#name-ietf-yang-push-2-yang-tree" class="internal xref">ietf-yang-push-2 YANG tree</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.2">
                <p id="section-toc.1-1.12.2.2.1"><a href="#section-12.2" class="auto internal xref">12.2</a>.  <a href="#name-ietf-yang-push-2-yang-model" class="internal xref">ietf-yang-push-2 YANG Model</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#section-13" class="auto internal xref">13</a>. <a href="#name-configured-subscription-yan" class="internal xref">Configured Subscription YANG Data Model</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.1">
                <p id="section-toc.1-1.13.2.1.1"><a href="#section-13.1" class="auto internal xref">13.1</a>.  <a href="#name-ietf-yang-push-2-config-yan" class="internal xref">ietf-yang-push-2-config YANG tree</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.2">
                <p id="section-toc.1-1.13.2.2.1"><a href="#section-13.2" class="auto internal xref">13.2</a>.  <a href="#name-ietf-yang-push-2-config-yang" class="internal xref">ietf-yang-push-2-config YANG Model</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a href="#section-14" class="auto internal xref">14</a>. <a href="#name-capabilities-yang-data-mode" class="internal xref">Capabilities YANG Data Model</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14.2.1">
                <p id="section-toc.1-1.14.2.1.1"><a href="#section-14.1" class="auto internal xref">14.1</a>.  <a href="#name-ietf-yang-push-2-capabiliti" class="internal xref">ietf-yang-push-2-capabilities YANG tree</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14.2.2">
                <p id="section-toc.1-1.14.2.2.1"><a href="#section-14.2" class="auto internal xref">14.2</a>.  <a href="#name-ietf-yang-push-2-capabilitie" class="internal xref">ietf-yang-push-2-capabilities YANG Model</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15">
            <p id="section-toc.1-1.15.1"><a href="#section-15" class="auto internal xref">15</a>. <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15.2.1">
                <p id="section-toc.1-1.15.2.1.1"><a href="#section-15.1" class="auto internal xref">15.1</a>.  <a href="#name-use-of-yang-push-v2-with-na" class="internal xref">Use of YANG Push v2 with NACM</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15.2.2">
                <p id="section-toc.1-1.15.2.2.1"><a href="#section-15.2" class="auto internal xref">15.2</a>.  <a href="#name-receiver-authorization" class="internal xref">Receiver Authorization</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15.2.3">
                <p id="section-toc.1-1.15.2.3.1"><a href="#section-15.3" class="auto internal xref">15.3</a>.  <a href="#name-yang-module-security-consid" class="internal xref">YANG Module Security Considerations</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16">
            <p id="section-toc.1-1.16.1"><a href="#section-16" class="auto internal xref">16</a>. <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.1">
                <p id="section-toc.1-1.16.2.1.1"><a href="#section-16.1" class="auto internal xref">16.1</a>.  <a href="#name-namespace-uri-registrations" class="internal xref">Namespace URI registrations</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.17">
            <p id="section-toc.1-1.17.1"><a href="#section-17" class="auto internal xref">17</a>. <a href="#name-yang-module-name-registrati" class="internal xref">YANG Module Name registrations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18">
            <p id="section-toc.1-1.18.1"><a href="#section-18" class="auto internal xref"></a><a href="#name-acknowledgments" class="internal xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19">
            <p id="section-toc.1-1.19.1"><a href="#section-19" class="auto internal xref"></a><a href="#name-contributors" class="internal xref">Contributors</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.20">
            <p id="section-toc.1-1.20.1"><a href="#section-20" class="auto internal xref"></a><a href="#name-references" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.20.2.1">
                <p id="section-toc.1-1.20.2.1.1"><a href="#section-20.1" class="auto internal xref"></a><a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.20.2.2">
                <p id="section-toc.1-1.20.2.2.1"><a href="#section-20.2" class="auto internal xref"></a><a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.21">
            <p id="section-toc.1-1.21.1"><a href="#appendix-A" class="auto internal xref">Appendix A</a>.  <a href="#name-functional-changes-between-" class="internal xref">Functional changes between YANG Push v2 and YANG Push</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.21.2.1">
                <p id="section-toc.1-1.21.2.1.1"><a href="#appendix-A.1" class="auto internal xref">A.1</a>.  <a href="#name-removed-functionality" class="internal xref">Removed Functionality</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.21.2.2">
                <p id="section-toc.1-1.21.2.2.1"><a href="#appendix-A.2" class="auto internal xref">A.2</a>.  <a href="#name-changed-functionality" class="internal xref">Changed Functionality</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.21.2.3">
                <p id="section-toc.1-1.21.2.3.1"><a href="#appendix-A.3" class="auto internal xref">A.3</a>.  <a href="#name-added-functionality" class="internal xref">Added Functionality</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.22">
            <p id="section-toc.1-1.22.1"><a href="#appendix-B" class="auto internal xref">Appendix B</a>.  <a href="#name-subscription-errors-from-rf" class="internal xref">Subscription Errors (from RFC 8641)</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.22.2.1">
                <p id="section-toc.1-1.22.2.1.1"><a href="#appendix-B.1" class="auto internal xref">B.1</a>.  <a href="#name-rpc-failures-2" class="internal xref">RPC Failures</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.22.2.2">
                <p id="section-toc.1-1.22.2.2.1"><a href="#appendix-B.2" class="auto internal xref">B.2</a>.  <a href="#name-failure-notifications" class="internal xref">Failure Notifications</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.23">
            <p id="section-toc.1-1.23.1"><a href="#appendix-C" class="auto internal xref">Appendix C</a>.  <a href="#name-examples" class="internal xref">Examples</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.23.2.1">
                <p id="section-toc.1-1.23.2.1.1"><a href="#appendix-C.1" class="auto internal xref">C.1</a>.  <a href="#name-example-of-periodic-update-" class="internal xref">Example of periodic update messages</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.23.2.2">
                <p id="section-toc.1-1.23.2.2.1"><a href="#appendix-C.2" class="auto internal xref">C.2</a>.  <a href="#name-example-of-an-on-change-upd" class="internal xref">Example of an on-change-update notification using the new style update message</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.23.2.3">
                <p id="section-toc.1-1.23.2.3.1"><a href="#appendix-C.3" class="auto internal xref">C.3</a>.  <a href="#name-example-of-an-on-change-del" class="internal xref">Example of an on-change-delete notification using the new style update message</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.23.2.3.2.1">
                    <p id="section-toc.1-1.23.2.3.2.1.1"><a href="#appendix-C.3.1" class="auto internal xref">C.3.1</a>.  <a href="#name-update-message-with-single-" class="internal xref">Update message with single deleted data node</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.23.2.3.2.2">
                    <p id="section-toc.1-1.23.2.3.2.2.1"><a href="#appendix-C.3.2" class="auto internal xref">C.3.2</a>.  <a href="#name-update-message-with-multipl" class="internal xref">Update message with multiple on-change deletes</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.23.2.4">
                <p id="section-toc.1-1.23.2.4.1"><a href="#appendix-C.4" class="auto internal xref">C.4</a>.  <a href="#name-netconf-dynamic-subscriptio" class="internal xref">NETCONF Dynamic Subscription RPC examples</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.23.2.4.2.1">
                    <p id="section-toc.1-1.23.2.4.2.1.1"><a href="#appendix-C.4.1" class="auto internal xref">C.4.1</a>.  <a href="#name-successful-periodic-subscri" class="internal xref">Successful periodic subscription</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.23.2.4.2.2">
                    <p id="section-toc.1-1.23.2.4.2.2.1"><a href="#appendix-C.4.2" class="auto internal xref">C.4.2</a>.  <a href="#name-failed-periodic-subscriptio" class="internal xref">Failed periodic subscription</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.23.2.4.2.3">
                    <p id="section-toc.1-1.23.2.4.2.3.1"><a href="#appendix-C.4.3" class="auto internal xref">C.4.3</a>.  <a href="#name-delete-subscription-rpc" class="internal xref">"delete-subscription" RPC</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.24">
            <p id="section-toc.1-1.24.1"><a href="#appendix-D" class="auto internal xref">Appendix D</a>.  <a href="#name-summary-of-open-issues-pote" class="internal xref">Summary of Open Issues &amp; Potential Enhancements</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.24.2.1">
                <p id="section-toc.1-1.24.2.1.1"><a href="#appendix-D.1" class="auto internal xref">D.1</a>.  <a href="#name-issues-related-to-general-i" class="internal xref">Issues related to general IETF process</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.24.2.2">
                <p id="section-toc.1-1.24.2.2.1"><a href="#appendix-D.2" class="auto internal xref">D.2</a>.  <a href="#name-issue-related-to-terminolog" class="internal xref">Issue related to Terminology/Definitions</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.24.2.3">
                <p id="section-toc.1-1.24.2.3.1"><a href="#appendix-D.3" class="auto internal xref">D.3</a>.  <a href="#name-issues-related-to-yang-push" class="internal xref">Issues related to YANG Push v2 Overview</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.24.2.4">
                <p id="section-toc.1-1.24.2.4.1"><a href="#appendix-D.4" class="auto internal xref">D.4</a>.  <a href="#name-issues-related-to-subscript" class="internal xref">Issues related to Subscription Paths and Selection Filters</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.24.2.5">
                <p id="section-toc.1-1.24.2.5.1"><a href="#appendix-D.5" class="auto internal xref">D.5</a>.  <a href="#name-issues-related-to-datastore" class="internal xref">Issues related to Datastore Event Streams &amp; message format</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.24.2.6">
                <p id="section-toc.1-1.24.2.6.1"><a href="#appendix-D.6" class="auto internal xref">D.6</a>.  <a href="#name-issues-related-to-receivers" class="internal xref">Issues related to Receivers, Transports, &amp; Encodings</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.24.2.6.2.1">
                    <p id="section-toc.1-1.24.2.6.2.1.1"><a href="#appendix-D.6.1" class="auto internal xref">D.6.1</a>.  <a href="#name-issues-related-to-transport" class="internal xref">Issues related to Transports:</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.24.2.7">
                <p id="section-toc.1-1.24.2.7.1"><a href="#appendix-D.7" class="auto internal xref">D.7</a>.  <a href="#name-issues-related-to-setting-u" class="internal xref">Issues related to Setting up &amp; Managing Subscriptions</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.24.2.7.2.1">
                    <p id="section-toc.1-1.24.2.7.2.1.1"><a href="#appendix-D.7.1" class="auto internal xref">D.7.1</a>.  <a href="#name-issues-related-to-the-confi" class="internal xref">Issues related to the configuration model:</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.24.2.7.2.2">
                    <p id="section-toc.1-1.24.2.7.2.2.1"><a href="#appendix-D.7.2" class="auto internal xref">D.7.2</a>.  <a href="#name-issues-related-to-dynamic-s" class="internal xref">Issues related to dynamic subscriptions:</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.24.2.8">
                <p id="section-toc.1-1.24.2.8.1"><a href="#appendix-D.8" class="auto internal xref">D.8</a>.  <a href="#name-issues-related-to-subscripti" class="internal xref">Issues related to Subscription Lifecycle</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.24.2.9">
                <p id="section-toc.1-1.24.2.9.1"><a href="#appendix-D.9" class="auto internal xref">D.9</a>.  <a href="#name-issues-related-to-performan" class="internal xref">Issues related to Performance, Reliability &amp; Subscription Monitoring</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.24.2.9.2.1">
                    <p id="section-toc.1-1.24.2.9.2.1.1"><a href="#appendix-D.9.1" class="auto internal xref">D.9.1</a>.  <a href="#name-issues-questions-related-to" class="internal xref">Issues/questions related to operational data:</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.24.2.10">
                <p id="section-toc.1-1.24.2.10.1"><a href="#appendix-D.10" class="auto internal xref">D.10</a>. <a href="#name-issues-related-to-conforman" class="internal xref">Issues related to Conformance and Capabilities</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.24.2.11">
                <p id="section-toc.1-1.24.2.11.1"><a href="#appendix-D.11" class="auto internal xref">D.11</a>. <a href="#name-issues-related-to-the-yang-" class="internal xref">Issues related to the YANG Modules</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.24.2.12">
                <p id="section-toc.1-1.24.2.12.1"><a href="#appendix-D.12" class="auto internal xref">D.12</a>. <a href="#name-issues-related-to-the-secur" class="internal xref">Issues related to the Security Considerations (&amp; NACM filtering)</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.24.2.13">
                <p id="section-toc.1-1.24.2.13.1"><a href="#appendix-D.13" class="auto internal xref">D.13</a>. <a href="#name-issues-related-to-the-iana" class="internal xref">Issues related to the IANA</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.24.2.14">
                <p id="section-toc.1-1.24.2.14.1"><a href="#appendix-D.14" class="auto internal xref">D.14</a>. <a href="#name-issues-related-to-the-appen" class="internal xref">Issues related to the Appendixes</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.24.2.14.2.1">
                    <p id="section-toc.1-1.24.2.14.2.1.1"><a href="#appendix-D.14.1" class="auto internal xref">D.14.1</a>.  <a href="#name-examples-related-issues-que" class="internal xref">Examples related issues/questions:</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.24.2.15">
                <p id="section-toc.1-1.24.2.15.1"><a href="#appendix-D.15" class="auto internal xref">D.15</a>. <a href="#name-summary-of-closed-resolved-" class="internal xref">Summary of closed/resolved issues</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.25">
            <p id="section-toc.1-1.25.1"><a href="#appendix-E" class="auto internal xref"></a><a href="#name-authors-addresses" class="internal xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="document-status">
<section id="section-1">
      <h2 id="name-document-status">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-document-status" class="section-name selfRef">Document Status</a>
      </h2>
<p id="section-1-1"><em>RFC Editor: If present, please remove this section before publication.</em>
        <em>RFC Editor: Please replace 'RFC XXXX' with the RFC number for this RFC.</em><a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">Based on the feedback received during the IETF 121 NETCONF session, this document has currently been written as a self-contained lightweight protocol and document replacement for <span>[<a href="#RFC8639" class="cite xref">RFC8639</a>]</span> and <span>[<a href="#RFC8641" class="cite xref">RFC8641</a>]</span>, defining a separate configuration data model.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3"><strong>The comparison between YANG Push and YANG Push v2 is now in <a href="#DifferencesFromYangPush" class="auto internal xref">Appendix A</a>.</strong><a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4"><strong>Open issues are either now being tracked inline in the text or in <a href="#OpenIssuesTracker" class="auto internal xref">Appendix D</a> for the higher level issues.</strong><a href="#section-1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="conventions">
<section id="section-2">
      <h2 id="name-conventions">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-conventions" class="section-name selfRef">Conventions</a>
      </h2>
<p id="section-2-1">The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
"<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as
described in BCP 14 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span> when, and only when, they
appear in all capitals, as shown here.<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">All <em>YANG tree diagrams</em> used in this document follow the notation
defined in <span>[<a href="#RFC8340" class="cite xref">RFC8340</a>]</span>.<a href="#section-2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="introduction">
<section id="section-3">
      <h2 id="name-introduction">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-3-1"><span>[<a href="#I-D.ietf-nmop-yang-message-broker-integration" class="cite xref">I-D.ietf-nmop-yang-message-broker-integration</a>]</span> describes an architecture for how YANG datastore telemetry, e.g., <span>[<a href="#RFC8641" class="cite xref">RFC8641</a>]</span>, can be integrated effectively with message brokers, e.g., <span>[<a href="#Kafka" class="cite xref">Kafka</a>]</span>, that forms part of a wider architecture for a <em>Network Anomaly Detection Framework</em>, specified in <span>[<a href="#I-D.ietf-nmop-network-anomaly-architecture" class="cite xref">I-D.ietf-nmop-network-anomaly-architecture</a>]</span>.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">This document specifies "YANG Push v2", an lightweight alternative to Subscribed Notifications <span>[<a href="#RFC8639" class="cite xref">RFC8639</a>]</span> and YANG Push <span>[<a href="#RFC8641" class="cite xref">RFC8641</a>]</span>. YANG Push v2 is a separate YANG datastore telemetry solution, which can be implemented independently or, if desired, alongside <span>[<a href="#RFC8639" class="cite xref">RFC8639</a>]</span> and <span>[<a href="#RFC8641" class="cite xref">RFC8641</a>]</span>.<a href="#section-3-2" class="pilcrow">¶</a></p>
<p id="section-3-3">At a high level, YANG Push v2 is designed to solve a similar set of requirements as YANG Push, and it reuses a significant subset of the ideas and base solution from YANG Push.  YANG Push v2 defines a separate data model to allow concurrent implementation of both protocols and to facilitate more significant changes in behavior, but many of the data nodes are taken from YANG Push and have the same, or very similar definitions.<a href="#section-3-3" class="pilcrow">¶</a></p>
<p id="section-3-4">The following sections give the background for the solution, and highlight the key ways that this specification differs from the specifications that it is derived from.<a href="#section-3-4" class="pilcrow">¶</a></p>
<div id="background-and-motivation-for-yang-push-v2">
<section id="section-3.1">
        <h3 id="name-background-and-motivation-f">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-background-and-motivation-f" class="section-name selfRef">Background and Motivation for YANG Push v2</a>
        </h3>
<p id="section-3.1-1">A push based telemetry solution, as described both in this document and also the YANG Push solution described by <span>[<a href="#RFC8639" class="cite xref">RFC8639</a>]</span> and <span>[<a href="#RFC8641" class="cite xref">RFC8641</a>]</span>, is beneficial because it allows operational data to be exported by publishers more immediately and efficiently compared to legacy poll based mechanisms, such as SNMP <span>[<a href="#RFC3411" class="cite xref">RFC3411</a>]</span>.  Some further background information on the general motivations for push based telemetry, which equally apply here, can be found in the <em>Motivation</em> (section 1.1) of <span>[<a href="#RFC8639" class="cite xref">RFC8639</a>]</span> and the Introduction (section 1) of <span>[<a href="#RFC8641" class="cite xref">RFC8641</a>]</span>.  The remainder of this section is focused on the reasons why a new lightweight version of YANG Push has been specified, and what problems is aims to solve.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<p id="section-3.1-2">Early implementation efforts of the <span>[<a href="#I-D.ietf-nmop-yang-message-broker-integration" class="cite xref">I-D.ietf-nmop-yang-message-broker-integration</a>]</span> architecture hit issues with using either of the two common YANG datastore telemetry solutions that have been specified, i.e., <span>[<a href="#gNMI" class="cite xref">gNMI</a>]</span> or YANG Push <span>[<a href="#RFC8641" class="cite xref">RFC8641</a>]</span>.<a href="#section-3.1-2" class="pilcrow">¶</a></p>
<p id="section-3.1-3">gNMI is specified by the OpenConfig Industry Consortium.  It is more widely implemented, but operators report that some inter-operability issues between device implementations cause problems.  Many of the OpenConfig protocols and data models are also expected to evolve more rapidly than IETF protocols and models - that are expected to have a more gradual pace of evolution once an RFC has been published.<a href="#section-3.1-3" class="pilcrow">¶</a></p>
<p id="section-3.1-4">YANG Push <span>[<a href="#RFC8641" class="cite xref">RFC8641</a>]</span> was standardized by the IETF in 2019, but market adoption has been rather slow.  During 2023/2024, when vendors started implementing, or considering implementing, YANG Push, it was seen that some design choices for how particular features have been specified in the solution make it expensive and difficult to write performant implementations, particularly when considering the complexities and distributed nature of operational data.  In addition, some design choices of how the data is encoded (e.g., YANG Patch <span>[<a href="#RFC8072" class="cite xref">RFC8072</a>]</span>) make more sense when considering changes in configuration data but less sense when the goal is to export a subset of the operational data off the device in an efficient fashion for both devices (publishers) and clients (receivers).<a href="#section-3.1-4" class="pilcrow">¶</a></p>
<p id="section-3.1-5">Hence, during 2024, the vendors and operators working towards YANG telemetry solutions agreed to a plan to implement a subset of <span>[<a href="#RFC8639" class="cite xref">RFC8639</a>]</span> and <span>[<a href="#RFC8641" class="cite xref">RFC8641</a>]</span>, including common agreements of features that are not needed and would not be implemented, and deviations from the standards for some aspects of encoding YANG data.  In addition, the implementation efforts identified the minimal subset of functionality needed to support the initial telemetry use cases, and areas of potential improvement and optimization to the overall YANG Push telemetry solution (which has been written up as a set of small internet drafts that augment or extend the base YANG Push solution).<a href="#section-3.1-5" class="pilcrow">¶</a></p>
<p id="section-3.1-6">Out of this work, consensus was building to specify a cut down version of Subscribed Notifications <span>[<a href="#RFC8639" class="cite xref">RFC8639</a>]</span> and YANG Push <span>[<a href="#RFC8641" class="cite xref">RFC8641</a>]</span> that is both more focussed on the operational telemetry use case and is also easier to implement, achieved by relaxing some of the constraints on consistency on the device, and removing, or simplifying some of the operational features.  This has resulted in this specification, YANG Push v2.<a href="#section-3.1-6" class="pilcrow">¶</a></p>
<p id="section-3.1-7">The implementation efforts also gave rise to potential improvements to the protocol and encoding of notification messages.<a href="#section-3.1-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="OperationalModellingComplexities">
<section id="section-3.2">
        <h3 id="name-complexities-in-modelling-t">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-complexities-in-modelling-t" class="section-name selfRef">Complexities in Modelling the Operational State Datastore</a>
        </h3>
<p id="section-3.2-1">The YANG abstraction of a single datastore of related consistent data works very well for configuration that has a strong requirement to be self consistent, and that is always updated, and validated, in a transactional way.  But for producers of telemetry data, the YANG abstraction of a single operational datastore is not really possible for devices managing a non-trivial quantity of operational data.<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<p id="section-3.2-2">Some systems may store their operational data in a single logical database, yet it is less likely that the operational data can always be updated in a transactional way, and often for memory efficiency reasons such a database does not store individual leaves, but instead semi-consistent records of data at a container or list entry level.<a href="#section-3.2-2" class="pilcrow">¶</a></p>
<p id="section-3.2-3">For other systems, the operational information may be distributed across multiple internal nodes (e.g., linecards), and potentially many different process daemons within those distributed nodes.  Such systems generally do not, and cannot, exhibit full consistency <span>[<a href="#Consistency" class="cite xref">Consistency</a>]</span> of the operational data (which would require transactional semantics across all daemons and internal nodes), only offering an eventually consistent <span>[<a href="#EventualConsistency" class="cite xref">EventualConsistency</a>]</span> view of the data instead.<a href="#section-3.2-3" class="pilcrow">¶</a></p>
<p id="section-3.2-4">In practice, many network devices will manage their operational data as a combination of some data being stored in a central operational datastore, and other, higher scale, and potentially more frequently changing data (e.g., statistics or FIB information) being stored elsewhere in a more memory efficient and performant way.<a href="#section-3.2-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="complexities-for-consumers-of-yang-push-data">
<section id="section-3.3">
        <h3 id="name-complexities-for-consumers-">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-complexities-for-consumers-" class="section-name selfRef">Complexities for Consumers of YANG Push Data</a>
        </h3>
<p id="section-3.3-1">For the consumer of the telemetry data, there is a requirement to associate a schema with the instance-data that will be provided by a subscription.  One approach is to fetch and build the entire schema for the device, e.g., by fetching YANG library, and then use the subscription XPath to select the relevant subtree of the schema that applies only to the subscription.  The problem with this approach is that if the schema ever changes, e.g., after a software update, then it is reasonably likely of some changes occurring with the global device schema even if there are no changes to the schema subtree under the subscription path.  Hence, it would be helpful to identify and version the schema associated with a particular subscription path, and also to encoded the instance data relatively to the subscription path rather than as an absolute path from the root of the operational datastore.<a href="#section-3.3-1" class="pilcrow">¶</a></p>
<p id="section-3.3-2"><strong>TODO More needs to be added here, e.g., encoding, on-change considerations.  Splitting subscriptions up.</strong><a href="#section-3.3-2" class="pilcrow">¶</a></p>
<p id="section-3.3-3">This document proposes a new opt-in YANG-Push encoding format to use instead of the "push-update" and "push-change-update" notifications defined in <span>[<a href="#RFC8641" class="cite xref">RFC8641</a>]</span>.<a href="#section-3.3-3" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-3.3-4">
<li id="section-3.3-4.1">
            <p id="section-3.3-4.1.1">To allow the device to split a subscription into smaller child subscriptions for more efficient independent and concurrent processing.  I.e., reusing the ideas from <span>[<a href="#I-D.ietf-netconf-distributed-notif" class="cite xref">I-D.ietf-netconf-distributed-notif</a>]</span>.  However, all child subscriptions are still encoded from the same subscription point.<a href="#section-3.3-4.1.1" class="pilcrow">¶</a></p>
</li>
        </ol>
<div id="combined-periodic-and-on-change-subscription">
<section id="section-3.3.1">
          <h4 id="name-combined-periodic-and-on-ch">
<a href="#section-3.3.1" class="section-number selfRef">3.3.1. </a><a href="#name-combined-periodic-and-on-ch" class="section-name selfRef">Combined periodic and on-change subscription</a>
          </h4>
<p id="section-3.3.1-1">Sometimes it is helpful to have a single subscription that covers both periodic and on-change notifications.<a href="#section-3.3.1-1" class="pilcrow">¶</a></p>
<p id="section-3.3.1-2">There are two ways in which this may be useful:<a href="#section-3.3.1-2" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-3.3.1-3">
<li id="section-3.3.1-3.1">
              <p id="section-3.3.1-3.1.1">For generally slow changing data (e.g., a device's physical inventory), then on-change notifications may be most appropriate.  However, in case there is any lost notification that isn't always detected, for any reason, then it may also be helpful to have a slow cadence periodic backup notification of the data (e.g., once every 24 hours), to ensure that the management systems should always eventually converge on the current state in the network.<a href="#section-3.3.1-3.1.1" class="pilcrow">¶</a></p>
</li>
            <li id="section-3.3.1-3.2">
              <p id="section-3.3.1-3.2.1">For data that is generally polled on a periodic basis (e.g., once every 10 minutes) and put into a time series database, then it may be helpful for some data trees to also get more immediate notifications that the data has changed.  Hence, a combined periodic and on-change subscription, would facilitate more frequent notifications of changes of the state, to reduce the need of having to always wait for the next periodic event.<a href="#section-3.3.1-3.2.1" class="pilcrow">¶</a></p>
</li>
          </ol>
<p id="section-3.3.1-4">Hence, this document introduces the fairly intuitive "periodic-and-on-change" update trigger that creates a combined periodic and on-change subscription, and allows the same parameters to be configured.  For some use cases, e.g., where a time-series database is being updated, the new encoding format proposed previously may be most useful.<a href="#section-3.3.1-4" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="DraftRelationships">
<section id="section-3.4">
        <h3 id="name-relationships-to-existing-r">
<a href="#section-3.4" class="section-number selfRef">3.4. </a><a href="#name-relationships-to-existing-r" class="section-name selfRef">Relationships to existing RFCs and Internet Drafts</a>
        </h3>
<p id="section-3.4-1">This document, specifying YANG Push v2, is intended to be a lightweight alternative for <span>[<a href="#RFC8639" class="cite xref">RFC8639</a>]</span> and <span>[<a href="#RFC8641" class="cite xref">RFC8641</a>]</span>, but that also incorporates various extensions since those RFCs were written.  Often substantial parts of those documents and models have been incorporated almost verbatim, but modified to fit the YANG Push v2 functionality and module structure.<a href="#section-3.4-1" class="pilcrow">¶</a></p>
<p id="section-3.4-2">Hence, the authors of this draft would like to sincerely thank and acknowledge the very significant effort put into those RFCs and drafts by authors, contributors and reviewers.  In particular, We would like to thank the listed authors of these documents: Eric Voit, Alex Clemm, Alberto Gonzalez Prieto, Einar Nilsen-Nygaard, Ambika Prasad Tripathy, Balazs Lengyel, Alexander Clemm, Benoit Claise, Qin Wu, Qiufang Ma, Alex Huang Feng, Thomas Graf, Pierre Francois.<a href="#section-3.4-2" class="pilcrow">¶</a></p>
<div id="rfc-8639-and-rfc-8641">
<section id="section-3.4.1">
          <h4 id="name-rfc-8639-and-rfc-8641">
<a href="#section-3.4.1" class="section-number selfRef">3.4.1. </a><a href="#name-rfc-8639-and-rfc-8641" class="section-name selfRef">RFC 8639 and RFC 8641</a>
          </h4>
<p id="section-3.4.1-1">This document is primarily intended to be a lightweight alternative for <span>[<a href="#RFC8639" class="cite xref">RFC8639</a>]</span> and <span>[<a href="#RFC8641" class="cite xref">RFC8641</a>]</span>, but it intentionally reuses substantial parts of the design and data model of those RFCs.<a href="#section-3.4.1-1" class="pilcrow">¶</a></p>
<p id="section-3.4.1-2">YANG Push v2 is defined using a separate module namespace, and hence can be implemented independently or, if desired, alongside <span>[<a href="#RFC8639" class="cite xref">RFC8639</a>]</span> and <span>[<a href="#RFC8641" class="cite xref">RFC8641</a>]</span>, and the various extensions to YANG Push.<a href="#section-3.4.1-2" class="pilcrow">¶</a></p>
<p id="section-3.4.1-3">A more complete description of the main differences in YANG Push v2 compares to <span>[<a href="#RFC8639" class="cite xref">RFC8639</a>]</span> and <span>[<a href="#RFC8641" class="cite xref">RFC8641</a>]</span> is given in <a href="#DifferencesFromYangPush" class="auto internal xref">Appendix A</a>.<a href="#section-3.4.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="i-ddraft-ietf-netconf-notif-envelope-and-rfc-5277">
<section id="section-3.4.2">
          <h4 id="name-and-rfc-5277">
<a href="#section-3.4.2" class="section-number selfRef">3.4.2. </a><a href="#name-and-rfc-5277" class="section-name selfRef"><span class="cite xref">[I-D.draft-ietf-netconf-notif-envelope]</span> and RFC 5277</a>
          </h4>
<p id="section-3.4.2-1">All of the notifications defined in this specification, i.e., both the datastore update message and subscription lifecycle update notifications (<a href="#LifecycleNotifications" class="auto internal xref">Section 9.2</a>) depend upon and use the notification envelope format defined in <span>[<a href="#I-D.draft-ietf-netconf-notif-envelope" class="cite xref">I-D.draft-ietf-netconf-notif-envelope</a>]</span>.<a href="#section-3.4.2-1" class="pilcrow">¶</a></p>
<p id="section-3.4.2-2">As such, this specification does not make any use of the notification format defined in <span>[<a href="#RFC5277" class="cite xref">RFC5277</a>]</span>, but this does not prevent implementations using <span>[<a href="#RFC5277" class="cite xref">RFC5277</a>]</span> format notifications for other YANG notifications, e.g., for the "NETCONF" event stream defined in <span>[<a href="#RFC5277" class="cite xref">RFC5277</a>]</span>.<a href="#section-3.4.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="rfc-9196-and-i-ddraft-netana-netconf-yp-transport-capabilities">
<section id="section-3.4.3">
          <h4 id="name-rfc-9196-and">
<a href="#section-3.4.3" class="section-number selfRef">3.4.3. </a><a href="#name-rfc-9196-and" class="section-name selfRef">RFC 9196 and <span class="cite xref">[I-D.draft-netana-netconf-yp-transport-capabilities]</span></a>
          </h4>
<p id="section-3.4.3-1">This document uses the capabilities concepts defined in <span>[<a href="#RFC9196" class="cite xref">RFC9196</a>]</span>.<a href="#section-3.4.3-1" class="pilcrow">¶</a></p>
<p id="section-3.4.3-2">In particular, it augments into the ietf-system-capabilities YANG module, but defines an equivalent alternative capability structure for the ietf-notification-capabilities YANG module, which defines the capabilities for YANG Push <span>[<a href="#RFC8641" class="cite xref">RFC8641</a>]</span>.<a href="#section-3.4.3-2" class="pilcrow">¶</a></p>
<p id="section-3.4.3-3">The generic transport capabilities defined in <span>[<a href="#I-D.draft-netana-netconf-yp-transport-capabilities" class="cite xref">I-D.draft-netana-netconf-yp-transport-capabilities</a>]</span> have been incorporated into the ietf-yang-push-2 YANG module, to augment YANG Push v2 transport capabilities and to use the different identities.<a href="#section-3.4.3-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="i-ddraft-ietf-netconf-https-notif-and-i-ddraft-ietf-netconf-udp-notif">
<section id="section-3.4.4">
          <h4 id="name-and">
<a href="#section-3.4.4" class="section-number selfRef">3.4.4. </a><a href="#name-and" class="section-name selfRef"><span class="cite xref">[I-D.draft-ietf-netconf-https-notif]</span> and <span class="cite xref">[I-D.draft-ietf-netconf-udp-notif]</span></a>
          </h4>
<p id="section-3.4.4-1">The ietf-yang-push-2 YANG module has subsumed and extended the <em>receivers</em> data model defined in the ietf-subscribed-notif-receivers YANG module defined in <span>[<a href="#I-D.draft-ietf-netconf-https-notif" class="cite xref">I-D.draft-ietf-netconf-https-notif</a>]</span>.<a href="#section-3.4.4-1" class="pilcrow">¶</a></p>
<p id="section-3.4.4-2">The overall YANG Push v2 solution anticipates and requires new bis versions of both of these transports documents that augment into the <em>receivers/receiver/transport-type</em> choice statement, and also augment the transport identity defined in the ietf-yang-push-2 data model.<a href="#section-3.4.4-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="i-ddraft-ietf-netconf-distributed-notif">
<section id="section-3.4.5">
          <h4>
<a href="#section-3.4.5" class="section-number selfRef">3.4.5. </a><span><span class="cite xref">[I-D.draft-ietf-netconf-distributed-notif]</span></span>
          </h4>
<p id="section-3.4.5-1"><strong>TODO.  It is likely that some of the base support for distributed notifications will be incorporated into this draft.  If so, add acknowledgements to the authors.</strong><a href="#section-3.4.5-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="overview">
<section id="section-4">
      <h2 id="name-yang-push-v2-overview">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-yang-push-v2-overview" class="section-name selfRef">YANG Push v2 Overview</a>
      </h2>
<p id="section-4-1">This document specifies a lightweight telemetry solution that provides a subscription service for updates to the state and changes in state from a chosen datastore.<a href="#section-4-1" class="pilcrow">¶</a></p>
<p id="section-4-2">Subscriptions specify when notification messages (also referred to as <em>updates</em>) should be sent, what data to include in the update records, and where those notifications should be sent.<a href="#section-4-2" class="pilcrow">¶</a></p>
<p id="section-4-3">A YANG Push v2 subscription comprises:<a href="#section-4-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4-4.1">
          <p id="section-4-4.1.1">a target datastore for the subscription, where the monitored subscription data is logically sourced from.<a href="#section-4-4.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-4-4.2">
          <p id="section-4-4.2.1">a set of selection filters to choose which datastore nodes from the target datastore the subscription is monitoring or sampling, as described in <a href="#pathsAndFilters" class="auto internal xref">Section 6</a>.<a href="#section-4-4.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-4-4.3">
          <p id="section-4-4.3.1">a choice of how update event notifications for the datastore's data nodes are triggered.  I.e., either periodic sampling of the current state, on-change event-driven, or both.  These are described in <strong>TODO, add reference</strong>.<a href="#section-4-4.3.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-4-4.4">
          <p id="section-4-4.4.1">a choice of encoding of the messages, e.g., JSON, or CBOR.<a href="#section-4-4.4.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-4-4.5">
          <p id="section-4-4.5.1">a receiver to which datastore updates and subscription notifications are sent, as described in <a href="#receivers" class="auto internal xref">Section 8.1</a>;<a href="#section-4-4.5.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4-4.5.2.1">
              <p id="section-4-4.5.2.1.1">for configured subscriptions, the receivers parameters are configured, and specify transport, receiver, and encoding parameters.<a href="#section-4-4.5.2.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-4-4.5.2.2">
              <p id="section-4-4.5.2.2.1">for dynamic subscriptions, the receiver uses the same transport session on which the dynamic subscription has been created.<a href="#section-4-4.5.2.2.1" class="pilcrow">¶</a></p>
</li>
          </ul>
</li>
      </ul>
<p id="section-4-5">If a subscription is valid and acceptable to the publisher, and if a suitable connection can be made to the receiver associated with a subscription, then the publisher will enact the subscription, periodically sampling or monitoring changes to the chosen datastore's data nodes that match the selection filter.  Push updates are subsequently sent by the publisher to the receiver, as per the terms of the subscription.<a href="#section-4-5" class="pilcrow">¶</a></p>
<p id="section-4-6">Subscriptions may be set up in two ways: either through configuration - or YANG RPCs to create and manage dynamic subscriptions.  These two mechanisms are described in <a href="#ConfiguredAndDynamic" class="auto internal xref">Section 9</a>.<a href="#section-4-6" class="pilcrow">¶</a></p>
<p id="section-4-7">Changes to the state of subscription are notified to receivers as subscription lifecycle notifications.  These are described in <a href="#LifecycleNotifications" class="auto internal xref">Section 9.2</a>.<a href="#section-4-7" class="pilcrow">¶</a></p>
<p id="section-4-8">Security access control mechanisms, e.g., NACM {RFC8341}} can be used to ensure the receivers only get access to the information for which they are allowed.  This is further described in <a href="#security" class="auto internal xref">Section 15</a>.<a href="#section-4-8" class="pilcrow">¶</a></p>
<p id="section-4-9">While the functionality defined in this document is transport agnostic, transports like the Network Configuration Protocol (NETCONF) <span>[<a href="#RFC6241" class="cite xref">RFC6241</a>]</span> or RESTCONF <span>[<a href="#RFC8040" class="cite xref">RFC8040</a>]</span> can be used to configure or dynamically signal subscriptions.  In the case of configured subscription, the transport used for carrying the subscription notifications is entirely independent from the protocol used to configure the subscription, and other transports, e.g., <span>[<a href="#I-D.draft-ietf-netconf-udp-notif" class="cite xref">I-D.draft-ietf-netconf-udp-notif</a>]</span> defines a simple UDP based transport for Push notifications. Transport considerations are described in <a href="#transports" class="auto internal xref">Section 8.2</a>. <strong>TODO the reference to draft-ietf-netconf-udp-notif isn't right, it wouldn't be that draft, but a -bis version of it.  James is querying whether we need this at all</strong><a href="#section-4-9" class="pilcrow">¶</a></p>
<p id="section-4-10"><strong>TODO Introduce capabilities and operational monitoring</strong><a href="#section-4-10" class="pilcrow">¶</a></p>
<p id="section-4-11">This document defines a YANG data model, that includes RPCs and notifications, for configuring and managing subscriptions and associated configuration, and to define the format of a <em>update</em> notification message.  The YANG model is defined in <a href="#yang-push-2-yang-module" class="auto internal xref">Section 12.2</a> and associated tree view in <a href="#yang-push-2-tree" class="auto internal xref">Section 12.1</a>.  The YANG data model defined in this document conforms to the Network Management Datastore Architecture defined in <span>[<a href="#RFC8342" class="cite xref">RFC8342</a>]</span>.<a href="#section-4-11" class="pilcrow">¶</a></p>
</section>
</div>
<div id="terminology">
<section id="section-5">
      <h2 id="name-definitions">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-definitions" class="section-name selfRef">Definitions</a>
      </h2>
<p id="section-5-1">This document reuses the terminology defined in <span>[<a href="#RFC7950" class="cite xref">RFC7950</a>]</span>, <span>[<a href="#RFC8341" class="cite xref">RFC8341</a>]</span>, <span>[<a href="#RFC8342" class="cite xref">RFC8342</a>]</span>, <span>[<a href="#RFC8639" class="cite xref">RFC8639</a>]</span> and <span>[<a href="#RFC8641" class="cite xref">RFC8641</a>]</span>.<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2">The following terms are taken from <span>[<a href="#RFC8342" class="cite xref">RFC8342</a>]</span>:<a href="#section-5-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5-3.1">
          <p id="section-5-3.1.1"><em>Datastore</em>: A conceptual place to store and access information.  A datastore might be implemented, for example, using files, a database, flash memory locations, or combinations thereof.  A datastore maps to an instantiated YANG data tree.<a href="#section-5-3.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-3.2">
          <p id="section-5-3.2.1"><em>Client</em>: An entity that can access YANG-defined data on a server, over some network management protocol.<a href="#section-5-3.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-3.3">
          <p id="section-5-3.3.1"><em>Configuration</em>: Data that is required to get a device from its initial default state into a desired operational state.  This data is modeled in YANG using "config true" nodes.  Configuration can originate from different sources.<a href="#section-5-3.3.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-3.4">
          <p id="section-5-3.4.1"><em>Configuration datastore</em>: A datastore holding configuration.<a href="#section-5-3.4.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-5-4">The following terms are taken from <span>[<a href="#RFC8639" class="cite xref">RFC8639</a>]</span>:<a href="#section-5-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5-5.1">
          <p id="section-5-5.1.1"><em>Configured subscription</em>: A subscription installed via configuration into a configuration datastore.<a href="#section-5-5.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-5.2">
          <p id="section-5-5.2.1"><em>Dynamic subscription</em>: A subscription created dynamically by a subscriber via a Remote Procedure Call (RPC).<a href="#section-5-5.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-5.3">
          <p id="section-5-5.3.1"><em>Event</em>: An occurrence of something that may be of interest.  Examples include a configuration change, a fault, a change in status, crossing a threshold, or an external input to the system.<a href="#section-5-5.3.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-5.4">
          <p id="section-5-5.4.1"><em>Event occurrence time</em>: A timestamp matching the time an originating process identified as when an event happened.<a href="#section-5-5.4.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-5.5">
          <p id="section-5-5.5.1"><em>Event record</em>: A set of information detailing an event.<a href="#section-5-5.5.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-5.6">
          <p id="section-5-5.6.1"><em>Event stream</em>: A continuous, chronologically ordered set of events aggregated under some context.<a href="#section-5-5.6.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-5.7">
          <p id="section-5-5.7.1"><em>Event stream filter</em>: Evaluation criteria that may be applied against event records in an event stream.  Event records pass the filter when specified criteria are met.<a href="#section-5-5.7.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-5.8">
          <p id="section-5-5.8.1"><em>Notification message</em>: Information intended for a receiver indicating that one or more events have occurred.<a href="#section-5-5.8.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-5.9">
          <p id="section-5-5.9.1"><em>Publisher</em>: An entity responsible for streaming notification messages per the terms of a subscription.<a href="#section-5-5.9.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-5.10">
          <p id="section-5-5.10.1"><em>Receiver</em>: A target to which a publisher pushes subscribed event records.  For dynamic subscriptions, the receiver and subscriber are the same entity.<a href="#section-5-5.10.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-5.11">
          <p id="section-5-5.11.1"><em>Subscriber</em>: A client able to request and negotiate a contract for the generation and push of event records from a publisher.  For dynamic subscriptions, the receiver and subscriber are the same entity.<a href="#section-5-5.11.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-5-6">The following terms are taken from <span>[<a href="#RFC8641" class="cite xref">RFC8641</a>]</span>:<a href="#section-5-6" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5-7.1">
          <p id="section-5-7.1.1"><em>Datastore node</em>: A node in the instantiated YANG data tree associated with a datastore.  In this document, datastore nodes are often also simply referred to as "objects".<a href="#section-5-7.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-7.2">
          <p id="section-5-7.2.1"><em>Datastore node update</em>: A data item containing the current value of a datastore node at the time the datastore node update was created, as well as the path to the datastore node.<a href="#section-5-7.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-7.3">
          <p id="section-5-7.3.1"><em>Datastore subscription</em>: A subscription to a stream of datastore node updates.<a href="#section-5-7.3.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-7.4">
          <p id="section-5-7.4.1"><em>Datastore subtree</em>: A datastore node and all its descendant datastore nodes.<a href="#section-5-7.4.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-7.5">
          <p id="section-5-7.5.1"><em>On-change subscription</em>: A datastore subscription with updates that are triggered when changes in subscribed datastore nodes are detected.<a href="#section-5-7.5.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-7.6">
          <p id="section-5-7.6.1"><em>Periodic subscription</em>: A datastore subscription with updates that are triggered periodically according to some time interval.<a href="#section-5-7.6.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-7.7">
          <p id="section-5-7.7.1"><em>Selection filter</em>: Evaluation and/or selection criteria that may be applied against a targeted set of objects.<a href="#section-5-7.7.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-7.8">
          <p id="section-5-7.8.1"><em>Update record</em>: A representation of one or more datastore node updates.  In addition, an update record may contain which type of update led to the datastore node update (e.g., whether the datastore node was added, changed, or deleted).  Also included in the update record may be other metadata, such as a subscription id of the subscription for which the update record was generated.  In this document, update records are often also simply referred to as "updates".<a href="#section-5-7.8.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-7.9">
          <p id="section-5-7.9.1"><em>Update trigger</em>: A mechanism that determines when an update record needs to be generated.<a href="#section-5-7.9.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-7.10">
          <p id="section-5-7.10.1"><em>YANG-Push</em>: The subscription and push mechanism for datastore updates that is specified in <span>[<a href="#RFC8641" class="cite xref">RFC8641</a>]</span>.<a href="#section-5-7.10.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-5-8">This document introduces the following terms:<a href="#section-5-8" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5-9.1">
          <p id="section-5-9.1.1"><em>Subscription</em>: A registration with a publisher, stipulating the information the receiver wishes to have pushed from the publisher without the need for further solicitation.<a href="#section-5-9.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-9.2">
          <p id="section-5-9.2.1"><em>Subscription Identifier</em>: A numerical identifier for a configured or dynamic subscription.  Also referred to as the subscription-id.<a href="#section-5-9.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-5-9.3">
          <p id="section-5-9.3.1"><em>YANG-Push-Lite</em>: The light weight subscription and push mechanism for datastore updates that is specified in this document. <strong>Add comment</strong><a href="#section-5-9.3.1" class="pilcrow">¶</a></p>
</li>
      </ul>
</section>
</div>
<div id="pathsAndFilters">
<section id="section-6">
      <h2 id="name-subscription-paths-and-sele">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-subscription-paths-and-sele" class="section-name selfRef">Subscription paths and selection filters</a>
      </h2>
<p id="section-6-1">A key part of a subscription is to select which data nodes should be monitored, and so a subscription must specify both the selection filters and the datastore against which these selection filters will be applied.  This information is used to choose, and subsequently push, <em>update</em> notifications from the publisher's datastore(s) to the subscription's receiver(s).<a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">Filters can either be defined inline within a configured subscription (<a href="#SubscriptionYangTree" class="auto internal xref">Figure 21</a>), a dynamic subscription's <em>establish-subscription</em> RPC (<a href="#EstablishSubscriptionYangTree" class="auto internal xref">Figure 14</a>), or as part of the <em>datastore-telemetry/filters</em> container (<a href="#FilterContainerYangTree" class="auto internal xref">Figure 1</a>) which can then be referenced from a configured or dynamic subscription.<a href="#section-6-2" class="pilcrow">¶</a></p>
<p id="section-6-3">The following selection filter types are included in the YANG Push v2 data model and may be applied against a datastore:<a href="#section-6-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6-4.1">
          <p id="section-6-4.1.1"><em>YPaths</em>: A list of basic YANG path selection filters that defines a path to a subtree of data nodes in the data tree, with some simple constraints on keys. See <a href="#YPaths" class="auto internal xref">Section 6.1</a>.<a href="#section-6-4.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-6-4.2">
          <p id="section-6-4.2.1"><em>subtree</em>: A subtree selection filter identifies one or more datastore subtrees.  When specified, <em>update</em> records will only include the datastore nodes of selected datastore subtree(s).  The syntax and semantics correspond to those specified in <span>[<a href="#RFC6241" class="cite xref">RFC6241</a>]</span>, Section 6.<a href="#section-6-4.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-6-4.3">
          <p id="section-6-4.3.1"><em>XPaths</em>: A list of <em>XPath</em> (<span>[<a href="#XPATH" class="cite xref">XPATH</a>]</span>) selection filter expressions.  When specified, updates will only come from the selected datastore nodes that match the node set associated with the XPath expression.<a href="#section-6-4.3.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-6-5">These filters are used as selectors that define which data nodes fall within the scope of a subscription.  A publisher <span class="bcp14">MUST</span> support YPath filters, and <span class="bcp14">MAY</span> also support subtree or XPath filters.<a href="#section-6-5" class="pilcrow">¶</a></p>
<p id="section-6-6">For both YPath and XPath based filters, each filter may define a list of path expressions.  Each of these filter path expressions <span class="bcp14">MAY</span> be processed by the publisher independently, and if two or more filter path expressions end up selecting overlapping data nodes then the publisher <span class="bcp14">MAY</span> notify duplicate values for those data nodes, but the encoded data that is returned <span class="bcp14">MUST</span> always be syntactically valid, i.e., as per section 5.3 of <span>[<a href="#RFC8342" class="cite xref">RFC8342</a>]</span>.<a href="#section-6-6" class="pilcrow">¶</a></p>
<div id="YPaths">
<section id="section-6.1">
        <h3 id="name-ypath-definition">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-ypath-definition" class="section-name selfRef"><em>YPath</em> definition</a>
        </h3>
<p id="section-6.1-1">A <em>YPath</em> represents a simple path into a YANG schema tree, where some of the list key values may be constrained.<a href="#section-6.1-1" class="pilcrow">¶</a></p>
<p id="section-6.1-2">It is encoded in the similar format to the YANG JSON encoding for instance-identifier, section 6.11 of <span>[<a href="#RFC7951" class="cite xref">RFC7951</a>]</span>, except with more flexibility on the keys, in that keys may be left-out or be bound to a regular expression filter.<a href="#section-6.1-2" class="pilcrow">¶</a></p>
<p id="section-6.1-3">The rules for constructing a YPath are:<a href="#section-6.1-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.1-4.1">
            <p id="section-6.1-4.1.1">A YPath is a sequence of data tree path segment separated by a '/' character.  If the path starts with a '/' then it is absolute path from the root of the schema, otherwise it is a relative path, where the context of the relative path must be declared.<a href="#section-6.1-4.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.1-4.2">
            <p id="section-6.1-4.2.1">Constraints on key values may be specified within a single pair of '[' ']' brackets, where:<a href="#section-6.1-4.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.1-4.2.2.1">
                <p id="section-6.1-4.2.2.1.1">keys may be given in any order, and may be omitted, in which case they match any value.  Key matches are separated by a comma (,) with optional space character either side.<a href="#section-6.1-4.2.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-6.1-4.2.2.2">
                <p id="section-6.1-4.2.2.2.1">key match is given by <em>&lt;key&gt;=&lt;value&gt;</em>, with optional space characters either side of the equals (=), and value is specified as:<a href="#section-6.1-4.2.2.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.1-4.2.2.2.2.1">
                    <p id="section-6.1-4.2.2.2.2.1.1">'&lt;value&gt;', for an exact match of the key's value.  Single quote characters (') must be escaped with a backslash (\).<a href="#section-6.1-4.2.2.2.2.1.1" class="pilcrow">¶</a></p>
</li>
                  <li class="normal" id="section-6.1-4.2.2.2.2.2">
                    <p id="section-6.1-4.2.2.2.2.2.1">r'&lt;reg-expr&gt;', for a regex match of the key value using <span>[<a href="#RFC9485" class="cite xref">RFC9485</a>]</span>, and where the regular-expression is a full match of the string, i.e, it implicit anchors to the start and end of the value.<a href="#section-6.1-4.2.2.2.2.2.1" class="pilcrow">¶</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
        </ul>
<p id="section-6.1-5">Some examples of YPaths:<a href="#section-6.1-5" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.1-6.1">
            <p id="section-6.1-6.1.1"><em>/ietf-interfaces:interfaces/interface[name='eth0']/ietf-ip:ipv6/ip</em> - which identifies is 'ipv6/ip' data node in the ietf-ip module for the 'eth0' interface.<a href="#section-6.1-6.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.1-6.2">
            <p id="section-6.1-6.2.1"><em>/ietf-interfaces:interfaces/interface[name=r'eth.*']/ietf-ip:ipv6/ip</em> - which identifies all interfaces with a name that start with "eth".<a href="#section-6.1-6.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.1-6.3">
            <p id="section-6.1-6.3.1"><em>/example:multi-keys-list[first-key='foo', second-key=r'bar.*']</em> - which identifies all entries in the 'multi-keys-list, where the first-key matches foo, and the second-key starts with bar.<a href="#section-6.1-6.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.1-6.4">
            <p id="section-6.1-6.4.1"><em>/ietf-interfaces:interfaces/interface</em> - which identifies the <em>interface</em> list data node in the ietf-interfaces module for all interfaces.  I.e., the interface list 'name' key is unrestricted.<a href="#section-6.1-6.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-6.1-6.5">
            <p id="section-6.1-6.5.1"><em>/ietf-interfaces:interfaces/interface[]</em> - alternative form of the previous YPath.<a href="#section-6.1-6.5.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="the-filters-container">
<section id="section-6.2">
        <h3 id="name-the-filters-container">
<a href="#section-6.2" class="section-number selfRef">6.2. </a><a href="#name-the-filters-container" class="section-name selfRef">The "filters" Container</a>
        </h3>
<p id="section-6.2-1">The "filters" container maintains a list of all datastore subscription filters that persist outside the lifecycle of a single subscription.  This enables predefined filters that may be referenced by more than one configured or dynamic subscription.<a href="#section-6.2-1" class="pilcrow">¶</a></p>
<p id="section-6.2-2">Below is a tree diagram for the "filters" container.  All objects contained in this tree are described in the YANG module in <a href="#ietf-yang-push-2-yang" class="auto internal xref">Section 12</a>.<a href="#section-6.2-2" class="pilcrow">¶</a></p>
<div id="FilterContainerYangTree">
<figure id="figure-1">
          <div class="lang-yangtree sourcecode" id="section-6.2-3.1">
<pre>
module: ietf-yang-push-2-config
  +--rw datastore-telemetry!
     +--rw filters
        +--rw filter* [name]
           +--rw name             string
           +--rw (filter)
              +--:(path)
              |  +--rw path       ypath
              +--:(subtree)
              |  +--rw subtree    &lt;anydata&gt;
              +--:(xpath)
                 +--rw xpath      yang:xpath1.0 {yp2:xpath}?

  augment /yp2:establish-subscription/yp2:input/yp2:target
            /yp2:filter:
    +--:(by-reference)
  augment /yp2:subscription-started/yp2:target:
    +-- filter-ref?   filter-ref
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a></figcaption></figure>
</div>
</section>
</div>
<div id="decomposing-subscription-filters">
<section id="section-6.3">
        <h3 id="name-decomposing-subscription-fi">
<a href="#section-6.3" class="section-number selfRef">6.3. </a><a href="#name-decomposing-subscription-fi" class="section-name selfRef">Decomposing Subscription Filters</a>
        </h3>
<p id="section-6.3-1">In order to address the issues described in <a href="#OperationalModellingComplexities" class="auto internal xref">Section 3.2</a>, YANG Push v2 allows for publishers to send subtrees of data nodes in separate <em>update</em> notifications, rather than requiring that the subscription data be returned as a single datastore <em>update</em> notification covering all data nodes matched by the subscription filter.  This better facilitates publishers that internally group some of their operational data fields together into larger structures for efficiency, and avoids publishers or receivers having to consume potentially very large notification messages.  For example, each entry in the <em>/ietf-interfaces:interface/interface</em> list could be represented as an object of data internally within the publisher.  In essence, a client specified subscription filter can be decomposed by a publisher into more specific non-overlapping filters that are then used to return the data.<a href="#section-6.3-1" class="pilcrow">¶</a></p>
<p id="section-6.3-2">In particular:<a href="#section-6.3-2" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-6.3-3">
<li id="section-6.3-3.1">
            <p id="section-6.3-3.1.1">A Publisher <span class="bcp14">MAY</span> decompose a client specified subscription filter path into a set of non-overlapping subscription filter paths that collectively cover the same data.  The publisher is allowed to return data for each of these decomposed subscription filter paths in separate <em>update</em> notification messages, each with separate, perhaps more precise, <em>observation-time</em> timestamps, but all using the same notification <em>event-time</em>.<a href="#section-6.3-3.1.1" class="pilcrow">¶</a></p>
</li>
          <li id="section-6.3-3.2">
            <p id="section-6.3-3.2.1">A Publisher <span class="bcp14">MAY</span> split large lists into multiple separate update messages, each with separate <em>observation-time</em> timestamps, but all using the same notification <em>event-time</em>.  E.g., if a device has 10,000 entries in a list, it may return them in a single response, or it may split them into multiple smaller messages, perhaps for 500 interfaces at a time.<a href="#section-6.3-3.2.1" class="pilcrow">¶</a></p>
</li>
        </ol>
<p id="section-6.3-4">To ensure that clients can reasonably process data returned via decomposed filters then:<a href="#section-6.3-4" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-6.3-5">
<li id="section-6.3-5.1">
            <p id="section-6.3-5.1.1"><em>update</em> notifications <span class="bcp14">MUST</span> indicate the precise subtree of data that the update message is updating or replacing, i.e., so a receiver can infer that data nodes no longer being notified by the publisher have been deleted:<a href="#section-6.3-5.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.3-5.1.2.1">
                <p id="section-6.3-5.1.2.1.1">if we support splitting list entries in multiple updates, then something like a <em>more_data</em> flag is needed to indicate that the given update message is not complete.<a href="#section-6.3-5.1.2.1.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
        </ol>
</section>
</div>
</section>
</div>
<div id="events">
<section id="section-7">
      <h2 id="name-datastore-event-streams">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-datastore-event-streams" class="section-name selfRef">Datastore Event Streams</a>
      </h2>
<p id="section-7-1">In YANG Push v2, a subscription, based on the selected filters, will generate a ordered stream of datastore <em>update</em> records that is referred to as an event stream.  Each subscription logically has a different event stream of update records, even if multiple subscriptions use the same filters to select datastore nodes.<a href="#section-7-1" class="pilcrow">¶</a></p>
<p id="section-7-2">As YANG-defined event records are created by a system, they may be assigned to one or more streams.  The event record is distributed to a subscription's receiver(s) where (1) a subscription includes the identified stream and (2) subscription filtering does not exclude the event record from that receiver.<a href="#section-7-2" class="pilcrow">¶</a></p>
<p id="section-7-3">Access control permissions may be used to silently exclude event records from an event stream for which the receiver has no read access.  See <span>[<a href="#RFC8341" class="cite xref">RFC8341</a>]</span>, Section 3.4.6 for an example of how this might be accomplished.  Note that per Section 2.7 of this document, subscription state change notifications are never filtered out. <strong>TODO, filtering and NACM filtering should be dependent on whether it is a configured or dynamic subscription.</strong><a href="#section-7-3" class="pilcrow">¶</a></p>
<p id="section-7-4">If subscriber permissions change during the lifecycle of a subscription and event stream access is no longer permitted, then the subscription <span class="bcp14">MUST</span> be terminated. <strong>TODO, check this</strong><a href="#section-7-4" class="pilcrow">¶</a></p>
<p id="section-7-5">Event records <span class="bcp14">SHALL</span> be sent to a receiver in the order in which they were generated.  I.e., the publisher <span class="bcp14">MUST</span> not reorder the events when enqueuing notifications on the transport session, but there is no guarantee of delivery order.<a href="#section-7-5" class="pilcrow">¶</a></p>
<p id="section-7-6">Event records <span class="bcp14">MUST NOT</span> be sent before a <em>subscription-started</em> notification (<a href="#SubscriptionStartedNotification" class="auto internal xref">Section 9.2.1</a>) or after a <em>subscription-terminated</em> notification (<a href="#SubscriptionTerminatedNotification" class="auto internal xref">Section 9.2.3</a>).<a href="#section-7-6" class="pilcrow">¶</a></p>
<div id="FullNotificationExample">
<section id="section-7.1">
        <h3 id="name-notification-envelope">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-notification-envelope" class="section-name selfRef">Notification Envelope</a>
        </h3>
<p id="section-7.1-1">All notifications in the event stream <span class="bcp14">MUST</span> be encoded using <span>[<a href="#I-D.draft-ietf-netconf-notif-envelope" class="cite xref">I-D.draft-ietf-netconf-notif-envelope</a>]</span> to wrap the notification message, and <span class="bcp14">MUST</span> include the <em>event-time</em>, <em>hostname</em>, and <em>sequence-number</em> leafs in all messages.<a href="#section-7.1-1" class="pilcrow">¶</a></p>
<p id="section-7.1-2">The following example illustrates a fully encoded <em>update</em> notification that includes the notification envelope and additional meta-data fields.  The <em>update</em> notification, i.e., as defined via the <em>notification</em> statement in the yang-push-lite YANG module, is carried in the <em>contents</em> anydata data node.<a href="#section-7.1-2" class="pilcrow">¶</a></p>
<span id="name-example-of-update-notificat"></span><figure id="figure-2">
          <div class="lang-json sourcecode" id="section-7.1-3.1">
<pre>
{
  "ietf-yp-notification:envelope": {
    "event-time": "2024-10-10T08:00:05.22Z",
    "hostname": "example-router",
    "sequence-number": 3219,
    "contents": {
      "ietf-yang-push-2:update": {
        "id": 1011,
        "snapshot-type": "periodic",
        "observation-time": "2024-10-10T08:00:05.11Z",
        "updates": [
          {
            "target-path": "ietf-interfaces:interfaces/interface",
            "data": {
              "ietf-interfaces:interfaces": {
                "ietf-interfaces:interface": [
                  {
                    "name": "eth0",
                    "type": "iana-if-type:ethernetCsmacd",
                    "enabled": true,
                    "ietf-interfaces:oper-status": "up",
                    "ietf-interfaces:admin-status": "up"
                  },
                  {
                    "name": "eth1",
                    "type": "iana-if-type:ethernetCsmacd",
                    "enabled": true,
                    "ietf-interfaces:oper-status": "up",
                    "ietf-interfaces:admin-status": "up"
                  }
                ]
              }
            }
          }
        ]
      }
    }
  }
}
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-example-of-update-notificat" class="selfRef">Example of update notification including notification envelope</a>
          </figcaption></figure>
</section>
</div>
<div id="EventRecords">
<section id="section-7.2">
        <h3 id="name-event-records">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-event-records" class="section-name selfRef">Event Records</a>
        </h3>
<p id="section-7.2-1">A single <em>update</em> record is used for all datastore notifications.  It is used to report the current state of a set of data nodes at a given target path for either periodic, on-change, or resync notifications, and also for on-change notifications to indicate that the data node at the given target path has been deleted.<a href="#section-7.2-1" class="pilcrow">¶</a></p>
<p id="section-7.2-2">The schema for this notifications is given in the following tree diagram:<a href="#section-7.2-2" class="pilcrow">¶</a></p>
<span id="name-update-notification"></span><figure id="figure-3">
          <div class="lang-yangtree sourcecode" id="section-7.2-3.1">
<pre>
    +---n update
    |  +--ro id?                 subscription-id
    |  +--ro path-prefix?        string
    |  +--ro snapshot-type       enumeration
    |  +--ro observation-time?   yang:date-and-time
    |  +--ro updates* [target-path]
    |  |  +--ro target-path    string
    |  |  +--ro data?          &lt;anydata&gt;
    |  +--ro complete?           empty
</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-update-notification" class="selfRef">'update' notification</a>
          </figcaption></figure>
<p id="section-7.2-4">The normative definitions for the notifications fields are given in the YANG module in <a href="#ietf-yang-push-2-yang" class="auto internal xref">Section 12</a>.  The fields can be informatively summarized as:<a href="#section-7.2-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7.2-5.1">
            <p id="section-7.2-5.1.1"><em>id</em> - identifies the subscription the notification relates to.<a href="#section-7.2-5.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.2-5.2">
            <p id="section-7.2-5.2.1"><em>path-prefix</em> - identifies the absolute instance-data path to which all target-paths are data are encoded relative to.<a href="#section-7.2-5.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.2-5.3">
            <p id="section-7.2-5.3.1"><em>snapshot-type</em> - this indicates what type of event causes the update message to be sent.  I.e., a periodic collection, an on-change event, or a resync collection.<a href="#section-7.2-5.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.2-5.4">
            <p id="section-7.2-5.4.1"><em>observation-time</em> - the time that the data was sampled, or when the on-change event occurred that caused the message to be published.<a href="#section-7.2-5.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.2-5.5">
            <p id="section-7.2-5.5.1"><em>target-path</em> - identifies the data node that is being acted on, either providing the replacement data for, or that data node that is being deleted.<a href="#section-7.2-5.5.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.2-5.6">
            <p id="section-7.2-5.6.1"><em>data</em> - the full replacement data subtree for the content at the target-path, encoded from the path-prefix.<a href="#section-7.2-5.6.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.2-5.7">
            <p id="section-7.2-5.7.1"><em>complete</em> - if present, this flag indicates that a periodic collection (<strong>TODO, what about on-change</strong>) is complete. Setting this flag is semantically equivalent to the server sending a separate update-complete notification.<a href="#section-7.2-5.7.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-7.2-6">As per the structure of the <em>update</em> notification, a single notification <span class="bcp14">MAY</span> provide updates for multiple target-paths.<a href="#section-7.2-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="types-of-subscription-event-monitoring">
<section id="section-7.3">
        <h3 id="name-types-of-subscription-event">
<a href="#section-7.3" class="section-number selfRef">7.3. </a><a href="#name-types-of-subscription-event" class="section-name selfRef">Types of subscription event monitoring</a>
        </h3>
<p id="section-7.3-1">Subscription can either be based on sampling the requested data on a periodic cadence or being notified when the requested data changes.  In addition, this specification allows for subscriptions that both notify on-change and also with a periodic cadence, which can help ensure that the system eventually converges on the right state, even if on-change notification were somehow lost or mis-processed anywhere in the data processing pipeline.<a href="#section-7.3-1" class="pilcrow">¶</a></p>
<p id="section-7.3-2">The schema for the update-trigger container is given in the following tree diagram:<a href="#section-7.3-2" class="pilcrow">¶</a></p>
<span id="name-update-trigger-container"></span><figure id="figure-4">
          <div class="lang-yangtree sourcecode" id="section-7.3-3.1">
<pre>
module: ietf-yang-push-2-config
  +--rw datastore-telemetry!
     +--rw subscriptions
        +--rw subscription* [id]
           +--rw update-trigger
              +--rw periodic!
              |  +--rw period         centiseconds
              |  +--rw anchor-time?   yang:date-and-time
              +--rw on-change! {on-change}?
                 +--rw sync-on-start?   boolean

  augment /yp2:establish-subscription/yp2:input/yp2:target
            /yp2:filter:
    +--:(by-reference)
  augment /yp2:subscription-started/yp2:target:
    +-- filter-ref?   filter-ref
</pre>
</div>
<figcaption><a href="#figure-4" class="selfRef">Figure 4</a>:
<a href="#name-update-trigger-container" class="selfRef">'update-trigger' container</a>
          </figcaption></figure>
<p id="section-7.3-4">The normative definitions for the update-trigger fields are given in the <em>ietf-yang-push-2</em> YANG module in <a href="#ietf-yang-push-2-yang" class="auto internal xref">Section 12</a>.  They are also described in the following sections.<a href="#section-7.3-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="periodic-events">
<section id="section-7.4">
        <h3 id="name-periodic-events">
<a href="#section-7.4" class="section-number selfRef">7.4. </a><a href="#name-periodic-events" class="section-name selfRef">Periodic events</a>
        </h3>
<p id="section-7.4-1">In a periodic subscription, the data included as part of an update record corresponds to data that could have been read using a retrieval operation.  Only the state that exists in the system at the time that it is being read is reported, periodic updates never explicitly indicate whether any data-nodes or list entries have been deleted.  Instead, receivers must infer deletions by the absence of data during a particular collection event.<a href="#section-7.4-1" class="pilcrow">¶</a></p>
<p id="section-7.4-2">For periodic subscriptions, triggered updates will occur at the boundaries of a specified time interval.  These boundaries can be calculated from the periodic parameters:<a href="#section-7.4-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7.4-3.1">
            <p id="section-7.4-3.1.1">a <em>period</em> that defines the duration between push updates.<a href="#section-7.4-3.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.4-3.2">
            <p id="section-7.4-3.2.1">an <em>anchor-time</em>; update intervals fall on the points in time that are a multiple of a <em>period</em> from an <em>anchor-time</em>.  If an <em>anchor-time</em> is not provided, then the publisher chooses a suitable anchor-time, e.g., perhaps the time that the subscription was first instantiated by the publisher.<a href="#section-7.4-3.2.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-7.4-4">The anchor time and period are particularly useful, in fact required, for when the collected telemetry data is being stored in a time-series database and the subscription is setup to ensure that each collection is placed in a separate time-interval bucket.<a href="#section-7.4-4" class="pilcrow">¶</a></p>
<p id="section-7.4-5">Periodic update notifications are expected, but not required, to use a single <em>target-path</em> per <em>update</em> notification.<a href="#section-7.4-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="on-change-events">
<section id="section-7.5">
        <h3 id="name-on-change-events">
<a href="#section-7.5" class="section-number selfRef">7.5. </a><a href="#name-on-change-events" class="section-name selfRef">On-Change events</a>
        </h3>
<p id="section-7.5-1">In an on-change subscription, <em>update</em> records indicate updated values or when a monitored data node or list node has been deleted.  An <em>update</em> record is sent whenever a change in the subscribed information is detected. <em>update</em> records <span class="bcp14">SHOULD</span> be generated at the same subtree as equivalent periodic subscription rather than only the specific data node that is on-change notifiable.  The goal is to ensure that the <em>update</em> message contains a consistent set of data on the subscription path.<a href="#section-7.5-1" class="pilcrow">¶</a></p>
<p id="section-7.5-2">Each entry in the <em>updates</em> list identifies a data node (i.e., list entry, container, leaf or leaf-list), via the <em>target-path</em> that either has changes is state or has been deleted.<a href="#section-7.5-2" class="pilcrow">¶</a></p>
<p id="section-7.5-3">A delete of a specific individual data node or subtree may be notified in two different ways:<a href="#section-7.5-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7.5-4.1">
            <p id="section-7.5-4.1.1">if the data that is being deleted is below the <em>target-path</em> then the delete is implicit by the publisher returning the current data node subtree with the delete data nodes missing.  I.e., the receiver must implicitly infer deletion.<a href="#section-7.5-4.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.5-4.2">
            <p id="section-7.5-4.2.1">if the data node is being deleted at the target path.  E.g., if an interface is deleted then an entire list entry related to that interface may be removed.  In this case, the <em>target path</em> identifies the list entry that is being deleted, but the data returned is just an empty object <code>{}</code>, which replaces all the existing data for that object in the receiver. <strong>TODO, is this better as a delete flag, or separate delete list?</strong><a href="#section-7.5-4.2.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-7.5-5">On-change subscriptions also support the following additional parameters:<a href="#section-7.5-5" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7.5-6.1">
            <p id="section-7.5-6.1.1"><em>sync-on-start</em> defines whether or not a complete snapshot of all subscribed data is sent at the start of a subscription.  Such early synchronization establishes the frame of reference for subsequent updates.  For each data node covered by an on-change with sync-on-start subscription, then an <em>sync-on-start</em> <em>update</em> notification containing the current state <span class="bcp14">MUST</span> be sent before any on-change <em>update</em> notifications for those same data nodes.  However, <em>sync-on-start</em> and <em>on-change</em> <em>update</em> notifications may be interleaved for different data-nodes under the subscription.  Unsolicited <em>sync-on-start update</em> notifications <span class="bcp14">MUST NOT</span> be sent, they <span class="bcp14">MUST</span> only be sent after a subscription has started.<a href="#section-7.5-6.1.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<div id="OnChangeConsiderations">
<section id="section-7.5.1">
          <h4 id="name-on-change-notifiable-datast">
<a href="#section-7.5.1" class="section-number selfRef">7.5.1. </a><a href="#name-on-change-notifiable-datast" class="section-name selfRef">On-Change Notifiable Datastore Nodes</a>
          </h4>
<p id="section-7.5.1-1">Publishers are not required to support on-change notifications for all data nodes, and they may not be able to generate on-change updates for some data nodes.  Possible reasons for this include:<a href="#section-7.5.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7.5.1-2.1">
              <p id="section-7.5.1-2.1.1">the value of the datastore node changes frequently (e.g., the in-octets counter as defined in <span>[<a href="#RFC8343" class="cite xref">RFC8343</a>]</span>),<a href="#section-7.5.1-2.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-7.5.1-2.2">
              <p id="section-7.5.1-2.2.1">small object changes that are frequent and meaningless (e.g., a temperature gauge changing 0.1 degrees),<a href="#section-7.5.1-2.2.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-7.5.1-2.3">
              <p id="section-7.5.1-2.3.1">or no implementation is available to generate a notification when the source variable for a particular data node has changed.<a href="#section-7.5.1-2.3.1" class="pilcrow">¶</a></p>
</li>
          </ul>
<p id="section-7.5.1-3">In addition, publishers are not required to notify every change or value for an on-change monitored data node.  Instead, publishers <span class="bcp14">MAY</span> limit the rate at which changes are reported for a given data node, i.e., effectively deciding the interval at which an underlying value is sampled.  If a data node changes value and then reverts back to the original value within a sample interval then the publisher <span class="bcp14">MAY</span> not detect the change and it would go unreported.  However, if the data node changes to a new value after it has been sampled, then the change and latest state are reported to the receiver.  In addition, if a client was to query the value (e.g., through a NETCONF get-data RPC) then they <span class="bcp14">MUST</span> see the same observed value as would be notified.<a href="#section-7.5.1-3" class="pilcrow">¶</a></p>
<p id="section-7.5.1-4">To give an example, if the interface link state reported by hardware is changing state hundreds of times per second, then it would be entirely reasonable to limit those interface state changes to a much lower cadence, e.g., perhaps every 100 milliseconds.  In the particular case of interfaces, there may also be data model specific forms of more advanced dampening that are more appropriate, e.g., that notify interface down events immediately, but rate limit how quickly the interface is allowed to transition to up state, which overall acts as a limit on the rate at which the interface state may change, and hence also act as a limit on the rate at which on-change notifications could be generated.<a href="#section-7.5.1-4" class="pilcrow">¶</a></p>
<p id="section-7.5.1-5">The information about what nodes support on-change notifications is reported using capabilities operational data model.  This is further described in <a href="#ConformanceAndCapabilities" class="auto internal xref">Section 11</a>.<a href="#section-7.5.1-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="on-change-considerations">
<section id="section-7.5.2">
          <h4 id="name-on-change-considerations">
<a href="#section-7.5.2" class="section-number selfRef">7.5.2. </a><a href="#name-on-change-considerations" class="section-name selfRef">On-Change Considerations</a>
          </h4>
<p id="section-7.5.2-1">On-change subscriptions allow receivers to receive updates whenever changes to targeted objects occur.  As such, on-change subscriptions are particularly effective for data that changes infrequently but for which applications need to be quickly notified, with minimal delay, whenever a change does occur.<a href="#section-7.5.2-1" class="pilcrow">¶</a></p>
<p id="section-7.5.2-2">On-change subscriptions tend to be more difficult to implement than periodic subscriptions.  Accordingly, on-change subscriptions may not be supported by all implementations or for every object.<a href="#section-7.5.2-2" class="pilcrow">¶</a></p>
<p id="section-7.5.2-3">Whether or not to accept or reject on-change subscription requests when the scope of the subscription contains objects for which on-change is not supported is up to the publisher implementation.  A publisher <span class="bcp14">MAY</span> accept an on-change subscription even when the scope of the subscription contains objects for which on-change is not supported.  In that case, updates are sent only for those objects within the scope of the subscription that do support on-change updates, whereas other objects are excluded from update records, even if their values change.  In order for a subscriber to determine whether objects support on-change subscriptions, objects are marked accordingly on a publisher.  Accordingly, when subscribing, it is the responsibility of the subscriber to ensure that it is aware of which objects support on-change and which do not.  For more on how objects are so marked, see Section 3.10. <strong>TODO Is this paragraph and the one below still the right choice for YANG Push v2?</strong><a href="#section-7.5.2-3" class="pilcrow">¶</a></p>
<p id="section-7.5.2-4">Alternatively, a publisher <span class="bcp14">MAY</span> decide to simply reject an on-change subscription if the scope of the subscription contains objects for which on-change is not supported.  In the case of a configured subscription, the publisher <span class="bcp14">MAY</span> suspend the subscription.<a href="#section-7.5.2-4" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="combined-periodic-and-on-change-subscriptions">
<section id="section-7.6">
        <h3 id="name-combined-periodic-and-on-cha">
<a href="#section-7.6" class="section-number selfRef">7.6. </a><a href="#name-combined-periodic-and-on-cha" class="section-name selfRef">Combined periodic and on-change subscriptions</a>
        </h3>
<p id="section-7.6-1">A single subscription may created to generate notifications both when changes occur and on a periodic cadence.  Such subscriptions are equivalent to having separate periodic and on-change subscriptions on the same path, except that they share the same subscription-id and filter paths.<a href="#section-7.6-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="streaming-update-examples">
<section id="section-7.7">
        <h3 id="name-streaming-update-examples">
<a href="#section-7.7" class="section-number selfRef">7.7. </a><a href="#name-streaming-update-examples" class="section-name selfRef">Streaming Update Examples</a>
        </h3>
<p id="section-7.7-1"><strong>TODO, Generate new JSON based example of a periodic, and delete messages.  Current placeholders are the existing YANG Push Notifications.</strong><a href="#section-7.7-1" class="pilcrow">¶</a></p>
<p id="section-7.7-2">Figure XXX provides an example of a notification message for a subscription tracking the operational status of a single Ethernet interface (per <span>[<a href="#RFC8343" class="cite xref">RFC8343</a>]</span>).  This notification message is encoded XML <em>W3C.REC-xml-20081126</em> over the Network Configuration Protocol
(NETCONF) as per <span>[<a href="#RFC8640" class="cite xref">RFC8640</a>]</span>.<a href="#section-7.7-2" class="pilcrow">¶</a></p>
<span id="name-example-update-periodic-not"></span><figure id="figure-5">
          <div class="lang-xml sourcecode" id="section-7.7-3.1">
<pre>
&lt;notification
  xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0"&gt;
&lt;eventTime&gt;2017-10-25T08:00:11.22Z&lt;/eventTime&gt;
&lt;push-update xmlns="urn:ietf:params:xml:ns:yang:ietf-yang-push"&gt;
  &lt;id&gt;1011&lt;/id&gt;
  &lt;datastore-contents&gt;
    &lt;interfaces
     xmlns="urn:ietf:params:xml:ns:yang:ietf-interfaces"&gt;
      &lt;interface&gt;
        &lt;name&gt;eth0&lt;/name&gt;
        &lt;oper-status&gt;up&lt;/oper-status&gt;
      &lt;/interface&gt;
    &lt;/interfaces&gt;
  &lt;/datastore-contents&gt;
&lt;/push-update&gt;
&lt;/notification&gt;
</pre>
</div>
<figcaption><a href="#figure-5" class="selfRef">Figure 5</a>:
<a href="#name-example-update-periodic-not" class="selfRef">Example 'update' periodic notification</a>
          </figcaption></figure>
<p id="section-7.7-4">Figure XXX provides an example of an on-change notification message for
the same subscription.<a href="#section-7.7-4" class="pilcrow">¶</a></p>
<span id="name-example-update-on-change-no"></span><figure id="figure-6">
          <div class="lang-xml sourcecode" id="section-7.7-5.1">
<pre>
&lt;notification
  xmlns="urn:ietf:params:xml:ns:netconf:notification:1.0"&gt;
&lt;eventTime&gt;2017-10-25T08:22:33.44Z&lt;/eventTime&gt;
&lt;push-change-update
    xmlns="urn:ietf:params:xml:ns:yang:ietf-yang-push"&gt;
  &lt;id&gt;89&lt;/id&gt;
  &lt;datastore-changes&gt;
    &lt;yang-patch&gt;
      &lt;patch-id&gt;0&lt;/patch-id&gt;
      &lt;edit&gt;
        &lt;edit-id&gt;edit1&lt;/edit-id&gt;
        &lt;operation&gt;replace&lt;/operation&gt;
        &lt;target&gt;/ietf-interfaces:interfaces&lt;/target&gt;
        &lt;value&gt;
          &lt;interfaces
              xmlns="urn:ietf:params:xml:ns:yang:ietf-interfaces"&gt;
            &lt;interface&gt;
              &lt;name&gt;eth0&lt;/name&gt;
              &lt;oper-status&gt;down&lt;/oper-status&gt;
            &lt;/interface&gt;
          &lt;/interfaces&gt;
        &lt;/value&gt;
      &lt;/edit&gt;
    &lt;/yang-patch&gt;
  &lt;/datastore-changes&gt;
&lt;/push-change-update&gt;
&lt;/notification&gt;
</pre>
</div>
<figcaption><a href="#figure-6" class="selfRef">Figure 6</a>:
<a href="#name-example-update-on-change-no" class="selfRef">Example 'update' on-change notification</a>
          </figcaption></figure>
</section>
</div>
</section>
</div>
<div id="ReceiversEtAl">
<section id="section-8">
      <h2 id="name-receivers-transports-and-en">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-receivers-transports-and-en" class="section-name selfRef">Receivers, Transports, and Encodings</a>
      </h2>
<div id="receivers">
<section id="section-8.1">
        <h3 id="name-receivers">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-receivers" class="section-name selfRef">Receivers</a>
        </h3>
<p id="section-8.1-1">Every subscription is associated with a receiver, which identifies the destination host, transport and encoding settings, where all notifications for a subscription are sent.<a href="#section-8.1-1" class="pilcrow">¶</a></p>
<p id="section-8.1-2">For configured subscriptions there is no explicit association with an existing transport session, and hence the properties associated with the receiver are explicitly configured, as described in <a href="#ConfiguredReceivers" class="auto internal xref">Section 8.1.1</a>.<a href="#section-8.1-2" class="pilcrow">¶</a></p>
<p id="section-8.1-3">For dynamic subscriptions, the receiver, and most associated properties are implicit from the session on which the dynamic subscription was initiated, as described in <a href="#DynamicSubscriptionReceivers" class="auto internal xref">Section 8.1.2</a>.<a href="#section-8.1-3" class="pilcrow">¶</a></p>
<div id="ConfiguredReceivers">
<section id="section-8.1.1">
          <h4 id="name-receivers-for-configured-su">
<a href="#section-8.1.1" class="section-number selfRef">8.1.1. </a><a href="#name-receivers-for-configured-su" class="section-name selfRef">Receivers for Configured Subscriptions</a>
          </h4>
<p id="section-8.1.1-1">For configured subscriptions, receivers are configured independently from the subscriptions and then referenced from the subscription configuration.<a href="#section-8.1.1-1" class="pilcrow">¶</a></p>
<p id="section-8.1.1-2">Below is a tree diagram for <em>datastore-telemetry/receivers</em> container. All objects contained in this tree are described in the YANG module in <a href="#yang-push-2-yang-module" class="auto internal xref">Section 12.2</a>.<a href="#section-8.1.1-2" class="pilcrow">¶</a></p>
<p id="section-8.1.1-3">These parameters identify how to connect to each receiver.  For each subscription, the publisher uses the referenced receiver configuration to establish transport connectivity to the receiver.<a href="#section-8.1.1-3" class="pilcrow">¶</a></p>
<span id="name-datastore-telemetry-receive"></span><div id="ReceiversYangTree">
<figure id="figure-7">
            <div class="lang-yangtree sourcecode" id="section-8.1.1-4.1">
<pre>
module: ietf-yang-push-2-config
  +--rw datastore-telemetry!
     +--rw receivers
        +--rw receiver* [name]
           +--rw name                      string
           +--rw encoding                  yp2:encoding
           +--rw dscp?                     inet:dscp
           +---x reset
           +--rw (notification-message-origin)?
           |  +--:(interface-originated)
           |  |  +--rw source-interface?   if:interface-ref
           |  |          {interface-designation}?
           |  +--:(address-originated)
           |     +--rw source-vrf?         leafref {supports-vrf}?
           |     +--rw source-address?     inet:ip-address-no-zone
           +--rw (transport-type)

  augment /yp2:establish-subscription/yp2:input/yp2:target
            /yp2:filter:
    +--:(by-reference)
  augment /yp2:subscription-started/yp2:target:
    +-- filter-ref?   filter-ref
</pre>
</div>
<figcaption><a href="#figure-7" class="selfRef">Figure 7</a>:
<a href="#name-datastore-telemetry-receive" class="selfRef">datastore-telemetry/receivers container</a>
            </figcaption></figure>
</div>
<p id="section-8.1.1-5">Each configured receiver has the following associated properties:<a href="#section-8.1.1-5" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8.1.1-6.1">
              <p id="section-8.1.1-6.1.1">a <em>name</em> to identify and reference the receiver in the subscription configuration.<a href="#section-8.1.1-6.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-8.1.1-6.2">
              <p id="section-8.1.1-6.2.1">a <em>transport</em>, which identifies the transport protocol to use for all connections to the receiver.<a href="#section-8.1.1-6.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8.1.1-6.2.2.1">
                  <p id="section-8.1.1-6.2.2.1.1">any transport-specific related parameters, some of which may be mandatory, others optional to specify, e.g., DSCP.  There are likely to be various data nodes related to establishing appropriate security and encryption.<a href="#section-8.1.1-6.2.2.1.1" class="pilcrow">¶</a></p>
</li>
              </ul>
</li>
            <li class="normal" id="section-8.1.1-6.3">
              <p id="section-8.1.1-6.3.1">an <em>encoding</em> to encode all YANG notification messages to the receiver, i.e., see <a href="#Encodings" class="auto internal xref">Section 8.3</a>.<a href="#section-8.1.1-6.3.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-8.1.1-6.4">
              <p id="section-8.1.1-6.4.1">optional parameters to identify where traffic should egress the publisher:<a href="#section-8.1.1-6.4.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8.1.1-6.4.2.1">
                  <p id="section-8.1.1-6.4.2.1.1">a <em>source-interface</em>, identifying the egress interface to use from the publisher, implicitly choosing the source IP address and VRF.<a href="#section-8.1.1-6.4.2.1.1" class="pilcrow">¶</a></p>
</li>
                <li class="normal" id="section-8.1.1-6.4.2.2">
                  <p id="section-8.1.1-6.4.2.2.1">a <em>source-vrf</em>, identifying the Virtual Routing and Forwarding (VRF) instance on which to reach receivers.  This VRF is a network instance as defined in <span>[<a href="#RFC8529" class="cite xref">RFC8529</a>]</span>.  Publisher support for VRFs is optional and advertised using the <em>supports-vrf</em> feature.<a href="#section-8.1.1-6.4.2.2.1" class="pilcrow">¶</a></p>
</li>
                <li class="normal" id="section-8.1.1-6.4.2.3">
                  <p id="section-8.1.1-6.4.2.3.1">a <em>source-address</em> address, identifying the IP address to source notification messages from.<a href="#section-8.1.1-6.4.2.3.1" class="pilcrow">¶</a></p>
</li>
              </ul>
<p id="section-8.1.1-6.4.3">
If none of the above parameters are set, the publisher <span class="bcp14">MAY</span> choose which interface(s) and address(es) to source subscription notifications from.<a href="#section-8.1.1-6.4.3" class="pilcrow">¶</a></p>
</li>
          </ul>
<p id="section-8.1.1-7">This specification is transport independent, e.g., see <a href="#transports" class="auto internal xref">Section 8.2</a>, and thus the YANG module defined in <a href="#yang-push-2-yang-module" class="auto internal xref">Section 12.2</a> cannot directly define and expose these transport parameters.  Instead, receiver-specific transport connectivity parameters <span class="bcp14">MUST</span> be configured via transport-specific augmentations to the YANG choice node <em>/datastore-telemetry/receivers/receiver/transport-type</em>.<a href="#section-8.1.1-7" class="pilcrow">¶</a></p>
<p id="section-8.1.1-8">A publisher supporting configured subscriptions clearly must support at least one YANG data model that augments transport connectivity parameters onto <em>/datastore-telemetry/receivers/receiver/transport-type</em>.  For an example of a similar such augmentation (but for YANG Push), see <span>[<a href="#I-D.draft-ietf-netconf-udp-notif" class="cite xref">I-D.draft-ietf-netconf-udp-notif</a>]</span>. <strong>TODO, this reference and text will need to be updated to a UDP-notif bis document, that augments the new YANG Push v2 receiver path.</strong><a href="#section-8.1.1-8" class="pilcrow">¶</a></p>
</section>
</div>
<div id="DynamicSubscriptionReceivers">
<section id="section-8.1.2">
          <h4 id="name-receivers-for-dynamic-subsc">
<a href="#section-8.1.2" class="section-number selfRef">8.1.2. </a><a href="#name-receivers-for-dynamic-subsc" class="section-name selfRef">Receivers for Dynamic Subscriptions</a>
          </h4>
<p id="section-8.1.2-1">For dynamic subscriptions, each subscription has a single receiver that is implicit from the host that initiated the <em>establish-subscription</em> RPC, reusing the same transport session for all the subscription notifications.<a href="#section-8.1.2-1" class="pilcrow">¶</a></p>
<p id="section-8.1.2-2">Hence most receiver parameters for a dynamic subscription, e.g., related to the transport, are implicitly determined and cannot be explicitly controlled.<a href="#section-8.1.2-2" class="pilcrow">¶</a></p>
<p id="section-8.1.2-3">Dynamic subscriptions <span class="bcp14">MUST</span> specify an encoding (see <a href="#Encodings" class="auto internal xref">Section 8.3</a>) and <span class="bcp14">MAY</span> specify DSCP Marking (see <a href="#DSCP" class="auto internal xref">Section 8.2.1.1</a>) for the telemetry notifications in the <em>establish-subscription</em> RPC (see <a href="#EstablishSubscriptionYangTree" class="auto internal xref">Figure 14</a>).<a href="#section-8.1.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="ReceiverStates">
<section id="section-8.1.3">
          <h4 id="name-receiver-session-states-and">
<a href="#section-8.1.3" class="section-number selfRef">8.1.3. </a><a href="#name-receiver-session-states-and" class="section-name selfRef">Receiver Session States and State Machine</a>
          </h4>
<p id="section-8.1.3-1">Each subscription will need to establish a subscription to the specified receiver.  Multiple subscriptions may share one or more transport sessions to the same receiver.<a href="#section-8.1.3-1" class="pilcrow">¶</a></p>
<p id="section-8.1.3-2">A receiver in YANG Push v2 can be in one of the following states:<a href="#section-8.1.3-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8.1.3-3.1">
              <p id="section-8.1.3-3.1.1"><strong>Configured</strong>: The receiver has been configured on the publisher, but the receiver is not referenced by any valid subscriptions and hence there is no attempt to establish a connection to the receiver.<a href="#section-8.1.3-3.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-8.1.3-3.2">
              <p id="section-8.1.3-3.2.1"><strong>Connecting</strong>: The receiver has at least one associated subscription and the publisher is attempting to establish a transport session and complete any required security exchanges, but this process has not yet succeeded.<a href="#section-8.1.3-3.2.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-8.1.3-3.3">
              <p id="section-8.1.3-3.3.1"><strong>Active</strong>: The receiver has at least one associated subscription, a transport session has been established (if required), security exchanges have successfully completed, and the publisher is able to send notifications to the receiver.<a href="#section-8.1.3-3.3.1" class="pilcrow">¶</a></p>
</li>
          </ul>
<p id="section-8.1.3-4">The state transitions for a receiver are illustrated below:<a href="#section-8.1.3-4" class="pilcrow">¶</a></p>
<span id="name-receiver-session-state-diag"></span><div id="ReceiverStateDiagram">
<figure id="figure-8">
            <div class="alignLeft art-text artwork" id="section-8.1.3-5.1">
<pre>
                    .-------------------.
                    |                   |
                    |    Configured     |
                    |                   |
                    '-------------------'
                            |  ^
  Receiver is referenced by |  |  No configured subscriptions
  1 or more subscriptions   |  |  reference the receiver
                            v  |
                    .-------------------.
                    |                   |
                    |    Connecting     |
                    |                   |
                    '-------------------'
                            |  ^
  Transport and/or security |  |  Transport or security session
  has been established.     |  |  has been lost or failed.
                            v  |
                    .-------------------.
                    |                   |
                    |      Active       |
                    |                   |
                    '-------------------'
</pre>
</div>
<figcaption><a href="#figure-8" class="selfRef">Figure 8</a>:
<a href="#name-receiver-session-state-diag" class="selfRef">Receiver Session State Diagram</a>
            </figcaption></figure>
</div>
<p id="section-8.1.3-6">This state model allows implementations and operators to clearly distinguish between receivers that are simply configured, those that are in the process of connecting, and those that are actively being used.<a href="#section-8.1.3-6" class="pilcrow">¶</a></p>
<p id="section-8.1.3-7">If the configuration has changed such that there were previously connections to a receiver, but that receiver is no longer referenced by valid subscriptions, then the publisher <span class="bcp14">MUST</span> close any associated transport sessions to the receiver, but <span class="bcp14">MAY</span> delay the closing for a short period of time (no more than 15 minutes) to potentially allow existing transport session to be reused by new subscriptions.<a href="#section-8.1.3-7" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="transports">
<section id="section-8.2">
        <h3 id="name-transports">
<a href="#section-8.2" class="section-number selfRef">8.2. </a><a href="#name-transports" class="section-name selfRef">Transports</a>
        </h3>
<p id="section-8.2-1">This document describes a transport-agnostic mechanism for subscribing to YANG datastore telemetry.  Hence, separate specifications are required to define transports that support YANG Push v2.  The requirements for these transport specifications are documented in the following section:<a href="#section-8.2-1" class="pilcrow">¶</a></p>
<div id="requirements-for-yang-push-v2-transport-specifications">
<section id="section-8.2.1">
          <h4 id="name-requirements-for-yang-push-">
<a href="#section-8.2.1" class="section-number selfRef">8.2.1. </a><a href="#name-requirements-for-yang-push-" class="section-name selfRef">Requirements for YANG Push v2 Transport Specifications</a>
          </h4>
<p id="section-8.2.1-1">This section provides requirements for any transport specifications supporting the YANG Push v2 solution presented in this document.<a href="#section-8.2.1-1" class="pilcrow">¶</a></p>
<p id="section-8.2.1-2">The transport specification <span class="bcp14">MUST</span> provide YANG modules, to be implemented by publishers implementing the YANG Push configuration model in <a href="#config-subs-data-model" class="auto internal xref">Section 13</a>, that:<a href="#section-8.2.1-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8.2.1-3.1">
              <p id="section-8.2.1-3.1.1">augments the <em>datastore-telemetry/receivers/transport-type</em> choice statement with a container that both identifies the transport and contains all transport specific parameters.<a href="#section-8.2.1-3.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-8.2.1-3.2">
              <p id="section-8.2.1-3.2.1">augments <em>/sysc:system-capabilities/transport/transport-capabilities/</em> container with any transport specific capabilities or options (conditional on a YANG <em>when</em> statement).  Note, encodings for a given transport are advertised directly via the ietf-yang-push-2-capabilities YANG Model <a href="#yang-push-2-yang-capabilities-module" class="auto internal xref">Section 14.2</a>.<a href="#section-8.2.1-3.2.1" class="pilcrow">¶</a></p>
</li>
          </ul>
<p id="section-8.2.1-4">Using a secure transport is <span class="bcp14">RECOMMENDED</span>.  Thus, any transport specification <span class="bcp14">MUST</span> provide a mechanism to ensure secure communication between the publisher and receiver in a hostile environment, e.g., through the use of transport layer encryption.  Transport specifications <span class="bcp14">MAY</span> also specify a mechanism for unencrypted communications, which can be used when transport layer security is not required, e.g., if the transport session is being secured via another mechanism, or when operating within a controlled environment or test lab.<a href="#section-8.2.1-4" class="pilcrow">¶</a></p>
<p id="section-8.2.1-5">Any transport specification <span class="bcp14">SHOULD</span> support mutual receiver and publisher authentication at the transport layer.<a href="#section-8.2.1-5" class="pilcrow">¶</a></p>
<p id="section-8.2.1-6">The transport selected by the subscriber to reach the publisher <span class="bcp14">SHOULD</span> be able to support multiple "establish-subscription" requests made in the same transport session.<a href="#section-8.2.1-6" class="pilcrow">¶</a></p>
<p id="section-8.2.1-7">The transport specification <span class="bcp14">MUST</span> specifying how multiple subscriptions referencing the same receiver are to be handled at the transport layer.  The transport specification <span class="bcp14">MAY</span> require separate transport sessions per subscription to a given receiver, or it <span class="bcp14">MAY</span> allow multiple subscriptions to the same receiver to be multiplexed over a shared transport session.<a href="#section-8.2.1-7" class="pilcrow">¶</a></p>
<p id="section-8.2.1-8">A specification for a transport built upon this document can choose whether to use the same logical channel for the RPCs and the event records.  However, the <em>update</em> records and the subscription state change notifications <span class="bcp14">MUST</span> be sent on the same transport session.<a href="#section-8.2.1-8" class="pilcrow">¶</a></p>
<p id="section-8.2.1-9">The transport specification <span class="bcp14">MAY</span> specify a keepalive mechanism to keep the transport session alive.  There is no YANG Push v2 protocol or application level keepalive mechanism.<a href="#section-8.2.1-9" class="pilcrow">¶</a></p>
<p id="section-8.2.1-10"><strong>TODO, do we need to mention anything about transport session timeouts, e.g., which would cause a subscription to be terminated.  What about buffering?  Is that a transport consideration?</strong><a href="#section-8.2.1-10" class="pilcrow">¶</a></p>
<p id="section-8.2.1-11">Additional transport requirements may be dictated by the choice of transport used with a subscription.<a href="#section-8.2.1-11" class="pilcrow">¶</a></p>
<div id="DSCP">
<section id="section-8.2.1.1">
            <h5 id="name-dscp-marking">
<a href="#section-8.2.1.1" class="section-number selfRef">8.2.1.1. </a><a href="#name-dscp-marking" class="section-name selfRef">DSCP Marking</a>
            </h5>
<p id="section-8.2.1.1-1">YANG Push v2 supports <em>dscp</em> marking to differentiate prioritization of notification messages during network transit.<a href="#section-8.2.1.1-1" class="pilcrow">¶</a></p>
<p id="section-8.2.1.1-2">A receiver with a <em>dscp</em> leaf results in a corresponding Differentiated Services Code Point (DSCP) marking <span>[<a href="#RFC2474" class="cite xref">RFC2474</a>]</span>} being placed in the IP header of any resulting <em>update</em> notification messages and subscription state change notifications.  A publisher <span class="bcp14">MUST</span> respect the DSCP markings for subscription traffic egressing that publisher.<a href="#section-8.2.1.1-2" class="pilcrow">¶</a></p>
<p id="section-8.2.1.1-3">The transport specification <span class="bcp14">MUST</span> specify if there are any particular quality-of-service or class-of-service considerations related to handling DSCP settings associated with the subscription.<a href="#section-8.2.1.1-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="Encodings">
<section id="section-8.3">
        <h3 id="name-encodings">
<a href="#section-8.3" class="section-number selfRef">8.3. </a><a href="#name-encodings" class="section-name selfRef">Encodings</a>
        </h3>
<p id="section-8.3-1">The <em>update</em> notification (<a href="#EventRecords" class="auto internal xref">Section 7.2</a>) and subscription lifecycle notifications (<a href="#LifecycleNotifications" class="auto internal xref">Section 9.2</a>) can be encoded in any format that has a definition for encoding YANG data.  For a given subscription, all notification messages are encoded using the same encoding.<a href="#section-8.3-1" class="pilcrow">¶</a></p>
<p id="section-8.3-2">Some IETF standards for YANG encodings known at the time of publication are:<a href="#section-8.3-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8.3-3.1">
            <p id="section-8.3-3.1.1">JSON, defined in <span>[<a href="#RFC7951" class="cite xref">RFC7951</a>]</span><a href="#section-8.3-3.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-8.3-3.2">
            <p id="section-8.3-3.2.1">CBOR, defined in <span>[<a href="#RFC9254" class="cite xref">RFC9254</a>]</span>, and <span>[<a href="#RFC9595" class="cite xref">RFC9595</a>]</span> for using compressed schema identifiers (YANG SIDs)<a href="#section-8.3-3.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-8.3-3.3">
            <p id="section-8.3-3.3.1">XML, defined in <span>[<a href="#RFC7950" class="cite xref">RFC7950</a>]</span><a href="#section-8.3-3.3.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-8.3-4">To maximize interoperability, all implementations are <span class="bcp14">RECOMMENDED</span> to support both JSON and CBOR encodings (using regular YANG identifiers).  Constrained platforms may not be able to support JSON and hence may choose to only support CBOR encoding.  JSON encoding may not be supported in the scenario that another encoding becomes the defacto standard (e.g., as JSON has largely replaced XML as the defacto choice for text based encoding).  Support for the XML encoding and/or CBOR encoding using YANG SIDs is <span class="bcp14">OPTIONAL</span>.<a href="#section-8.3-4" class="pilcrow">¶</a></p>
<p id="section-8.3-5">Encodings are defined in the <em>ietf-yang-push-2.yang</em> as YANG identities that derive from the <em>encoding</em> base identity.  Additional encodings can be defined by defining and implementing new identities that derive from the <em>encoding</em> base identity, and also advertising those identities as part of the ietf-yang-push-2-capabilities YANG module's transport capabilities <a href="#yang-push-2-yang-capabilities-module" class="auto internal xref">Section 14.2</a>.<a href="#section-8.3-5" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="ConfiguredAndDynamic">
<section id="section-9">
      <h2 id="name-setting-up-and-managing-sub">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-setting-up-and-managing-sub" class="section-name selfRef">Setting up and Managing Subscriptions</a>
      </h2>
<p id="section-9-1">Subscriptions can be set up and managed in two ways:<a href="#section-9-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-9-2">
<li id="section-9-2.1">
          <p id="section-9-2.1.1">Configured Subscriptions - a subscription created and principally controlled by configuration.<a href="#section-9-2.1.1" class="pilcrow">¶</a></p>
</li>
        <li id="section-9-2.2">
          <p id="section-9-2.2.1">Dynamic Subscriptions - a subscription created and principally controlled via YANG RPCs from a telemetry receiver.<a href="#section-9-2.2.1" class="pilcrow">¶</a></p>
</li>
      </ol>
<p id="section-9-3">Conformant implementations <span class="bcp14">MUST</span> implement at least one of the two mechanisms above for establishing and maintaining subscriptions, but they <span class="bcp14">MAY</span> choose to only implement a single mechanism.<a href="#section-9-3" class="pilcrow">¶</a></p>
<p id="section-9-4">The core behavior for both configured and dynamic subscription is the same, with the key differentiation being how they are provisioned, and how the transport is setup.  This next section describes the functionality that is common to both types of subscription, followed by the sections that describe the specifics and differences between the two ways of managing subscriptions.<a href="#section-9-4" class="pilcrow">¶</a></p>
<div id="CommonSubscriptionParameters">
<section id="section-9.1">
        <h3 id="name-common-subscription-paramet">
<a href="#section-9.1" class="section-number selfRef">9.1. </a><a href="#name-common-subscription-paramet" class="section-name selfRef">Common Subscription Parameters</a>
        </h3>
<p id="section-9.1-1">All subscriptions require the following state to be instantiated:<a href="#section-9.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-9.1-2.1">
            <p id="section-9.1-2.1.1">an <em>id</em> to identify the subscription.<a href="#section-9.1-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.1-2.2">
            <p id="section-9.1-2.2.1">the <em>target</em> for the subscription, comprising:<a href="#section-9.1-2.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-9.1-2.2.2.1">
                <p id="section-9.1-2.2.2.1.1">the target datastore, as per <span>[<a href="#RFC8342" class="cite xref">RFC8342</a>]</span><a href="#section-9.1-2.2.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-9.1-2.2.2.2">
                <p id="section-9.1-2.2.2.2.1">a set of selection filters to choose which datastore nodes the subscription is monitoring or sampling, as described in <a href="#pathsAndFilters" class="auto internal xref">Section 6</a>.<a href="#section-9.1-2.2.2.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="normal" id="section-9.1-2.3">
            <p id="section-9.1-2.3.1">the <em>update-trigger</em> to indicate when <em>update</em> notifications are generated:<a href="#section-9.1-2.3.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-9.1-2.3.2.1">
                <p id="section-9.1-2.3.2.1.1"><em>periodic</em>, for the publisher to send updated copies of the state on a periodic basis<a href="#section-9.1-2.3.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-9.1-2.3.2.2">
                <p id="section-9.1-2.3.2.2.1"><em>on-change</em>, for the publisher to send state updates when the internal state changes, i.e., event driven.<a href="#section-9.1-2.3.2.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="normal" id="section-9.1-2.4">
            <p id="section-9.1-2.4.1">receiver, transport, and encoding parameters, as per <a href="#receivers" class="auto internal xref">Section 8.1</a>.  How these are provided differs for configured vs dynamic subscriptions and is further explained in the sections below.<a href="#section-9.1-2.4.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-9.1-3">Subscription ids <span class="bcp14">MUST</span> be unique across all configured and dynamic subscriptions.  Configured subscription take precedence over dynamic subscription, so:<a href="#section-9.1-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-9.1-4.1">
            <p id="section-9.1-4.1.1">attempts to create a dynamic subscription with a subscription id that conflicts with any other subscription id (configured or dynamic) <span class="bcp14">MUST</span> fail,<a href="#section-9.1-4.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.1-4.2">
            <p id="section-9.1-4.2.1">configuring a subscription, assuming it passes configuration validation, replaces any dynamic subscriptions with the same subscription id.  Thus, causing the dynamic subscription to be immediately terminated (see <a href="#TerminatingSubscriptions" class="auto internal xref">Section 9.1.4</a>).<a href="#section-9.1-4.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.1-4.3">
            <p id="section-9.1-4.3.1">subscription ids starting with <code>dyn-</code> are reserved for the publisher to use for automatically allocate subscription ids for dynamic subscriptions when the client has choosen not to provide one in the <em>establish-subscription</em> RPC.<a href="#section-9.1-4.3.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<div id="subscription-states">
<section id="section-9.1.1">
          <h4 id="name-subscription-states">
<a href="#section-9.1.1" class="section-number selfRef">9.1.1. </a><a href="#name-subscription-states" class="section-name selfRef">Subscription States</a>
          </h4>
<p id="section-9.1.1-1">YANG Push v2 has a small set of simple states for a subscription on a publisher.  These states are intended to help clients easily determine the health and status of a subscription.<a href="#section-9.1.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-9.1.1-2.1">
              <p id="section-9.1.1-2.1.1"><strong>Invalid</strong>: a subscription that is invalid for any reason.  E.g., the subscription references an invalid filter expression for the current device schema.  Normally, invalid configurations should be rejected by the system, whether due to subscription configuration or <em>establish-subscription</em> RPC, and hence this state should rarely be seen.<a href="#section-9.1.1-2.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-9.1.1-2.2">
              <p id="section-9.1.1-2.2.1"><strong>Inactive</strong>: a valid subscription, but one that is not active because it has no associated receivers.  This state is unlikely to be seen for dynamic subscriptions. <strong>TODO, do we still need this state?</strong><a href="#section-9.1.1-2.2.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-9.1.1-2.3">
              <p id="section-9.1.1-2.3.1"><strong>Connecting</strong>: a subscription that is valid, and has appropriate receiver configuration, but the publisher has not managed to successfully connect to the receiver yet, and hence has not sent a <em>subscription-started</em> notification.  Transport security failures would be in this state.  <strong>TODO, what about no route to the receiver?</strong><a href="#section-9.1.1-2.3.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-9.1.1-2.4">
              <p id="section-9.1.1-2.4.1"><strong>Active</strong>: a valid subscription, connected to the receiver, that has sent a <em>subscription-stated</em> notification and is generating <em>update</em> notifications, as per the terms of the subscription update policy.<a href="#section-9.1.1-2.4.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-9.1.1-2.5">
              <p id="section-9.1.1-2.5.1"><strong>Terminated</strong>: represents a subscription that has finished.  Subscriptions would only be expected to transiently be in this state and hence it would not normally be reported.  Terminated dynamic subscriptions, or unconfigured subscriptions, should quickly be removed from the operational state of the device.  Terminated<a href="#section-9.1.1-2.5.1" class="pilcrow">¶</a></p>
</li>
          </ul>
<p id="section-9.1.1-3">Below is a state diagram illustrating the states, and the likely changes between states.  However, this is not a formal state machine and publishers can move between arbitrary states based on changes to subscription properties, the system, connectivity to receivers, or resource constraints on the system.  New subscriptions should choose an appropriate starting state, e.g., either Inactive or Invalid.<a href="#section-9.1.1-3" class="pilcrow">¶</a></p>
<span id="name-publishers-states-for-a-sub"></span><figure id="figure-9">
            <div class="alignLeft art-text artwork" id="section-9.1.1-4.1">
<pre>
                  .-------------------.         .-------------------.
                  |                   |         |                   |
                  |    Inactive       | &lt;------&gt;|     Invalid       |
                  |                   |         |                   |
                  '-------------------'         '-------------------'
                            ^
                            |
                            v
                  .-------------------.
                  |                   |
                  |    Connecting     |
                  |                   |
                  '-------------------'
                            ^
                            |
                            v
                  .-------------------.
                  |                   |
                  |    Active         |
                  |                   |
                  '-------------------'


                  .-------------------.
                  |                   |
                  |    Terminated     |
                  |                   |
                  '-------------------'
</pre>
</div>
<figcaption><a href="#figure-9" class="selfRef">Figure 9</a>:
<a href="#name-publishers-states-for-a-sub" class="selfRef">Publisher's States for a Subscription</a>
            </figcaption></figure>
</section>
</div>
<div id="CreatingSubscriptions">
<section id="section-9.1.2">
          <h4 id="name-creating-subscriptions">
<a href="#section-9.1.2" class="section-number selfRef">9.1.2. </a><a href="#name-creating-subscriptions" class="section-name selfRef">Creating Subscriptions</a>
          </h4>
<p id="section-9.1.2-1">After a subscription is successfully established, the publisher immediately sends a <em>subscription-started</em> subscription state change notification to each receiver.  It is quite possible that upon configuration, reboot, or even steady-state operations, a transport session may not be currently available to the receiver.  In this case, when there is something to transport for an active subscription, transport-specific "call home" operations <span>[<a href="#RFC8071" class="cite xref">RFC8071</a>]</span> will be used to establish the connection. <strong>TODO - this should just reference the transport RFCs</strong>.  When transport connectivity is available, notification messages may then be pushed.<a href="#section-9.1.2-1" class="pilcrow">¶</a></p>
<p id="section-9.1.2-2">With active configured subscriptions, it is allowable to buffer event records even after a <em>subscription-started</em> has been sent.  However, if events are lost (rather than just delayed) due to buffer capacity being reached, a <em>subscription-terminated</em> notification <span class="bcp14">MUST</span> be sent, followed by a new <em>subscription-started</em> notification. These notifications indicate an event record discontinuity has occurred.<a href="#section-9.1.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="ModifyingSubscriptions">
<section id="section-9.1.3">
          <h4 id="name-modifying-subscriptions">
<a href="#section-9.1.3" class="section-number selfRef">9.1.3. </a><a href="#name-modifying-subscriptions" class="section-name selfRef">Modifying Subscriptions</a>
          </h4>
<p id="section-9.1.3-1">The parameters associated with a subscription <span class="bcp14">MAY</span> be modified by client <em>modify-subscription</em> RPC or through configuration.<a href="#section-9.1.3-1" class="pilcrow">¶</a></p>
<p id="section-9.1.3-2">If the subscription is in <em>Active</em> state, and hence a <em>subscription-started</em> notification has been enqueued to the receiver, then any subscription parameter changes are handled as per the following sub-sections.  If the subscription is not yet in <em>Active</em> state then any transport changes associated with the receiver must be made, but otherwise the new parameters would be notified in the <em>subscription-started</em> notification.<a href="#section-9.1.3-2" class="pilcrow">¶</a></p>
<div id="ChangesNeedingTermination">
<section id="section-9.1.3.1">
            <h5 id="name-modifications-requiring-sub">
<a href="#section-9.1.3.1" class="section-number selfRef">9.1.3.1. </a><a href="#name-modifications-requiring-sub" class="section-name selfRef">Modifications requiring subscription-terminated notification</a>
            </h5>
<p id="section-9.1.3.1-1">Changes to any of following parameters <span class="bcp14">MUST</span> terminate the subscription, as per <a href="#TerminatingSubscriptions" class="auto internal xref">Section 9.1.4</a>, before recreating it, clearing and reinitializing any associated statistics, as per <a href="#CreatingSubscriptions" class="auto internal xref">Section 9.1.2</a>:<a href="#section-9.1.3.1-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-9.1.3.1-2">
<li id="section-9.1.3.1-2.1">
                <p id="section-9.1.3.1-2.1.1">the subcription <em>id</em><a href="#section-9.1.3.1-2.1.1" class="pilcrow">¶</a></p>
</li>
              <li id="section-9.1.3.1-2.2">
                <p id="section-9.1.3.1-2.2.1">the <em>encoding</em><a href="#section-9.1.3.1-2.2.1" class="pilcrow">¶</a></p>
</li>
              <li id="section-9.1.3.1-2.3">
                <p id="section-9.1.3.1-2.3.1">any <em>receiver</em> settings that change the encoding, transport, transport security, or receiver destination address/port<a href="#section-9.1.3.1-2.3.1" class="pilcrow">¶</a></p>
</li>
              <li id="section-9.1.3.1-2.4">
                <p id="section-9.1.3.1-2.4.1">the update-trigger to enable <em>sync-on-start</em>.<a href="#section-9.1.3.1-2.4.1" class="pilcrow">¶</a></p>
</li>
              <li id="section-9.1.3.1-2.5">
                <p id="section-9.1.3.1-2.5.1">if the <em>sync-in-start option</em> is enabled, then any changes to the subscription-filter (inline or referenced) or YANG schema (<em>schema-id</em>) associated with the subscription.<a href="#section-9.1.3.1-2.5.1" class="pilcrow">¶</a></p>
</li>
            </ol>
<p id="section-9.1.3.1-3">The <em>subscription-terminated</em> notification <span class="bcp14">MUST</span> be sent using the old <em>encoding</em> and <em>receiver</em> settings before the subscription parameters were changed.  The <em>subscription-started</em> notification <span class="bcp14">MUST</span> be sent using the updated subscription parameters.<a href="#section-9.1.3.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="ChangesNeedingModifiedNotif">
<section id="section-9.1.3.2">
            <h5 id="name-modifications-allowing-subs">
<a href="#section-9.1.3.2" class="section-number selfRef">9.1.3.2. </a><a href="#name-modifications-allowing-subs" class="section-name selfRef">Modifications allowing subscription-modified notification</a>
            </h5>
<p id="section-9.1.3.2-1">If changes to a subscription only include changes to the following parameters then they <span class="bcp14">SHOULD</span> be handled via a <em>subscription-modified</em> notification, but <span class="bcp14">MAY</span> be handled as described above. This applies for changes to:<a href="#section-9.1.3.2-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-9.1.3.2-2">
<li id="section-9.1.3.2-2.1">
                <p id="section-9.1.3.2-2.1.1">the subscription target <em>filter</em> (inline, referring to a different named filter, or changing the referenced filter).<a href="#section-9.1.3.2-2.1.1" class="pilcrow">¶</a></p>
</li>
              <li id="section-9.1.3.2-2.2">
                <p id="section-9.1.3.2-2.2.1">the YANG schema (<em>schema-id</em>) associated with subscription target filter,<a href="#section-9.1.3.2-2.2.1" class="pilcrow">¶</a></p>
</li>
              <li id="section-9.1.3.2-2.3">
                <p id="section-9.1.3.2-2.3.1">the <em>update-trigger</em>, unless <em>sync-on-start</em> is enabled.<a href="#section-9.1.3.2-2.3.1" class="pilcrow">¶</a></p>
</li>
              <li id="section-9.1.3.2-2.4">
                <p id="section-9.1.3.2-2.4.1">the <em>description</em> field,<a href="#section-9.1.3.2-2.4.1" class="pilcrow">¶</a></p>
</li>
              <li id="section-9.1.3.2-2.5">
                <p id="section-9.1.3.2-2.5.1">any other fields that are included in a <em>subscription-started</em> notification message, unless the definition of those fields explicitly specifies different
behavior.<a href="#section-9.1.3.2-2.5.1" class="pilcrow">¶</a></p>
</li>
            </ol>
</section>
</div>
<div id="modifications-requiring-no-lifecycle-notification">
<section id="section-9.1.3.3">
            <h5 id="name-modifications-requiring-no-">
<a href="#section-9.1.3.3" class="section-number selfRef">9.1.3.3. </a><a href="#name-modifications-requiring-no-" class="section-name selfRef">Modifications requiring no lifecycle notification</a>
            </h5>
<p id="section-9.1.3.3-1">Changes to any of the following subscription parameters do not need to be notified to the client:<a href="#section-9.1.3.3-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-9.1.3.3-2">
<li id="section-9.1.3.3-2.1">
                <p id="section-9.1.3.3-2.1.1"><em>dscp</em> settings.<a href="#section-9.1.3.3-2.1.1" class="pilcrow">¶</a></p>
</li>
              <li id="section-9.1.3.3-2.2">
                <p id="section-9.1.3.3-2.2.1"><em>source-address</em>, <em>source-interface</em>, <em>source-vrf</em>, or the source port.<a href="#section-9.1.3.3-2.2.1" class="pilcrow">¶</a></p>
</li>
              <li id="section-9.1.3.3-2.3">
                <p id="section-9.1.3.3-2.3.1">any other settings not reported in the <em>subscription-started</em> notification message.<a href="#section-9.1.3.3-2.3.1" class="pilcrow">¶</a></p>
</li>
            </ol>
</section>
</div>
</section>
</div>
<div id="TerminatingSubscriptions">
<section id="section-9.1.4">
          <h4 id="name-terminating-subscriptions">
<a href="#section-9.1.4" class="section-number selfRef">9.1.4. </a><a href="#name-terminating-subscriptions" class="section-name selfRef">Terminating Subscriptions</a>
          </h4>
<p id="section-9.1.4-1">Subscriptions <span class="bcp14">MUST</span> be terminated by the publisher due to any of the following circumstances:<a href="#section-9.1.4-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-9.1.4-2">
<li id="section-9.1.4-2.1">
              <p id="section-9.1.4-2.1.1">The subscription has been unconfigured.<a href="#section-9.1.4-2.1.1" class="pilcrow">¶</a></p>
</li>
            <li id="section-9.1.4-2.2">
              <p id="section-9.1.4-2.2.1">Some subscription, receiver, transport or encoding configuration has been removed, e.g., receiver configuration, such that there is no longer the sufficient minimum information to maintain the subscription.<a href="#section-9.1.4-2.2.1" class="pilcrow">¶</a></p>
</li>
            <li id="section-9.1.4-2.3">
              <p id="section-9.1.4-2.3.1">A dynamic subscription has been terminated via a <em>delete-subscription</em> or <em>kill-subscription</em> YANG RPC.<a href="#section-9.1.4-2.3.1" class="pilcrow">¶</a></p>
</li>
            <li id="section-9.1.4-2.4">
              <p id="section-9.1.4-2.4.1">Transport connectivity to the receivers have been lost, either due to network issues, or a failure in the security session state.<a href="#section-9.1.4-2.4.1" class="pilcrow">¶</a></p>
</li>
            <li id="section-9.1.4-2.5">
              <p id="section-9.1.4-2.5.1">The publisher does not have sufficient resources to honor the terms of the subscription, i.e., it is generating too many <em>update</em> notifications, or attempting to send too much data.<a href="#section-9.1.4-2.5.1" class="pilcrow">¶</a></p>
</li>
            <li id="section-9.1.4-2.6">
              <p id="section-9.1.4-2.6.1">The subscription parameters have changed in such a way, i.e., as defined in <a href="#ChangesNeedingTermination" class="auto internal xref">Section 9.1.3.1</a>, that needs the subscription to be reset by terminating and recreating it.<a href="#section-9.1.4-2.6.1" class="pilcrow">¶</a></p>
</li>
            <li id="section-9.1.4-2.7">
              <p id="section-9.1.4-2.7.1">The <em>reset</em> RPC is invoked on a configured subscription, or on the referenced receiver associated with a configured subscription.<a href="#section-9.1.4-2.7.1" class="pilcrow">¶</a></p>
</li>
          </ol>
<p id="section-9.1.4-3">In addition, from a receiver's perspective, if transport connectivity is lost, then that is equivalent to terminating the subscription via a <em>subscription-terminated</em> notification.<a href="#section-9.1.4-3" class="pilcrow">¶</a></p>
<p id="section-9.1.4-4">If possible, the publisher <span class="bcp14">MUST</span> try and close the subscription gracefully by generating a <em>subscription-terminated</em> notification to all receivers before closing any sessions to any receivers that have no remaining subscriptions.  Publishers <span class="bcp14">MAY</span> complete their current collection if one is in progress before generating the <em>subscription-terminated</em> notification.  Obviously, if transport connectivity to a receiver has been lost then neither of these two actions will be possible.<a href="#section-9.1.4-4" class="pilcrow">¶</a></p>
<p id="section-9.1.4-5">The publisher <span class="bcp14">MUST NOT</span> generate any further events, e.g., <em>update</em> notifications, related to the subscription after the <em>subscription-terminated</em> notification has been generated.  In addition, receivers <span class="bcp14">SHOULD</span> ignore any messages received outside of an active subscription, i.e., either before a <em>subscription-started</em> notification or after a <em>subscription-terminated</em> notification.<a href="#section-9.1.4-5" class="pilcrow">¶</a></p>
<p id="section-9.1.4-6">If the publisher accepts the request, which it <span class="bcp14">MUST</span>, if the subscription-id matches a dynamic subscription established in the same transport session, then it should stop the subscription and send a <em>subscription-terminated</em> notification.<a href="#section-9.1.4-6" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="LifecycleNotifications">
<section id="section-9.2">
        <h3 id="name-subscription-lifecycle-noti">
<a href="#section-9.2" class="section-number selfRef">9.2. </a><a href="#name-subscription-lifecycle-noti" class="section-name selfRef">Subscription Lifecycle Notifications</a>
        </h3>
<p id="section-9.2-1">In addition to sending event records to receivers, a publisher also sends subscription lifecycle state change notifications when lifecycle events related to subscription management occur.<a href="#section-9.2-1" class="pilcrow">¶</a></p>
<p id="section-9.2-2">Subscription state change notifications are generated per subscription, and are injected into the steam of <em>update</em> messages for that that subscription.  These notifications <span class="bcp14">MUST NOT</span> be dropped or filtered.<a href="#section-9.2-2" class="pilcrow">¶</a></p>
<p id="section-9.2-3">Future extensions, or implementations <span class="bcp14">MAY</span> augment additional fields into the notification structures.  Receivers <span class="bcp14">MUST</span> silently ignore unexpected fields.<a href="#section-9.2-3" class="pilcrow">¶</a></p>
<p id="section-9.2-4">The complete set of subscription state change notifications is described in the following subsections:<a href="#section-9.2-4" class="pilcrow">¶</a></p>
<div id="SubscriptionStartedNotification">
<section id="section-9.2.1">
          <h4 id="name-subscription-started">
<a href="#section-9.2.1" class="section-number selfRef">9.2.1. </a><a href="#name-subscription-started" class="section-name selfRef">"subscription-started"</a>
          </h4>
<p id="section-9.2.1-1">The subscription started notification is sent to a receiver to indicate that a subscription is active and they may start to receive <em>update</em> records from the publisher.<a href="#section-9.2.1-1" class="pilcrow">¶</a></p>
<p id="section-9.2.1-2">The <em>subscription-started</em> notification is sent for any of these reasons:<a href="#section-9.2.1-2" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-9.2.1-3">
<li id="section-9.2.1-3.1">
              <p id="section-9.2.1-3.1.1">A new subscription (configured or dynamic) has been started.<a href="#section-9.2.1-3.1.1" class="pilcrow">¶</a></p>
</li>
            <li id="section-9.2.1-3.2">
              <p id="section-9.2.1-3.2.1">The properties of a subscription has been changed, i.e., as specified in <a href="#ChangesNeedingTermination" class="auto internal xref">Section 9.1.3.1</a>, that requires a <em>subscription-terminated</em> notification to be sent followed by a <em>subscription-started</em> notification, presuming that the new subscription parameters are valid.<a href="#section-9.2.1-3.2.1" class="pilcrow">¶</a></p>
</li>
            <li id="section-9.2.1-3.3">
              <p id="section-9.2.1-3.3.1">A configured subscription previously failed, and was terminated.  After the publisher has successfully re-established a connection to the receiver and is ready to send datastore event records again.<a href="#section-9.2.1-3.3.1" class="pilcrow">¶</a></p>
</li>
          </ol>
<p id="section-9.2.1-4">Below is the tree diagram for the <em>subscription-started</em> notification.  All data nodes contained in this tree diagram are described in the YANG module in <a href="#yang-push-2-yang-module" class="auto internal xref">Section 12.2</a>.<a href="#section-9.2.1-4" class="pilcrow">¶</a></p>
<span id="name-subscription-started-notifi"></span><figure id="figure-10">
            <div class="lang-yangtree sourcecode" id="section-9.2.1-5.1">
<pre>
    +---n subscription-started
    |  +--ro id                subscription-id
    |  +--ro description?      string
    |  +--ro target
    |  |  +--ro datastore?                 identityref
    |  |  +--ro (filter)
    |  |  |  +--:(path)
    |  |  |  |  +--ro path                 ypath
    |  |  |  +--:(subtree)
    |  |  |  |  +--ro subtree              &lt;anydata&gt;
    |  |  |  +--:(xpath)
    |  |  |     +--ro xpath                yang:xpath1.0 {yp2:xpath}?
    |  |  +--ro schema-id?                 string
    |  |  +--ro yang-library-content-id?
    |  |          -&gt; /yanglib:yang-library/content-id
    |  +--ro update-trigger
    |     +--ro periodic!
    |     |  +--ro period         centiseconds
    |     |  +--ro anchor-time?   yang:date-and-time
    |     +--ro on-change! {on-change}?
    |        +--ro sync-on-start?   boolean
</pre>
</div>
<figcaption><a href="#figure-10" class="selfRef">Figure 10</a>:
<a href="#name-subscription-started-notifi" class="selfRef">subscription-started Notification Tree Diagram</a>
            </figcaption></figure>
</section>
</div>
<div id="SubscriptionModifiedNotification">
<section id="section-9.2.2">
          <h4 id="name-subscription-modified">
<a href="#section-9.2.2" class="section-number selfRef">9.2.2. </a><a href="#name-subscription-modified" class="section-name selfRef">"subscription-modified"</a>
          </h4>
<p id="section-9.2.2-1">The <em>subscription-modified</em> notification is sent to a receiver to indicate that some parameters associated with an active subscription have changed, as per <a href="#ChangesNeedingModifiedNotif" class="auto internal xref">Section 9.1.3.2</a>.<a href="#section-9.2.2-1" class="pilcrow">¶</a></p>
<p id="section-9.2.2-2">Below is the tree diagram for the <em>subscription-modified</em> notification.  Other than the notification name, the parameters for a <em>subscription-modified</em> notification are the same as for the <em>subscription-started</em> notification. <strong>TODO should reason also be in subscription-started?</strong>.  Robust receivers are expected to handle <em>subscription-started</em> and <em>subscription-modified</em> notifications equivalently.<a href="#section-9.2.2-2" class="pilcrow">¶</a></p>
<p id="section-9.2.2-3">All data nodes contained in this tree diagram are described in the YANG module in <a href="#yang-push-2-yang-module" class="auto internal xref">Section 12.2</a>.<a href="#section-9.2.2-3" class="pilcrow">¶</a></p>
<span id="name-subscription-modified-notif"></span><figure id="figure-11">
            <div class="lang-yangtree sourcecode" id="section-9.2.2-4.1">
<pre>
    +---n subscription-modified
    |  +--ro id                subscription-id
    |  +--ro description?      string
    |  +--ro target
    |  |  +--ro datastore?                 identityref
    |  |  +--ro (filter)
    |  |  |  +--:(path)
    |  |  |  |  +--ro path                 ypath
    |  |  |  +--:(subtree)
    |  |  |  |  +--ro subtree              &lt;anydata&gt;
    |  |  |  +--:(xpath)
    |  |  |     +--ro xpath                yang:xpath1.0 {yp2:xpath}?
    |  |  +--ro schema-id?                 string
    |  |  +--ro yang-library-content-id?
    |  |          -&gt; /yanglib:yang-library/content-id
    |  +--ro update-trigger
    |  |  +--ro periodic!
    |  |  |  +--ro period         centiseconds
    |  |  |  +--ro anchor-time?   yang:date-and-time
    |  |  +--ro on-change! {on-change}?
    |  |     +--ro sync-on-start?   boolean
    |  +--ro reason            subscription-change
</pre>
</div>
<figcaption><a href="#figure-11" class="selfRef">Figure 11</a>:
<a href="#name-subscription-modified-notif" class="selfRef">subscription-modified Notification Tree Diagram</a>
            </figcaption></figure>
</section>
</div>
<div id="SubscriptionTerminatedNotification">
<section id="section-9.2.3">
          <h4 id="name-subscription-terminated">
<a href="#section-9.2.3" class="section-number selfRef">9.2.3. </a><a href="#name-subscription-terminated" class="section-name selfRef">"subscription-terminated"</a>
          </h4>
<p id="section-9.2.3-1">For a receiver, this notification indicates that no further event records for an active subscription should be expected from the publisher unless and until a new <em>subscription-started</em> notification is received.<a href="#section-9.2.3-1" class="pilcrow">¶</a></p>
<p id="section-9.2.3-2">A <em>subscription-terminated</em> notification <span class="bcp14">SHOULD</span> only be sent by a publisher to a receiver if a <em>subscription-started</em> notification was previously sent.<a href="#section-9.2.3-2" class="pilcrow">¶</a></p>
<p id="section-9.2.3-3">The subscription terminated notification may be sent to a receiver for any of these reasons:<a href="#section-9.2.3-3" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-9.2.3-4">
<li id="section-9.2.3-4.1">
              <p id="section-9.2.3-4.1.1">A subscription has been stopped, either due to the change/removal of some configuration, or an RPC has been invoked to delete or kill a dynamic subscription.<a href="#section-9.2.3-4.1.1" class="pilcrow">¶</a></p>
</li>
            <li id="section-9.2.3-4.2">
              <p id="section-9.2.3-4.2.1">The properties of a subscription have been changed, i.e., as specified in <a href="#ChangesNeedingTermination" class="auto internal xref">Section 9.1.3.1</a>, that requires a <em>subscription-terminated</em> notification to be sent followed by a <em>subscription-started</em> notification, presuming that the new subscription parameters are valid.<a href="#section-9.2.3-4.2.1" class="pilcrow">¶</a></p>
</li>
            <li id="section-9.2.3-4.3">
              <p id="section-9.2.3-4.3.1">A subscription has failed for any reason, e.g.,:<a href="#section-9.2.3-4.3.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-9.2.3-4.3.2.1">
                  <p id="section-9.2.3-4.3.2.1.1">The publisher is no longer able to honor the subscription, due to resource constraints, or the filter is no longer valid.<a href="#section-9.2.3-4.3.2.1.1" class="pilcrow">¶</a></p>
</li>
                <li class="normal" id="section-9.2.3-4.3.2.2">
                  <p id="section-9.2.3-4.3.2.2.1">Any transport level buffer to the receiver has become full, and the hence the publisher is dropping <em>update</em> notifications.<a href="#section-9.2.3-4.3.2.2.1" class="pilcrow">¶</a></p>
</li>
              </ul>
</li>
          </ol>
<p id="section-9.2.3-5">Below is a tree diagram for "subscription-terminated".  All objects contained in this tree are described in the YANG module in <a href="#yang-push-2-yang-module" class="auto internal xref">Section 12.2</a>.<a href="#section-9.2.3-5" class="pilcrow">¶</a></p>
<span id="name-subscription-terminated-not"></span><figure id="figure-12">
            <div class="lang-yangtree sourcecode" id="section-9.2.3-6.1">
<pre>
    +---n subscription-terminated
    |  +--ro id        subscription-id
    |  +--ro reason    identityref
    +---n update
    |  +--ro id?                 subscription-id
    |  +--ro path-prefix?        string
    |  +--ro snapshot-type       enumeration
    |  +--ro observation-time?   yang:date-and-time
    |  +--ro updates* [target-path]
    |  |  +--ro target-path    string
    |  |  +--ro data?          &lt;anydata&gt;
    |  +--ro complete?           empty
    +---n update-complete
       +--ro id?   subscription-id
</pre>
</div>
<figcaption><a href="#figure-12" class="selfRef">Figure 12</a>:
<a href="#name-subscription-terminated-not" class="selfRef">subscription-terminated Notification Tree Diagram</a>
            </figcaption></figure>
<p id="section-9.2.3-7"><strong>TODO Augmenting extra fields is better for clients?</strong>  The <em>reason</em> data node identityref indicates why a subscription has been terminated, and could be extended with further reasons in future.  I suggest that we change this to an enum with an optional description field.**<a href="#section-9.2.3-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="update-completed">
<section id="section-9.2.4">
          <h4 id="name-update-completed">
<a href="#section-9.2.4" class="section-number selfRef">9.2.4. </a><a href="#name-update-completed" class="section-name selfRef">"update-completed"</a>
          </h4>
<p id="section-9.2.4-1"><strong>TODO, this description needs to be updated</strong>.<a href="#section-9.2.4-1" class="pilcrow">¶</a></p>
<p id="section-9.2.4-2">This notification indicates that all of the event records prior to the current time have been passed to a receiver.  It is sent before any notification messages containing an event record with a timestamp later than (1) the subscription's start time.<a href="#section-9.2.4-2" class="pilcrow">¶</a></p>
<p id="section-9.2.4-3">After the <em>update-complete</em> notification has been sent, additional event records will be sent in sequence as they arise naturally on the publisher.<a href="#section-9.2.4-3" class="pilcrow">¶</a></p>
<p id="section-9.2.4-4">Below is a tree diagram for <em>update-complete</em>.  All objects contained in this tree are described in the YANG module in Section 4.<a href="#section-9.2.4-4" class="pilcrow">¶</a></p>
<span id="name-update-complete-notificatio"></span><figure id="figure-13">
            <div class="lang-yangtree sourcecode" id="section-9.2.4-5.1">
<pre>
    +---n update-complete
       +--ro id?   subscription-id
</pre>
</div>
<figcaption><a href="#figure-13" class="selfRef">Figure 13</a>:
<a href="#name-update-complete-notificatio" class="selfRef">update-complete Notification Tree Diagram</a>
            </figcaption></figure>
</section>
</div>
</section>
</div>
<div id="configured-subscriptions">
<section id="section-9.3">
        <h3 id="name-configured-subscriptions">
<a href="#section-9.3" class="section-number selfRef">9.3. </a><a href="#name-configured-subscriptions" class="section-name selfRef">Configured Subscriptions</a>
        </h3>
<p id="section-9.3-1">Configured subscriptions allow the management of subscriptions via configuration so that a publisher can send notification messages to a receiver.<a href="#section-9.3-1" class="pilcrow">¶</a></p>
<p id="section-9.3-2">This document specifies the ietf-yang-push-2-config YANG module <a href="#yang-push-2-config-yang-module" class="auto internal xref">Section 13.2</a> that defines an configuration model for configuring subscriptions.  Support for this YANG module is <span class="bcp14">OPTIONAL</span> and is advertised using the normal YANG mechanisms, e.g., <span>[<a href="#RFC8525" class="cite xref">RFC8525</a>]</span>. <strong>TODO, do we also advertise support via capabilities, i.e., <a href="https://github.com/rgwilton/draft-yp-observability/issues/16">issue 16</a></strong><a href="#section-9.3-2" class="pilcrow">¶</a></p>
<p id="section-9.3-3">In addition to the common subscription parameters described in <a href="#CommonSubscriptionParameters" class="auto internal xref">Section 9.1</a>, a configured subscription also includes:<a href="#section-9.3-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-9.3-4.1">
            <p id="section-9.3-4.1.1">the receiver for the subscription, as described in <a href="#receivers" class="auto internal xref">Section 8.1</a>.  The referenced receiver specifies all transport, receiver, and encoding parameters.<a href="#section-9.3-4.1.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-9.3-5">Configured subscriptions have several characteristics distinguishing them from dynamic subscriptions, such as:<a href="#section-9.3-5" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-9.3-6.1">
            <p id="section-9.3-6.1.1">configured subscriptions are created, modified or deleted, by any configuration client with write permission on the subscription configuration.<a href="#section-9.3-6.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.3-6.2">
            <p id="section-9.3-6.2.1">The lifetime of a configured subscription is tied to the configuration.  I.e., if a valid and complete configuration exists for a subscription, then the publisher <span class="bcp14">MUST</span> attempt to connect to the receiver and honor the requirements of the subscription.  In particular:<a href="#section-9.3-6.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-9.3-6.2.2.1">
                <p id="section-9.3-6.2.2.1.1">If the configuration is altered or removed then the subscription will similarly be altered or removed.<a href="#section-9.3-6.2.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-9.3-6.2.2.2">
                <p id="section-9.3-6.2.2.2.1">If the device reboots, then the configured subscription will obviously end, but once the subscription configuration has been processed after boot up, then the subscription will be recreated again, assuming the subscription configuration is still valid.<a href="#section-9.3-6.2.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-9.3-6.2.2.3">
                <p id="section-9.3-6.2.2.3.1">If transport connectivity to the receiver is broken, then any subscriptions using that transport are terminated, but the publisher <span class="bcp14">MUST</span> periodically attempt to re-establish connection to the receiver and re-activate any configured subscriptions to that receiver.<a href="#section-9.3-6.2.2.3.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-9.3-6.2.2.4">
                <p id="section-9.3-6.2.2.4.1">Note, if there are no active subscriptions for a given receiver then any transport session(s) associated with that receiver <span class="bcp14">MUST</span> be closed, but that <span class="bcp14">MAY</span> be after a short delay.<a href="#section-9.3-6.2.2.4.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="normal" id="section-9.3-6.3">
            <p id="section-9.3-6.3.1">Other than the <em>reset</em> YANG Action, described in <a href="#reset" class="auto internal xref">Section 9.3.4</a>, there are no YANG RPCs to dynamically create, modify, or delete a configured subscription, any alterations <span class="bcp14">MUST</span> be done via changes to the configuration.<a href="#section-9.3-6.3.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<div id="creating-a-configured-subscription">
<section id="section-9.3.1">
          <h4 id="name-creating-a-configured-subsc">
<a href="#section-9.3.1" class="section-number selfRef">9.3.1. </a><a href="#name-creating-a-configured-subsc" class="section-name selfRef">Creating a Configured Subscription</a>
          </h4>
<p id="section-9.3.1-1">Configured subscriptions are those created via changes to the publisher's configuration, e.g., using the YANG module defined in <a href="#config-subs-data-model" class="auto internal xref">Section 13</a>, or an equivalent configuration mechanism, such as a command-line interface, or alternative YANG configuration model.<a href="#section-9.3.1-1" class="pilcrow">¶</a></p>
<p id="section-9.3.1-2">After the configuration change has been accepted by the system, then the subscription is updated, as per <a href="#CreatingSubscriptions" class="auto internal xref">Section 9.1.2</a>.<a href="#section-9.3.1-2" class="pilcrow">¶</a></p>
<p id="section-9.3.1-3"><strong>TODO, to see an example of subscription creation using configuration operations over NETCONF, see Appendix A.</strong><a href="#section-9.3.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="modifying-a-configured-subscription">
<section id="section-9.3.2">
          <h4 id="name-modifying-a-configured-subs">
<a href="#section-9.3.2" class="section-number selfRef">9.3.2. </a><a href="#name-modifying-a-configured-subs" class="section-name selfRef">Modifying a Configured Subscription</a>
          </h4>
<p id="section-9.3.2-1">Configured subscriptions can be modified due to configuration changes in the subscription configuration or referenced configuration, i.e., filters or receivers.  After the configuration change has been accepted by the system, then the subscription is updated, as per <a href="#ModifyingSubscriptions" class="auto internal xref">Section 9.1.3</a>.<a href="#section-9.3.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="deleting-a-configured-subscription">
<section id="section-9.3.3">
          <h4 id="name-deleting-a-configured-subsc">
<a href="#section-9.3.3" class="section-number selfRef">9.3.3. </a><a href="#name-deleting-a-configured-subsc" class="section-name selfRef">Deleting a Configured Subscription</a>
          </h4>
<p id="section-9.3.3-1">Configured subscriptions can be deleted via configuration.  After the configuration change has been accepted by the system the subscription is terminated, as per <a href="#TerminatingSubscriptions" class="auto internal xref">Section 9.1.4</a>.<a href="#section-9.3.3-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="reset">
<section id="section-9.3.4">
          <h4 id="name-resetting-a-configured-subs">
<a href="#section-9.3.4" class="section-number selfRef">9.3.4. </a><a href="#name-resetting-a-configured-subs" class="section-name selfRef">Resetting a Configured Subscription</a>
          </h4>
<p id="section-9.3.4-1">Configured subscriptions are generally expected to self-monitor and automatically reconnect to the receiver if they experience network or transport issues.  However, the data model also defines explicit YANG <em>actions</em> to either: (i) reset a single subscription, or (ii) reset all subscriptions and the transports(s) associated with a specific configured receiver instance.<a href="#section-9.3.4-1" class="pilcrow">¶</a></p>
<p id="section-9.3.4-2">These reset actions primarily act at the subscription application layer, but may be useful if a receiver or collector determines that a configured subscription is not behaving correctly, and wishes to force a reset of the subscription without modifying the configuration associated with the subscription or forcing a configuration change on the publisher device.<a href="#section-9.3.4-2" class="pilcrow">¶</a></p>
<p id="section-9.3.4-3">The reset action on a subscription is handled equivalently to removing and re-adding the subscription configuration.  I.e., the subscription <span class="bcp14">MUST</span> be terminated, as per <a href="#TerminatingSubscriptions" class="auto internal xref">Section 9.1.4</a> before being recreated, as per <a href="#CreatingSubscriptions" class="auto internal xref">Section 9.1.2</a>.  The reset action also resets (terminated and re-establishes) any subscription specific transport session that is not shared with any other subscriptions.  Any counters associated with the subscription are also re-initialized in a manner that is consistent with a client unconfiguring and then reconfiguring the subscription.<a href="#section-9.3.4-3" class="pilcrow">¶</a></p>
<p id="section-9.3.4-4">The reset action on a receiver is handled equivalently to removing and re-adding the receiver configuration for the receiver that has been reset.  Specifically, every subscription referencing the receiver <span class="bcp14">MUST</span> be terminated, as per <a href="#TerminatingSubscriptions" class="auto internal xref">Section 9.1.4</a> before being recreated, as per <a href="#CreatingSubscriptions" class="auto internal xref">Section 9.1.2</a>.  Any transport sessions tied to the subscriptions referencing the reset receiver <span class="bcp14">MUST</span> also be terminated and re-established.  Any counters associated with the receiver are also re-initialized in a manner that is consistent with a client unconfiguring and then reconfiguring the receiver configuration.<a href="#section-9.3.4-4" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="DynamicSubscriptions">
<section id="section-9.4">
        <h3 id="name-dynamic-subscriptions">
<a href="#section-9.4" class="section-number selfRef">9.4. </a><a href="#name-dynamic-subscriptions" class="section-name selfRef">Dynamic Subscriptions</a>
        </h3>
<p id="section-9.4-1">Dynamic subscriptions are where a subscriber initiates a subscription negotiation with a publisher via a YANG RPC <span>[<a href="#RFC7950" class="cite xref">RFC7950</a>]</span>.<a href="#section-9.4-1" class="pilcrow">¶</a></p>
<p id="section-9.4-2">Support for dynamic subscriptions is <span class="bcp14">OPTIONAL</span>, with its availability advertised via the <em>dynamic</em> YANG feature in the ietf-yang-push-2 YANG module <a href="#yang-push-2-yang-module" class="auto internal xref">Section 12.2</a>, and also via the capabilities module <a href="#yang-push-2-yang-capabilities-module" class="auto internal xref">Section 14.2</a>.<a href="#section-9.4-2" class="pilcrow">¶</a></p>
<p id="section-9.4-3">Dynamic subscription differ from configured subscription in the following ways:<a href="#section-9.4-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-9.4-4.1">
            <p id="section-9.4-4.1.1">Dynamic subscription reuse the same transport session on which the <em>establish-subscription</em> RPC was received to send back any notifications, and so the transport and receiver do not need to be specified and each dynamic subscription can always only have a single receiver.<a href="#section-9.4-4.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.4-4.2">
            <p id="section-9.4-4.2.1">The publisher <span class="bcp14">MUST</span> reply to the <em>establish-subscription</em> RPC before sending the <em>subscription-started</em> or any <em>update</em> notifications for this subscription.<a href="#section-9.4-4.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.4-4.3">
            <p id="section-9.4-4.3.1">The lifetime of a dynamic subscription is bound by the transport session used to establish it.  If the transport session fails then the dynamic subscription <span class="bcp14">MUST</span> be terminated.<a href="#section-9.4-4.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.4-4.4">
            <p id="section-9.4-4.4.1">Dynamic subscriptions can either be terminated by the client that established the subscription sending a <em>delete-subscription</em> YANG RPC on the same transport session, or any client with sufficient access permissions invoking the <em>kill-subscription</em> YANG RPC.<a href="#section-9.4-4.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.4-4.5">
            <p id="section-9.4-4.5.1">A publisher <span class="bcp14">MAY</span> terminate a dynamic subscription at any time, i.e., due to internal constraints of the publisher.<a href="#section-9.4-4.5.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.4-4.6">
            <p id="section-9.4-4.6.1">If a dynamic subscription is terminated for any reason, then the client is responsible for re-establishing the subscription if it is still required.<a href="#section-9.4-4.6.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-9.4-4.7">
            <p id="section-9.4-4.7.1">If the publisher cannot honor the terms of a dynamic subscription then the subscription <span class="bcp14">MUST</span> be terminated. <strong>TODO, is this a <span class="bcp14">SHOULD</span> or <span class="bcp14">MUST</span>, do we want some leeway for temporary issues? E.g., allow some buffering. Also, this effectively applies to config subscriptions as well and hence should move.</strong><a href="#section-9.4-4.7.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<div id="EstablishDynamic">
<section id="section-9.4.1">
          <h4 id="name-establishing-a-dynamic-subs">
<a href="#section-9.4.1" class="section-number selfRef">9.4.1. </a><a href="#name-establishing-a-dynamic-subs" class="section-name selfRef">Establishing a Dynamic Subscription</a>
          </h4>
<p id="section-9.4.1-1">The <em>establish-subscription</em> RPC allows a subscriber to request the creation of a subscription.<a href="#section-9.4.1-1" class="pilcrow">¶</a></p>
<p id="section-9.4.1-2">In addition to the common subscription parameters described in <a href="#CommonSubscriptionParameters" class="auto internal xref">Section 9.1</a>, the <em>establish-subscription</em> YANG RPC:<a href="#section-9.4.1-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-9.4.1-3.1">
              <p id="section-9.4.1-3.1.1">includes the <em>encoding</em> to be used for all YANG Push v2 notifications<a href="#section-9.4.1-3.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-9.4.1-3.2">
              <p id="section-9.4.1-3.2.1">optionally includes DSCP settings to use for the transport.<a href="#section-9.4.1-3.2.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-9.4.1-3.3">
              <p id="section-9.4.1-3.3.1">a dynamic subscription may reference a configured target <em>filter</em>.  If the configuration for the referenced filter changes then the subscription <span class="bcp14">MUST</span> be terminated <a href="#TerminatingSubscriptions" class="auto internal xref">Section 9.1.4</a>.<a href="#section-9.4.1-3.3.1" class="pilcrow">¶</a></p>
</li>
          </ul>
<p id="section-9.4.1-4">The DSCP code point settings for all subscription using the same transport session <span class="bcp14">MUST</span> be the same.  Attempts to invoke <em>establish-subscription</em> with a different DSCP code point <span class="bcp14">MUST</span> be rejected.<a href="#section-9.4.1-4" class="pilcrow">¶</a></p>
<p id="section-9.4.1-5">If the publisher can satisfy the <em>establish-subscription</em> request, it replies with a numeric identifier for the subscription and then immediately starts streaming notification messages.<a href="#section-9.4.1-5" class="pilcrow">¶</a></p>
<p id="section-9.4.1-6">A dynamic subscription request <span class="bcp14">MUST</span> be declined if a publisher determines that it may be unable to provide update records meeting the terms of an <em>establish-subscription</em> RPC request.<a href="#section-9.4.1-6" class="pilcrow">¶</a></p>
<p id="section-9.4.1-7">Below is a tree diagram for <em>establish-subscription</em> YANG RPC.  All objects contained in this tree are described in the YANG module in <a href="#yang-push-2-yang-module" class="auto internal xref">Section 12.2</a>.<a href="#section-9.4.1-7" class="pilcrow">¶</a></p>
<span id="name-establish-subscription-yang"></span><div id="EstablishSubscriptionYangTree">
<figure id="figure-14">
            <div class="lang-yangtree sourcecode" id="section-9.4.1-8.1">
<pre>
    +---x establish-subscription {dynamic}?
    |  +---w input
    |  |  +---w id?               restricted-subscription-id
    |  |  +---w description?      string
    |  |  +---w target
    |  |  |  +---w datastore?       identityref
    |  |  |  +---w (filter)
    |  |  |     +--:(path)
    |  |  |     |  +---w path       ypath
    |  |  |     +--:(subtree)
    |  |  |     |  +---w subtree    &lt;anydata&gt;
    |  |  |     +--:(xpath)
    |  |  |        +---w xpath      yang:xpath1.0 {yp2:xpath}?
    |  |  +---w update-trigger
    |  |  |  +---w periodic!
    |  |  |  |  +---w period         centiseconds
    |  |  |  |  +---w anchor-time?   yang:date-and-time
    |  |  |  +---w on-change! {on-change}?
    |  |  |     +---w sync-on-start?   boolean
    |  |  +---w encoding          encoding
    |  |  +---w dscp?             inet:dscp
    |  +--ro output
    |     +--ro id    subscription-id
</pre>
</div>
<figcaption><a href="#figure-14" class="selfRef">Figure 14</a>:
<a href="#name-establish-subscription-yang" class="selfRef">establish-subscription YANG RPC</a>
            </figcaption></figure>
</div>
<p id="section-9.4.1-9">A publisher <span class="bcp14">MAY</span> reject the "establish-subscription" RPC for many reasons, as described in <strong>TODO</strong> (Section 2.4.6)?<a href="#section-9.4.1-9" class="pilcrow">¶</a></p>
</section>
</div>
<div id="ModifyDynamic">
<section id="section-9.4.2">
          <h4 id="name-modifying-a-dynamic-subscri">
<a href="#section-9.4.2" class="section-number selfRef">9.4.2. </a><a href="#name-modifying-a-dynamic-subscri" class="section-name selfRef">Modifying a Dynamic Subscription</a>
          </h4>
<p id="section-9.4.2-1">The <em>modify-subscription</em> RPC allows a subscriber to request the modification of parameters associated with a dynamic subscription. It uses the same parameters as the <em>establish-subscription</em> RPC defined in <a href="#EstablishDynamic" class="auto internal xref">Section 9.4.1</a>, except that the <em>id</em> leaf is mandatory.<a href="#section-9.4.2-1" class="pilcrow">¶</a></p>
<p id="section-9.4.2-2">If the modification to the subscription is accepted by the publisher then it is processed as per <a href="#ModifyingSubscriptions" class="auto internal xref">Section 9.1.3</a>, otherwise an error is returned to the <em>modify-subscription</em> RPC and the subscription is left unmodified.<a href="#section-9.4.2-2" class="pilcrow">¶</a></p>
<p id="section-9.4.2-3">The publisher <span class="bcp14">MUST</span> reply to the <em>modify-subscription</em> RPC before sending any subscription lifecycle notifications, i.e., a pair of <em>subscription-terminated</em>/<em>subscription-started</em> notifications, or a<em>subscription-modified</em> notification.<a href="#section-9.4.2-3" class="pilcrow">¶</a></p>
<p id="section-9.4.2-4">Below is a tree diagram for the <em>modify-subscription</em> YANG RPC.  All objects contained in this tree are described in the YANG module in <a href="#yang-push-2-yang-module" class="auto internal xref">Section 12.2</a>.<a href="#section-9.4.2-4" class="pilcrow">¶</a></p>
<span id="name-modify-subscription-yang-rp"></span><div id="ModifySubscriptionYangTree">
<figure id="figure-15">
            <div class="lang-yangtree sourcecode" id="section-9.4.2-5.1">
<pre>
    +---x modify-subscription {dynamic}?
    |  +---w input
    |     +---w id                subscription-id
    |     +---w description?      string
    |     +---w target
    |     |  +---w datastore?       identityref
    |     |  +---w (filter)
    |     |     +--:(path)
    |     |     |  +---w path       ypath
    |     |     +--:(subtree)
    |     |     |  +---w subtree    &lt;anydata&gt;
    |     |     +--:(xpath)
    |     |        +---w xpath      yang:xpath1.0 {yp2:xpath}?
    |     +---w update-trigger
    |     |  +---w periodic!
    |     |  |  +---w period         centiseconds
    |     |  |  +---w anchor-time?   yang:date-and-time
    |     |  +---w on-change! {on-change}?
    |     |     +---w sync-on-start?   boolean
    |     +---w dscp?             inet:dscp
</pre>
</div>
<figcaption><a href="#figure-15" class="selfRef">Figure 15</a>:
<a href="#name-modify-subscription-yang-rp" class="selfRef">modify-subscription YANG RPC</a>
            </figcaption></figure>
</div>
<p id="section-9.4.2-6">A publisher <span class="bcp14">MAY</span> reject the "modify-subscription" RPC for various reasons, as described in <strong>TODO</strong>.<a href="#section-9.4.2-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="deleting-a-dynamic-subscription">
<section id="section-9.4.3">
          <h4 id="name-deleting-a-dynamic-subscrip">
<a href="#section-9.4.3" class="section-number selfRef">9.4.3. </a><a href="#name-deleting-a-dynamic-subscrip" class="section-name selfRef">Deleting a Dynamic Subscription</a>
          </h4>
<p id="section-9.4.3-1">The <em>delete-subscription</em> operation permits canceling an existing dynamic subscription that was established on the same transport session connecting to the subscriber.<a href="#section-9.4.3-1" class="pilcrow">¶</a></p>
<p id="section-9.4.3-2">The publisher responds to the request in the following way:<a href="#section-9.4.3-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-9.4.3-3.1">
              <p id="section-9.4.3-3.1.1">If the identifier matches a <em>dynamic</em> subscription created on the same transport session then it <span class="bcp14">MUST</span> terminate the subscription, as per <a href="#TerminatingSubscriptions" class="auto internal xref">Section 9.1.4</a>.<a href="#section-9.4.3-3.1.1" class="pilcrow">¶</a></p>
<p id="section-9.4.3-3.1.2">
The publisher <span class="bcp14">MAY</span> reply back to the client before the subscription has been terminated, i.e., it may act asynchronously with respect to the delete request, however, the publisher <span class="bcp14">MUST</span> allow the client to create a new subscription using the same subscription id immediately after either the RPC operation completes or the <em>subscription-terminated</em> notification (<a href="#SubscriptionTerminatedNotification" class="auto internal xref">Section 9.2.3</a>) has been transmitted.<a href="#section-9.4.3-3.1.2" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-9.4.3-3.2">
              <p id="section-9.4.3-3.2.1">Otherwise, the request is failed with an "unknown subscription" error message.<a href="#section-9.4.3-3.2.1" class="pilcrow">¶</a></p>
</li>
          </ul>
<p id="section-9.4.3-4">Below is the tree diagram for the <em>delete-subscription</em> RPC.  All objects contained in this tree are described in the YANG module in <a href="#yang-push-2-yang-module" class="auto internal xref">Section 12.2</a>.<a href="#section-9.4.3-4" class="pilcrow">¶</a></p>
<span id="name-delete-subscription-yang-rp"></span><div id="DeleteSubscriptionYangTree">
<figure id="figure-16">
            <div class="lang-yangtree sourcecode" id="section-9.4.3-5.1">
<pre>
    +---x delete-subscription {dynamic}?
    |  +---w input
    |     +---w id    subscription-id
</pre>
</div>
<figcaption><a href="#figure-16" class="selfRef">Figure 16</a>:
<a href="#name-delete-subscription-yang-rp" class="selfRef">delete-subscription YANG RPC</a>
            </figcaption></figure>
</div>
</section>
</div>
<div id="killing-a-dynamic-subscription">
<section id="section-9.4.4">
          <h4 id="name-killing-a-dynamic-subscript">
<a href="#section-9.4.4" class="section-number selfRef">9.4.4. </a><a href="#name-killing-a-dynamic-subscript" class="section-name selfRef">Killing a Dynamic Subscription</a>
          </h4>
<p id="section-9.4.4-1">The <em>kill-subscription</em> RPC operation permits a client, that has the required access permissions, to forcibly terminate any arbitrary dynamic subscription, identified by subscription id, including those not associated with the transport session used for the <em>kill-subscription</em> RPC.  The subscription is terminated as per <a href="#TerminatingSubscriptions" class="auto internal xref">Section 9.1.4</a>.<a href="#section-9.4.4-1" class="pilcrow">¶</a></p>
<p id="section-9.4.4-2">The publisher <span class="bcp14">MAY</span> reply back to the client before the subscription has been terminated, i.e., it may act asynchronously with respect to the delete request, however, the publisher <span class="bcp14">MUST</span> allow the client to create a new subscription using the same subscription id immediately after the <em>subscription-terminated</em> notification (<a href="#SubscriptionTerminatedNotification" class="auto internal xref">Section 9.2.3</a>) has been transmitted.<a href="#section-9.4.4-2" class="pilcrow">¶</a></p>
<p id="section-9.4.4-3">Below is the tree diagram for the <em>kill-subscription</em> RPC.  All objects contained in this tree are described in the YANG module in <a href="#yang-push-2-yang-module" class="auto internal xref">Section 12.2</a>.<a href="#section-9.4.4-3" class="pilcrow">¶</a></p>
<span id="name-kill-subscription-yang-rpc"></span><div id="KillSubscriptionYangTree">
<figure id="figure-17">
            <div class="lang-yangtree sourcecode" id="section-9.4.4-4.1">
<pre>
    +---x kill-subscription {dynamic}?
       +---w input
          +---w id    subscription-id
</pre>
</div>
<figcaption><a href="#figure-17" class="selfRef">Figure 17</a>:
<a href="#name-kill-subscription-yang-rpc" class="selfRef">kill-subscription YANG RPC</a>
            </figcaption></figure>
</div>
</section>
</div>
<div id="rpc-failures">
<section id="section-9.4.5">
          <h4 id="name-rpc-failures">
<a href="#section-9.4.5" class="section-number selfRef">9.4.5. </a><a href="#name-rpc-failures" class="section-name selfRef">RPC Failures</a>
          </h4>
<p id="section-9.4.5-1"><strong>TODO, we should see if we can simplify how errors are reported.</strong><a href="#section-9.4.5-1" class="pilcrow">¶</a></p>
<p id="section-9.4.5-2">Whenever an RPC is unsuccessful, the publisher returns relevant
information as part of the RPC error response.  Transport-level error
processing <span class="bcp14">MUST</span> be done before the RPC error processing described in
this section.  In all cases, RPC error information returned by the
publisher will use existing transport-layer RPC structures, such as
those seen with NETCONF (Appendix A of <span>[<a href="#RFC6241" class="cite xref">RFC6241</a>]</span>) or RESTCONF
(Section 7.1 of <span>[<a href="#RFC8040" class="cite xref">RFC8040</a>]</span>).  These structures <span class="bcp14">MUST</span> be able to encode
subscription-specific errors identified below and defined in this
document's YANG data model.<a href="#section-9.4.5-2" class="pilcrow">¶</a></p>
<p id="section-9.4.5-3">As a result of this variety, how subscription errors are encoded in
an RPC error response is transport dependent.  Valid errors that can
occur for each RPC are as follows:<a href="#section-9.4.5-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-9.4.5-4">
<pre>
  establish-subscription         modify-subscription
  ----------------------         ----------------------
  dscp-unavailable               filter-unsupported
  encoding-unsupported           insufficient-resources
  filter-unsupported             no-such-subscription
  insufficient-resources

  delete-subscription            kill-subscription
  ----------------------         ----------------------
  no-such-subscription           no-such-subscription
</pre><a href="#section-9.4.5-4" class="pilcrow">¶</a>
</div>
<p id="section-9.4.5-5">To see a NETCONF-based example of an error response from the list
above, see the "no-such-subscription" error response illustrated in
<span>[<a href="#RFC8640" class="cite xref">RFC8640</a>]</span>, Figure 10.<a href="#section-9.4.5-5" class="pilcrow">¶</a></p>
<p id="section-9.4.5-6">There is one final set of transport-independent RPC error elements
included in the YANG data model defined in this document: three
yang-data structures that enable the publisher to provide to the
receiver any error information that does not fit into existing
transport-layer RPC structures.  These structures are:<a href="#section-9.4.5-6" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-9.4.5-7">
<li id="section-9.4.5-7.1">
              <p id="section-9.4.5-7.1.1">"establish-subscription-stream-error-info": This <span class="bcp14">MUST</span> be returned
 with the leaf "reason" populated if an RPC error reason has not
 been placed elsewhere in the transport portion of a failed
 "establish-subscription" RPC response.  This <span class="bcp14">MUST</span> be sent if
 hints on how to overcome the RPC error are included.<a href="#section-9.4.5-7.1.1" class="pilcrow">¶</a></p>
</li>
            <li id="section-9.4.5-7.2">
              <p id="section-9.4.5-7.2.1">"modify-subscription-stream-error-info": This <span class="bcp14">MUST</span> be returned
 with the leaf "reason" populated if an RPC error reason has not
 been placed elsewhere in the transport portion of a failed
 "modify-subscription" RPC response.  This <span class="bcp14">MUST</span> be sent if hints
 on how to overcome the RPC error are included.<a href="#section-9.4.5-7.2.1" class="pilcrow">¶</a></p>
</li>
            <li id="section-9.4.5-7.3">
              <p id="section-9.4.5-7.3.1">"delete-subscription-error-info": This <span class="bcp14">MUST</span> be returned with the
 leaf "reason" populated if an RPC error reason has not been
 placed elsewhere in the transport portion of a failed
 "delete-subscription" or "kill-subscription" RPC response.<a href="#section-9.4.5-7.3.1" class="pilcrow">¶</a></p>
</li>
          </ol>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="robustness-reliability-and-subscription-monitoring">
<section id="section-10">
      <h2 id="name-robustness-reliability-and-">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-robustness-reliability-and-" class="section-name selfRef">Robustness, Reliability, and Subscription Monitoring</a>
      </h2>
<div id="robustness-and-reliability">
<section id="section-10.1">
        <h3 id="name-robustness-and-reliability">
<a href="#section-10.1" class="section-number selfRef">10.1. </a><a href="#name-robustness-and-reliability" class="section-name selfRef">Robustness and Reliability</a>
        </h3>
<p id="section-10.1-1">It is important for clients to have confidence that the telemetry data that they receive is correct and complete.  The design of YANG Push v2 achieves this in several ways:<a href="#section-10.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-10.1-2.1">
            <p id="section-10.1-2.1.1">the <em>complete</em> flag in <em>update</em> notification, or the equivalent <em>update-complete</em> notification, are used to signal when all data for a periodic collection event has been enqueued.  This allows clients to delete stale information and monitor the performance and behavior of the publisher.<a href="#section-10.1-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-10.1-2.2">
            <p id="section-10.1-2.2.1">publishers use buffers when enqueuing traffic on to a transport to a receiver, but if that buffer becomes full then either the subscription is terminated, or in the case of a configured subscription with multiple receivers the slow receiver is disconnected from the subscription.  In the case of dynamic subscriptions, the client may attempt to re-created the subscription.  For configured subscriptions, the publisher should attempt to periodically recreate the subscription or reconnect the receiver.<a href="#section-10.1-2.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-10.1-2.2.2.1">
                <p id="section-10.1-2.2.2.1.1"><strong>TODO, do we want to allow for a more lossy mode where the publisher just tail drops if the buffer is full?  If we do, then this looks like it should be a configurable option.</strong><a href="#section-10.1-2.2.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-10.1-2.2.2.2">
                <p id="section-10.1-2.2.2.2.1"><strong>TODO, ensure that we document how to reconnect to an new receiver</strong><a href="#section-10.1-2.2.2.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="normal" id="section-10.1-2.3">
            <p id="section-10.1-2.3.1">the <em>notification envelope</em> structure, <a href="#FullNotificationExample" class="auto internal xref">Section 7.1</a>, used for all YANG Push notifications contains a monotonically increasing <em>sequence-number</em> field that allows for lost messages in an end-to-end data pipeline spanning multiple transport hops to be detected, allowing appropriate mitigation steps to be taken.  For example, see figure 1 in <span>[<a href="#I-D.ietf-nmop-network-anomaly-architecture" class="cite xref">I-D.ietf-nmop-network-anomaly-architecture</a>]</span>.<a href="#section-10.1-2.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-10.1-2.4">
            <p id="section-10.1-2.4.1">the protocol relies on transport protocols that are either reliable, e.g., TCP or HTTP, or unreliable transports that employ mechanisms for clients to detect when losses at the transport layer have occurred, e.g., the <em>message id</em> in <span>[<a href="#I-D.draft-ietf-netconf-udp-notif" class="cite xref">I-D.draft-ietf-netconf-udp-notif</a>]</span> (<strong>TODO fix reference to bis version, once that becomes available</strong>).<a href="#section-10.1-2.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-10.1-2.5">
            <p id="section-10.1-2.5.1">finally, if a publisher is not able to honor the expectation for a subscription for any reason, then the publisher always has the option to terminate the subscription.  It can then subsequently refuse to handle new subscriptions if it does not have sufficient resources to handle the subscription.<a href="#section-10.1-2.5.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="subscription-monitoring">
<section id="section-10.2">
        <h3 id="name-subscription-monitoring">
<a href="#section-10.2" class="section-number selfRef">10.2. </a><a href="#name-subscription-monitoring" class="section-name selfRef">Subscription Monitoring</a>
        </h3>
<p id="section-10.2-1">In the operational state datastore, the <em>datastore-telemetry</em> container maintains operational state for all configured and dynamic subscriptions.<a href="#section-10.2-1" class="pilcrow">¶</a></p>
<p id="section-10.2-2">Both configured and dynamic subscriptions are represented in the list <em>ietf-yang-push-2-config:datastore-telemetry/subscriptions/subscription</em>.  Dynamic subscriptions are only present in the list when they are active, and are removed as soon as they are terminated.  Whereas, configured subscriptions are always present in the list when they are configured, regardless of whether they are active.<a href="#section-10.2-2" class="pilcrow">¶</a></p>
<p id="section-10.2-3"><strong>TODO, should dynamic receivers be listed?  Do we need to report per-receiver stats for dynamic subscriptions?</strong><a href="#section-10.2-3" class="pilcrow">¶</a></p>
<p id="section-10.2-4">The operational state is important for monitoring the health of subscriptions, receivers, and the overall telemetry subsystem.<a href="#section-10.2-4" class="pilcrow">¶</a></p>
<p id="section-10.2-5">This includes:<a href="#section-10.2-5" class="pilcrow">¶</a></p>
<p id="section-10.2-6"><strong>TODO, update the YANG model with more useful operational data, and mostly this section should briefly summarize and refer to the YANG model.  We should also consider what indications to include from filters that cause a larger amount of internal work but don't generate a large number of transmitted notifications.</strong><a href="#section-10.2-6" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-10.2-7.1">
            <p id="section-10.2-7.1.1">per subscription status and counters<a href="#section-10.2-7.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-10.2-7.2">
            <p id="section-10.2-7.2.1">per receiver status and counters<a href="#section-10.2-7.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-10.2-7.3">
            <p id="section-10.2-7.3.1">maybe some indication of the overall load on the telemetry subsystem, but we need to consider how useful that actually is, and whether just monitoring the device CPU load and general performance would be a better indication.<a href="#section-10.2-7.3.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="publisher-capacity">
<section id="section-10.3">
        <h3 id="name-publisher-capacity">
<a href="#section-10.3" class="section-number selfRef">10.3. </a><a href="#name-publisher-capacity" class="section-name selfRef">Publisher Capacity</a>
        </h3>
<p id="section-10.3-1">It is far preferable to decline a subscription request than to accept such a request when it cannot be met.<a href="#section-10.3-1" class="pilcrow">¶</a></p>
<p id="section-10.3-2">Whether or not a subscription can be supported will be determined by a combination of several factors, such as the subscription update trigger (on-change or periodic), the period in which to report changes (one-second periods will consume more resources than one-hour periods), the amount of data in the datastore subtree that is being subscribed to, the number and combination of other subscriptions that are concurrently being serviced, and the overall load from other services running on the publisher.<a href="#section-10.3-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="ConformanceAndCapabilities">
<section id="section-11">
      <h2 id="name-conformance-and-capabilitie">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-conformance-and-capabilitie" class="section-name selfRef">Conformance and Capabilities</a>
      </h2>
<p id="section-11-1">The normative text in this document already indicates which parts of the specification must or should be implemented for a compliant YANG Push v2 implementation via the use of <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> language.  It also sets out some additional related requirements, e.g., on transports <a href="#transports" class="auto internal xref">Section 8.2</a>, that add in additional functionality.<a href="#section-11-1" class="pilcrow">¶</a></p>
<p id="section-11-2">Some parts of this specification are optional to implement.  Some of these optional parts can be identified through the use of YANG Library <span>[<a href="#RFC8525" class="cite xref">RFC8525</a>]</span> specifying the list of implemented YANG modules and YANG features.  But, the broader approach adopted by this specification is via extending the ietf-system-capabilities YANG module specified in <span>[<a href="#RFC9196" class="cite xref">RFC9196</a>]</span> to make capability information available as standard YANG described operational data.<a href="#section-11-2" class="pilcrow">¶</a></p>
<div id="capabilities">
<section id="section-11.1">
        <h3 id="name-capabilities">
<a href="#section-11.1" class="section-number selfRef">11.1. </a><a href="#name-capabilities" class="section-name selfRef">Capabilities</a>
        </h3>
<p id="section-11.1-1">Publishers <span class="bcp14">SHOULD</span> implement the ietf-system-capabilities YANG module, defined in <span>[<a href="#RFC9196" class="cite xref">RFC9196</a>]</span>, and the ietf-yang-push-2-capabilities YANG module, defined in <a href="#yang-push-2-yang-capabilities-module" class="auto internal xref">Section 14.2</a>) that augments ietf-system-capabilities.<a href="#section-11.1-1" class="pilcrow">¶</a></p>
<p id="section-11.1-2">The ietf-yang-push-2-capabilities module contains capabilities to indicate what types of subscriptions and transports may be configured, along with acceptable subscription parameter for given subtrees.<a href="#section-11.1-2" class="pilcrow">¶</a></p>
<p id="section-11.1-3">The schema tree for the ietf-system-capabilities augmented by ietf-yang-push-2-capabilities is given below.<a href="#section-11.1-3" class="pilcrow">¶</a></p>
<span id="name-yang-tree-for-ietf-system-c"></span><figure id="figure-18">
          <div class="lang-yangtree sourcecode" id="section-11.1-4.1">
<pre>
module: ietf-system-capabilities
  +--ro system-capabilities
     +--ro datastore-capabilities* [datastore]
     |  +--ro datastore
     |  |       -&gt; /yanglib:yang-library/datastore/name
     |  +--ro per-node-capabilities* []
     |     +--ro (node-selection)?
     |     |  +--:(node-selector)
     |     |     +--ro node-selector?
     |     |             nacm:node-instance-identifier
     |     +--ro yp2ca:datastore-telemetry
     |        +--ro yp2ca:periodic-notifications-supported?
     |        |       notification-support
     |        +--ro (yp2ca:update-period)?
     |        |  +--:(yp2ca:minimum-update-period)
     |        |  |  +--ro yp2ca:minimum-update-period?        uint32
     |        |  +--:(yp2ca:supported-update-period)
     |        |     +--ro yp2ca:supported-update-period*      uint32
     |        +--ro yp2ca:on-change-supported?
     |                notification-support
     +--ro yp2ca:datastore-telemetry
        +--ro yp2ca:periodic-notifications-supported?
        |       notification-support
        +--ro (yp2ca:update-period)?
        |  +--:(yp2ca:minimum-update-period)
        |  |  +--ro yp2ca:minimum-update-period?        uint32
        |  +--:(yp2ca:supported-update-period)
        |     +--ro yp2ca:supported-update-period*      uint32
        +--ro yp2ca:on-change-supported?
        |       notification-support
        +--ro yp2ca:transport
           +--ro yp2ca:transport-capability* [transport-protocol]
              +--ro yp2ca:transport-protocol    identityref
              +--ro yp2ca:security-protocol?    identityref
              +--ro yp2ca:encoding-format*      identityref
</pre>
</div>
<figcaption><a href="#figure-18" class="selfRef">Figure 18</a>:
<a href="#name-yang-tree-for-ietf-system-c" class="selfRef">YANG tree for ietf-system-capabilities with ietf-yl-lite-capabilities augmentations.</a>
          </figcaption></figure>
<p id="section-11.1-5"><strong>TODO, do we need additional capabilities, as per <a href="https://github.com/rgwilton/draft-yp-observability/issues/18">Issue 18</a></strong><a href="#section-11.1-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="subscription-content-versioning">
<section id="section-11.2">
        <h3 id="name-subscription-content-versio">
<a href="#section-11.2" class="section-number selfRef">11.2. </a><a href="#name-subscription-content-versio" class="section-name selfRef">Subscription Content Versioning</a>
        </h3>
<p id="section-11.2-1">Many receivers will want to know what the schema is associated with a subscription and whether that schema has changed, e.g., due to a changing in software on the publisher.<a href="#section-11.2-1" class="pilcrow">¶</a></p>
<p id="section-11.2-2">Various mechanisms are available to help receivers or collectors learn or monitor the schema associated with a subscription:<a href="#section-11.2-2" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-11.2-3">
<li id="section-11.2-3.1">
            <p id="section-11.2-3.1.1">The device schema is available in the YANG library module ietf-yang-library.yang as defined in <span>[<a href="#RFC8525" class="cite xref">RFC8525</a>]</span>.  YANG library also provides a simple "yang-library-change" notification that informs the subscriber that the library has changed, or alternatively, the publisher may support an on-change telemetry subscription to<a href="#section-11.2-3.1.1" class="pilcrow">¶</a></p>
</li>
        </ol>
<p id="section-11.2-4">Content Schema Identification<a href="#section-11.2-4" class="pilcrow">¶</a></p>
<p id="section-11.2-5">YANG Module Synchronization<a href="#section-11.2-5" class="pilcrow">¶</a></p>
<p id="section-11.2-6">To make subscription requests, the subscriber needs to know the YANG datastore schemas used by the publisher.  These schemas are available in the YANG library module ietf-yang-library.yang as defined in <span>[<a href="#RFC8525" class="cite xref">RFC8525</a>]</span>.  The receiver is expected to know the YANG library information before starting a subscription.<a href="#section-11.2-6" class="pilcrow">¶</a></p>
<p id="section-11.2-7">The set of modules, revisions, features, and deviations can change at runtime (if supported by the publisher implementation).  For this purpose, the YANG library provides a simple "yang-library-change" notification that informs the subscriber that the library has changed.  In this case, a subscription may need to be updated to take the updates into account.  The receiver may also need to be informed of module changes in order to process updates regarding datastore<a href="#section-11.2-7" class="pilcrow">¶</a></p>
<p id="section-11.2-8"><strong>TODO, this section should be updated so that a subscription is restarted if the schema that it is using changes, and to incorporate ideas to fingerprint the subscription schema in the subscription-started notification.</strong><a href="#section-11.2-8" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="ietf-yang-push-2-yang">
<section id="section-12">
      <h2 id="name-core-yang-push-v2-yang-data">
<a href="#section-12" class="section-number selfRef">12. </a><a href="#name-core-yang-push-v2-yang-data" class="section-name selfRef">Core YANG Push v2 YANG Data Model</a>
      </h2>
<div id="yang-push-2-tree">
<section id="section-12.1">
        <h3 id="name-ietf-yang-push-2-yang-tree">
<a href="#section-12.1" class="section-number selfRef">12.1. </a><a href="#name-ietf-yang-push-2-yang-tree" class="section-name selfRef">ietf-yang-push-2 YANG tree</a>
        </h3>
<p id="section-12.1-1">This section shows the full tree output for ietf-yang-push-2 YANG module.<a href="#section-12.1-1" class="pilcrow">¶</a></p>
<p id="section-12.1-2">Note, this output does not include support for any transport configuration, and for any implementation that supports configured subscriptions using this YANG module then at least one transport would expect to be configurable.<a href="#section-12.1-2" class="pilcrow">¶</a></p>
<span id="name-yang-tree-for-yang-push-v2-"></span><figure id="figure-19">
          <div class="breakable lang-yangtree sourcecode" id="section-12.1-3.1">
<pre>
module: ietf-yang-push-2

  rpcs:
    +---x establish-subscription {dynamic}?
    |  +---w input
    |  |  +---w id?               restricted-subscription-id
    |  |  +---w description?      string
    |  |  +---w target
    |  |  |  +---w datastore?       identityref
    |  |  |  +---w (filter)
    |  |  |     +--:(path)
    |  |  |     |  +---w path       ypath
    |  |  |     +--:(subtree)
    |  |  |     |  +---w subtree    &lt;anydata&gt;
    |  |  |     +--:(xpath)
    |  |  |        +---w xpath      yang:xpath1.0 {yp2:xpath}?
    |  |  +---w update-trigger
    |  |  |  +---w periodic!
    |  |  |  |  +---w period         centiseconds
    |  |  |  |  +---w anchor-time?   yang:date-and-time
    |  |  |  +---w on-change! {on-change}?
    |  |  |     +---w sync-on-start?   boolean
    |  |  +---w encoding          encoding
    |  |  +---w dscp?             inet:dscp
    |  +--ro output
    |     +--ro id    subscription-id
    +---x modify-subscription {dynamic}?
    |  +---w input
    |     +---w id                subscription-id
    |     +---w description?      string
    |     +---w target
    |     |  +---w datastore?       identityref
    |     |  +---w (filter)
    |     |     +--:(path)
    |     |     |  +---w path       ypath
    |     |     +--:(subtree)
    |     |     |  +---w subtree    &lt;anydata&gt;
    |     |     +--:(xpath)
    |     |        +---w xpath      yang:xpath1.0 {yp2:xpath}?
    |     +---w update-trigger
    |     |  +---w periodic!
    |     |  |  +---w period         centiseconds
    |     |  |  +---w anchor-time?   yang:date-and-time
    |     |  +---w on-change! {on-change}?
    |     |     +---w sync-on-start?   boolean
    |     +---w dscp?             inet:dscp
    +---x delete-subscription {dynamic}?
    |  +---w input
    |     +---w id    subscription-id
    +---x kill-subscription {dynamic}?
       +---w input
          +---w id    subscription-id

  notifications:
    +---n subscription-started
    |  +--ro id                subscription-id
    |  +--ro description?      string
    |  +--ro target
    |  |  +--ro datastore?                 identityref
    |  |  +--ro (filter)
    |  |  |  +--:(path)
    |  |  |  |  +--ro path                 ypath
    |  |  |  +--:(subtree)
    |  |  |  |  +--ro subtree              &lt;anydata&gt;
    |  |  |  +--:(xpath)
    |  |  |     +--ro xpath                yang:xpath1.0 {yp2:xpath}?
    |  |  +--ro schema-id?                 string
    |  |  +--ro yang-library-content-id?
    |  |          -&gt; /yanglib:yang-library/content-id
    |  +--ro update-trigger
    |     +--ro periodic!
    |     |  +--ro period         centiseconds
    |     |  +--ro anchor-time?   yang:date-and-time
    |     +--ro on-change! {on-change}?
    |        +--ro sync-on-start?   boolean
    +---n subscription-modified
    |  +--ro id                subscription-id
    |  +--ro description?      string
    |  +--ro target
    |  |  +--ro datastore?                 identityref
    |  |  +--ro (filter)
    |  |  |  +--:(path)
    |  |  |  |  +--ro path                 ypath
    |  |  |  +--:(subtree)
    |  |  |  |  +--ro subtree              &lt;anydata&gt;
    |  |  |  +--:(xpath)
    |  |  |     +--ro xpath                yang:xpath1.0 {yp2:xpath}?
    |  |  +--ro schema-id?                 string
    |  |  +--ro yang-library-content-id?
    |  |          -&gt; /yanglib:yang-library/content-id
    |  +--ro update-trigger
    |  |  +--ro periodic!
    |  |  |  +--ro period         centiseconds
    |  |  |  +--ro anchor-time?   yang:date-and-time
    |  |  +--ro on-change! {on-change}?
    |  |     +--ro sync-on-start?   boolean
    |  +--ro reason            subscription-change
    +---n subscription-terminated
    |  +--ro id        subscription-id
    |  +--ro reason    identityref
    +---n update
    |  +--ro id?                 subscription-id
    |  +--ro path-prefix?        string
    |  +--ro snapshot-type       enumeration
    |  +--ro observation-time?   yang:date-and-time
    |  +--ro updates* [target-path]
    |  |  +--ro target-path    string
    |  |  +--ro data?          &lt;anydata&gt;
    |  +--ro complete?           empty
    +---n update-complete
       +--ro id?   subscription-id
</pre>
</div>
<figcaption><a href="#figure-19" class="selfRef">Figure 19</a>:
<a href="#name-yang-tree-for-yang-push-v2-" class="selfRef">YANG tree for YANG Push v2 Module Tree Output</a>
          </figcaption></figure>
</section>
</div>
<div id="yang-push-2-yang-module">
<section id="section-12.2">
        <h3 id="name-ietf-yang-push-2-yang-model">
<a href="#section-12.2" class="section-number selfRef">12.2. </a><a href="#name-ietf-yang-push-2-yang-model" class="section-name selfRef">ietf-yang-push-2 YANG Model</a>
        </h3>
<p id="section-12.2-1">This module imports typedefs from <span>[<a href="#RFC6991" class="cite xref">RFC6991</a>]</span>, <span>[<a href="#RFC8343" class="cite xref">RFC8343</a>]</span>, <span>[<a href="#RFC8341" class="cite xref">RFC8341</a>]</span>, <span>[<a href="#RFC8529" class="cite xref">RFC8529</a>]</span>, and <span>[<a href="#RFC8342" class="cite xref">RFC8342</a>]</span>.  It references <span>[<a href="#RFC6241" class="cite xref">RFC6241</a>]</span>, <span>[<a href="#XPATH" class="cite xref">XPATH</a>]</span> ("XML Path Language (XPath) Version 1.0"), <span>[<a href="#RFC7049" class="cite xref">RFC7049</a>]</span>, <span>[<a href="#RFC8259" class="cite xref">RFC8259</a>]</span>, <span>[<a href="#RFC7950" class="cite xref">RFC7950</a>]</span>, <span>[<a href="#RFC7951" class="cite xref">RFC7951</a>]</span>, and <span>[<a href="#RFC7540" class="cite xref">RFC7540</a>]</span>.<a href="#section-12.2-1" class="pilcrow">¶</a></p>
<p id="section-12.2-2">This YANG module imports typedefs from <span>[<a href="#RFC6991" class="cite xref">RFC6991</a>]</span>, identities from
<span>[<a href="#RFC8342" class="cite xref">RFC8342</a>]</span>, and the "sx:structure" extension from <span>[<a href="#RFC8791" class="cite xref">RFC8791</a>]</span>. It also references <span>[<a href="#RFC6241" class="cite xref">RFC6241</a>]</span>, <span>[<a href="#XPATH" class="cite xref">XPATH</a>]</span>, and <span>[<a href="#RFC7950" class="cite xref">RFC7950</a>]</span>.<a href="#section-12.2-2" class="pilcrow">¶</a></p>
<span id="name-yang-module-ietf-yang-push-"></span><figure id="figure-20">
          <div class="breakable lang-yang sourcecode" id="section-12.2-3.1">
<pre>&lt;CODE BEGINS&gt; file "ietf-yang-push-2.yang#0.1.0"

module ietf-yang-push-2 {
  yang-version 1.1;
  namespace "urn:ietf:params:xml:ns:yang:ietf-yang-push-2";
  prefix yp2;

  import ietf-inet-types {
    prefix inet;
    reference
      "RFC 6991: Common YANG Data Types";
  }
  import ietf-netconf-acm {
    prefix nacm;
    reference
      "RFC 8341: Network Configuration Access Control Model";
  }
  import ietf-yang-structure-ext {
    prefix sx;
    reference
      "RFC 8525: YANG Data Structure Extensions";
  }
  import ietf-yang-types {
    prefix yang;
    reference
      "RFC 6991: Common YANG Data Types";
  }
  import ietf-datastores {
    prefix ds;
    reference
      "RFC 8342: Network Management Datastore Architecture (NMDA)";
  }
  import ietf-yang-library {
    prefix yanglib;
    reference
      "RFC 8525: YANG Library";
  }

  organization
    "IETF NETCONF (Network Configuration) Working Group";
  contact
    "WG Web:  &lt;https:/datatracker.ietf.org/wg/netconf/&gt;
     WG List: &lt;mailto:netconf@ietf.org&gt;

     Author:  Robert Wilton
              &lt;mailto:rwilton@cisco.com&gt;";
  description
    "This module contains YANG specifications for YANG-Push
     version 2, a simplified version of the YANG-Push [RFC 8641]
     protocol.

     The key words 'MUST', 'MUST NOT', 'REQUIRED', 'SHALL', 'SHALL
     NOT', 'SHOULD', 'SHOULD NOT', 'RECOMMENDED', 'NOT RECOMMENDED',
     'MAY', and 'OPTIONAL' in this document are to be interpreted as
     described in BCP 14 (RFC 2119) (RFC 8174) when, and only when,
     they appear in all capitals, as shown here.

     Copyright (c) 2025 IETF Trust and the persons identified as
     authors of the code.  All rights reserved.

     Redistribution and use in source and binary forms, with or
     without modification, is permitted pursuant to, and subject to
     the license terms contained in, the Revised BSD License set
     forth in Section 4.c of the IETF Trust's Legal Provisions
     Relating to IETF Documents
     (https://trustee.ietf.org/license-info).

     This version of this YANG module is part of RFC XXXX
     (https://www.rfc-editor.org/info/rfcXXXX); see the RFC itself
     for full legal notices.";

  revision 2025-08-03 {
    description
      "Initial revision.";
    reference
      "XXXX: YANG Datastore Telemetry (YANG Push version 2)";
  }

  /*
   * FEATURES
   */

  feature dynamic {
    description
      "This feature indicates that dynamic establishment of
       subscriptions is
       supported.";
  }

  feature on-change {
    description
      "This feature indicates that on-change triggered subscriptions
       are supported.";
  }

  feature subtree {
    description
      "This feature indicates support for YANG subtree filtering.";
    reference
      "RFC 6241: Network Configuration Protocol (NETCONF),
                 Section 6";
  }

  feature xpath {
    description
      "This feature indicates support for XPath filtering.";
    reference
      "XML Path Language (XPath) Version 1.0
       (https://www.w3.org/TR/1999/REC-xpath-19991116)";
  }

  /*
   * IDENTITIES
   */
  /* Identities for RPC and notification errors */

  identity delete-subscription-error {
    description
      "Base identity for the problem found while attempting to
       fulfill either a 'delete-subscription' RPC request or a
       'kill-subscription' RPC request.";
  }

  identity establish-subscription-error {
    description
      "Base identity for the problem found while attempting to
       fulfill an 'establish-subscription' RPC request.";
  }

  identity subscription-terminated-reason {
    description
      "Base identity for the problem condition communicated to a
       receiver as part of a 'subscription-terminated'
       notification.";
  }

  identity dscp-unavailable {
    base establish-subscription-error;
    description
      "The publisher is unable to mark notification messages with
       prioritization information in a way that will be respected
       during network transit.";
  }

  identity encoding-unsupported {
    base establish-subscription-error;
    description
      "Unable to encode notification messages in the desired
       format.";
  }

  identity filter-unavailable {
    base subscription-terminated-reason;
    description
      "Referenced filter does not exist.  This means a receiver is
       referencing a filter that doesn't exist or to which it
       does not have access permissions.";
  }

  identity filter-unsupported {
    base establish-subscription-error;
    description
      "Cannot parse syntax in the filter.  This failure can be from
       a syntax error or a syntax too complex to be processed by the
       publisher.";
  }

  identity insufficient-resources {
    base establish-subscription-error;
    description
      "The publisher does not have sufficient resources to support
       the requested subscription.  An example might be that
       allocated CPU is too limited to generate the desired set of
       notification messages.";
  }

  identity no-such-subscription {
    base delete-subscription-error;
    base subscription-terminated-reason;
    description
      "Referenced subscription doesn't exist.  This may be as a
       result of a nonexistent subscription ID, an ID that belongs to
       another subscriber, or an ID for a configured subscription.";
  }

  identity stream-unavailable {
    base subscription-terminated-reason;
    description
      "Not a subscribable event stream.  This means the referenced
       event stream is not available for subscription by the
       receiver.";
  }

  identity suspension-timeout {
    base subscription-terminated-reason;
    description
      "Termination of a previously suspended subscription.  The
       publisher has eliminated the subscription, as it exceeded a
       time limit for suspension.";
  }

  identity unsupportable-volume {
    base subscription-terminated-reason;
    description
      "The publisher does not have the network bandwidth needed to
       get the volume of generated information intended for a
       receiver.";
  }

  identity conflicting-identifier {
    base subscription-terminated-reason;
    description
      "The subscription identifier conflicts with another
       subscription.

       This can prevent a dynamic subscription from being
       established, or cause a dynamic subscription to be terminated
       if a configured subscription with the same id is created.";

    // TODO - Should there be separate error codes for creating a subscription
    // vs terminating an existing one?
  }


  /* Identities for encodings */

  identity configurable-encoding {
    description
      "If a transport identity derives from this identity, it means
       that it supports configurable encodings.  An example of a
       configurable encoding might be a new identity such as
       'encode-cbor'.  Such an identity could use
       'configurable-encoding' as its base.  This would allow a
       dynamic subscription encoded in JSON (RFC 8259) to request
       that notification messages be encoded via the Concise Binary
       Object Representation (CBOR) (RFC 7049).  Further details for
       any specific configurable encoding would be explored in a
       transport document based on this specification.

       TODO - Clear up this text or use YANG-CBOR reference";
    reference
      "RFC 8259: The JavaScript Object Notation (JSON) Data
                 Interchange Format
       RFC 7049: Concise Binary Object Representation (CBOR)";
  }

  identity encoding {
    description
      "Base identity to represent data encodings.";
  }

  identity json {
    base encoding;
    description
      "Encode data using JSON as described in RFC 7951.";
    reference
      "RFC 7951: JSON Encoding of Data Modeled with YANG";
  }

  identity xml {
    base encoding;
    description
      "Encode data using XML as described in RFC 7950.";
    reference
      "RFC 7950: The YANG 1.1 Data Modeling Language";
  }

  identity cbor {
    base encoding;
    description
      "Encode data using CBOR as described in RFC 9245,
       without using YANG SIDs";
    reference
      "RFC 9245: Encoding of Data Modeled with YANG in the
       Concise Binary Object Representation (CBOR).";
  }

  identity cbor-sids {
    base encoding;
    description
      "Encode data using JSON as described in RFC 7951, using YANG
       SIDs.";
    reference
      "RFC 9245: Encoding of Data Modeled with YANG in the
       Concise Binary Object Representation (CBOR).

       RFC 9595: YANG Schema Item iDentifier (YANG SID).";
  }

  /* Identities for transports */

  identity transport {
    description
      "An identity that represents the underlying mechanism for
       passing notification messages.";
  }


  /*
   * TYPEDEFs
   */

  typedef ypath {
    type string {
      length "1..max";
    }
    description
      "A type for YANG instance data paths.";
  }

  typedef encoding {
    type identityref {
      base encoding;
    }
    description
      "Specifies a data encoding, e.g., for a data subscription.";
  }

  typedef subscription-id {
   type string {
      length "1..64";
      pattern '[A-Za-z0-9._-]+';
    }
    description
      "A used friendly string identifier for a subscription.";
  }

  typedef restricted-subscription-id {
    type subscription-id {
      pattern "dyn-.*" {
        modifier "invert-match";
      }
    }
    description
      "A subscription identifier that cannot start with 'dyn-',
       which is reserved for dynamically subscriptions created by
       the publisher.";
  }

  typedef transport {
    type identityref {
      base transport;
    }
    description
      "Specifies the transport used to send notification messages
       to a receiver.";
  }

// TODO - Consider changes to list keys or reordering of
//        user-ordered lists.

  typedef centiseconds {
    type uint32;
    description
      "A period of time, measured in units of 0.01 seconds.";
  }

  typedef subscription-type {
    type enumeration {
      enum configured {
        description
          "A subscription that is created and managed via
           configuration.";
      }
      enum dynamic {
        description
          "A subscription that is created and managed via RPC
           primitives.";
      }
    }
    description
      "Indicate the type of subscription.";
  }

  typedef subscription-status {
    type enumeration {
      enum invalid {
        description
          "The subscription as a whole is unsupportable with its
          current parameters.";
      }
      enum inactive {
        description
          "The subscription is supportable with its current
          parameters, but it is not currently connected to a
          receiver";
      }
      enum active {
        description
          "The subscription is actively running, and is connected
           to at least one receiver.

           A subscription-started notification must have been sent
           for a subscription to be in this state, and the receiver
           will receive update notifications, as per the
           update-trigger selection.";
      }
    }
    description
      "Indicates the status of a subscription";
  }

  typedef subscription-change {
    type enumeration {
      enum new-subscription {
        description
          "This is a new subscription.";
      }
      enum deleted {
        description
          "The subscription has been unconfigured or deleted via
           a delete-subscription RPC";
      }
      enum killed {
        description
          "A dynamic subscription has been killed via a
           kill-subscription RPC";
      }
      enum receiver-added {
        description
          "A new receiver has been added to a configured
           subscription, and has connected successfully.";
      }
      enum receiver-removed {
        description
          "A receiver has been removed from a configured
           subscription, or has become disconnected.";
      }
      enum config-changed {
        description
          "The subscription configuration has been changed,
           requiring the subscription to be restarted.";
      }
    }

    description
      "Indicates the reason why a subscription has changed.";
  }

  /*
   * GROUPINGS
   */

  grouping dscp {
    description
      "This grouping describes QoS information concerning a
       subscription.  This information is passed to lower layers
       for transport prioritization and treatment.";
    leaf dscp {
      type inet:dscp;
      default "0";
      description
        "The desired network transport priority level.  This is the
         priority set on notification messages encapsulating the
         results of the subscription.  This transport priority is
         shared for all receivers of a given subscription.";
    }
  }

  grouping filter-choice {
    description
      "This grouping defines the types of selectors for objects
       from a datastore.";
    choice filter {
      mandatory true;
      description
        "The content filter specification for this request.";

      leaf path {
        type ypath;
        mandatory true;
        description
          "A basic path filter that allows wildcard, regex, or
           fixed value for list keys.  Each format is TODO";
      }
      anydata subtree {
        //if-feature "yp2:subtree";
        mandatory true;
        description
          "This parameter identifies the portions of the
           target datastore to retrieve.";
        reference
          "RFC 6241: Network Configuration Protocol (NETCONF),
                     Section 6";
      }
      leaf xpath {
        if-feature "yp2:xpath";
        type yang:xpath1.0;
        mandatory true;
        description
          "This parameter contains an XPath expression identifying
           the portions of the target datastore to retrieve.

           If the expression returns a node set, all nodes in the
           node set are selected by the filter.  Otherwise, if the
           expression does not return a node set, the filter
           doesn't select any nodes.

           The expression is evaluated in the following XPath
           context:

           o  The set of namespace declarations is the set of prefix
              and namespace pairs for all YANG modules implemented
              by the server, where the prefix is the YANG module
              name and the namespace is as defined by the
              'namespace' statement in the YANG module.

              If the leaf is encoded in XML, all namespace
              declarations in scope on the 'stream-xpath-filter'
              leaf element are added to the set of namespace
              declarations.  If a prefix found in the XML is
              already present in the set of namespace declarations,
              the namespace in the XML is used.

           o  The set of variable bindings is empty.

           o  The function library is comprised of the core
              function library and the XPath functions defined in
              Section 10 in RFC 7950.

           o  The context node is the root node of the target
              datastore.";
        reference
          "XML Path Language (XPath) Version 1.0
           (https://www.w3.org/TR/1999/REC-xpath-19991116)
           RFC 7950: The YANG 1.1 Data Modeling Language,
                     Section 10";
      }
    }
  }

  grouping update-policy {
    description
      "This grouping describes the susbcription update policy";

    container update-trigger {
      description
        "This container describes all conditions under which
         subscription update messages are generated";

      container periodic {
        presence "indicates a periodic subscription";
        description
          "The publisher is requested to periodically notify the
            receiver regarding the current values of the datastore
            as defined by the selection filter.";
        leaf period {
          type centiseconds;
          mandatory true;
          description
            "Duration of time that should occur between periodic
              push updates, in units of 0.01 seconds.";
        }
        leaf anchor-time {
          type yang:date-and-time;
          description
            "Designates a timestamp before or after which a series
              of periodic push updates are determined.  The next
              update will take place at a point in time that is a
              multiple of a period from the 'anchor-time'.
              For example, for an 'anchor-time' that is set for the
              top of a particular minute and a period interval of a
              minute, updates will be sent at the top of every
              minute that this subscription is active.";
        }
      }
      container on-change {
        if-feature "on-change";
        presence "indicates an on-change subscription";
        description
          "The publisher is requested to notify the receiver
            regarding changes in values in the datastore subset as
            defined by a selection filter.";

        leaf sync-on-start {
          type boolean;
          default "true";
          description
            "When this object is set to 'false', (1) it restricts an
             on-change subscription from sending 'push-update'
             notifications and (2) pushing a full selection per the
             terms of the selection filter MUST NOT be done for
             this subscription.  Only updates about changes
             (i.e., only 'push-change-update' notifications)
             are sent.  When set to 'true' (the default behavior),
             in order to facilitate a receiver's synchronization,
             a full update is sent, via a 'push-update' notification,
             when the subscription starts.  After that,
             'push-change-update' notifications are exclusively sent,
             unless the publisher chooses to resync the subscription
             via a new 'push-update' notification.";
        }
      }
    }
  }

  grouping subscription-id {
    description
      "This grouping describes the subscription identifier.";

    leaf id {
      type subscription-id;
      mandatory true;
      description
        "The unique identifier for the subscription.";
    }
  }

  grouping client-subscription-id {
    description
      "This grouping describes a subscription identifier that
       cannot start with 'dyn-', which is reserved for dynamically
       created subscriptions.";

    leaf id {
      type restricted-subscription-id;
      description
        "A identifier for the subscription, that MUST be unique
        across all configured and dynamic subscriptions.

        MUST NOT start with 'dyn-'.";
    }
  }

  grouping subscription-schema {
    description
      "This grouping describes schema information related to a
       subscription.";

      leaf schema-id {
        type string;
        description
          "Indicates the version of the YANG schema used for this
          subscription.  The schema-id MUST change if the schema
          associated with the subscription changes.  The schema-id
          MAY change if the device schema changes, even if the
          change does not affect the subscription.";
      }

      leaf yang-library-content-id {
        type leafref {
          path "/yanglib:yang-library/yanglib:content-id";
        }
        description
          "Contains the YANG library content identifier.";
      }
  }

  grouping subscription-common {
    description
      "Common settings that are shared between dynamic and
       configured subscriptions.";

    leaf description {
      type string {
        length "1..1000";
      }
      description
        "Open text allowing a configuring entity to embed the
         originator or other specifics of this subscription.";
    }

    container target {
      description
        "Identifies the source of information against which a
         subscription is being applied as well as specifics on the
         subset of information desired from that source.";
      leaf datastore {
        type identityref {
          base ds:datastore;
        }
        default "ds:operational";
        description
          "Datastore from which to retrieve data, defaults to
           operational";
      }

      uses filter-choice;
    }

    uses update-policy;
  }


  /*
   * RPCs
   */

  rpc establish-subscription {
    if-feature "dynamic";
    description
      "This RPC allows a subscriber to create (and possibly
       negotiate) a subscription on its own behalf.  If successful,
       the subscription remains in effect for the duration of the
       subscriber's association with the publisher or until the
       subscription is terminated.  If an error occurs or the
       publisher cannot meet the terms of a subscription, an RPC
       error is returned, and the subscription is not created.
       In that case, the RPC reply's 'error-info' MAY include
       suggested parameter settings that would have a higher
       likelihood of succeeding in a subsequent
       'establish-subscription' request.";
    input {
      uses client-subscription-id {
        refine id {
          description
            "A optional identifier for a dynamic
             subscription, that must be unique across all
             configured and dynamic subscriptions.

             MUST NOT start with 'dyn-'.

             If not provided, the publisher MUST generate a unique
             identifier for the subscription, with an identifier
             that starts with 'dyn-', which is returned to the
             client in the RPC reply.";
        }
      }
      uses subscription-common;

      leaf encoding {
        type encoding;
        mandatory true;
        description
          "The encoding to use for the subscription notifications.";
      }

      uses dscp;

    }
    output {
      leaf id {
        type subscription-id;
        mandatory true;
        description
          "Identifier used for this subscription.";
      }
    }
  }

  rpc modify-subscription {
    if-feature "dynamic";
    description
      "This RPC allows a subscriber to modify a dynamic
       subscription's parameters.  If successful, the changed
       subscription parameters remain in effect for the duration of
       the subscription, until the subscription is again modified, or
       until the subscription is terminated.  In the case of an error
       or an inability to meet the modified parameters, the
       subscription is not modified and the original subscription
       parameters remain in effect.";
    input {
      uses subscription-id;
      uses subscription-common;

      uses dscp;

    }
    //output {
      // leaf id {
      //   type subscription-id;
      //   mandatory true;
      //   description
      //     "Identifier used for this subscription.";
      // }
    //}
  }

  sx:structure establish-subscription-stream-error-info {
    container establish-subscription-stream-error-info {
      description
        "If any 'establish-subscription' RPC parameters are
         unsupportable against the event stream, a subscription
         is not created and the RPC error response MUST indicate the
         reason why the subscription failed to be created.  This
         yang-data MAY be inserted as structured data in a
         subscription's RPC error response to indicate the reason for
         the failure.  This yang-data MUST be inserted if hints are
         to be provided back to the subscriber.";
      leaf reason {
        type identityref {
          base establish-subscription-error;
        }
        description
          "Indicates the reason why the subscription has failed to
           be created to a targeted event stream.";
      }
      leaf filter-failure-hint {
        type string;
        description
          "Information describing where and/or why a provided
           filter was unsupportable for a subscription.  The
           syntax and semantics of this hint are
           implementation specific.";
      }
    }
  }

  rpc delete-subscription {
    if-feature "dynamic";
    description
      "This RPC allows a subscriber to delete a subscription that
       was previously created by that same subscriber using the
       'establish-subscription' RPC.

       Only subscriptions that were created using
       'establish-subscription' from the same origin as this RPC
       can be deleted via this RPC. // TODO - Why same origin?

       If an error occurs, the server replies with an 'rpc-error'
       where the 'error-info' field MAY contain a
       'delete-subscription-error-info' structure.";
    input {
      leaf id {
        type subscription-id;
        mandatory true;
        description
          "The name of the dynamic subscription to be deleted.";
      }
    }
  }

  rpc kill-subscription {
    if-feature "dynamic";
    nacm:default-deny-all;
    description
      "This RPC allows an operator to delete a dynamic subscription
       without restrictions on the originating subscriber or
       underlying transport session.

       Only dynamic subscriptions, i.e., those that were created
       using 'establish-subscription', may be deleted via this RPC.

       If an error occurs, the server replies with an 'rpc-error'
       where the 'error-info' field MAY contain a
       'delete-subscription-error-info' structure.";
    input {
      leaf id {
        type subscription-id;
        mandatory true;
        description
          "The name of the dynamic subscription to be deleted.";
      }
    }
  }

  sx:structure delete-subscription-error-info {
    container delete-subscription-error-info {
      description
        "If a 'delete-subscription' RPC or a 'kill-subscription' RPC
         fails, the subscription is not deleted and the RPC error
         response MUST indicate the reason for this failure.  This
         yang-data MAY be inserted as structured data in a
         subscription's RPC error response to indicate the reason
         for the failure.";
      leaf reason {
        type identityref {
          base delete-subscription-error;
        }
        mandatory true;
        description
          "Indicates the reason why the subscription has failed to be
           deleted.";
      }
    }
  }

  /*
   * NOTIFICATIONS
   */

  notification subscription-started {
    description
      "This notification indicates that a subscription has started
       and notifications will now be sent.";
    uses subscription-id;
    uses subscription-common {
      augment "target" {
        description
          "Augments fields to identify the target schema.";
        uses subscription-schema;
      }
    }
  }

  notification subscription-modified {
    description
      "This notification indicates that subscription paramaters have
       changed.";
    uses subscription-id;
    uses subscription-common {
      augment "target" {
        description
          "Adds a schema id.";
        uses subscription-schema;
      }
    }

    leaf reason {
      type subscription-change;
      mandatory true;
      description
        "Gives a hint for the message recipient as to why the
         notification has been sent.";
    }
  }

  notification subscription-terminated {
    description
      "This notification indicates that a subscription has been
       terminated.";
    uses subscription-id;
    leaf reason {
      type identityref {
        base subscription-terminated-reason;
      }
      mandatory true;
      description
        "Identifies the condition that resulted in the
         termination.";
    }
  }

  notification update {
    description
      "This notification contains a push update that in turn
       contains data subscribed to via a subscription.  In the case
       of a periodic subscription, this notification is sent for
       periodic updates.  It can also be used for synchronization
       updates of an on-change subscription.  This notification
       shall only be sent to receivers of a subscription.";
    leaf id {
      type subscription-id;
      description
        "The identifier of the subscription that is the source of
         this notification.";
    }

    leaf path-prefix {
      type string;
      description
        "Specifies the common prefix that all other paths and data
         are encoded relative to.

         TODO - This should be a JSONified instance data path.";
    }

    leaf snapshot-type {
      type enumeration {
        enum "periodic" {
          description
            "The update message is due to a periodic update.";
        }
        enum "on-change-update" {
          description
            "The update message is due to an on-change update.  This
             means that one or more fields have changed under the
             snapshot path.

             TODO - Split this into a on-change-delete msg?";
        }
        enum "on-change-delete" {
          description
            "The update message is due to an on-change event where
             the data node at the target path has been delete.";
        }
        enum "resync" {
          description
            "This indicates that the update is to resynchronize the
             state, e.g., after a subscription started notification.

             Ideally, the resync message SHOULD be the first
             notification sent when a subscription has started, but
             it is not gauranteed or required to be the first
             (e.g., if an on-change event occurs).

             These messages can be used to ensure that all state
             has been sent to the client, and can be used to purge
             stale data.

             TODO - In the distributed notification case, need a
             notification to indicate that all child subscriptions
             have been sent.";
        }
      }
      mandatory true;
      description
        "This indicates the type of notification message that is
         being sent.";
    }

    leaf observation-time {
      type yang:date-and-time;
      description
        "The time that the update was observed by the publisher.";
    }

    list updates {
      key "target-path";
      description
        "This list contains the updated data.  It constitutes a
         snapshot at the time of update of the set of data that has
         been subscribed to.  The snapshot corresponds to the same
         snapshot that would be returned in a corresponding 'get'
         operation with the same selection filter parameters
         applied.";

      leaf target-path {
        type string;
        description
          "The target path of the data that is being replaced, i.e.,
           updated or deleted.  The path is given relative to the
           path-prefix.";
      }

      anydata data {
        description
          "This contains the updated data.  It constitutes a
          snapshot at the time of update of the set of data that has
          been subscribed to.  The snapshot corresponds to the same
          snapshot that would be returned in a corresponding 'get'
          operation with the same selection filter parameters
          applied.

          For an on-change delete notification, the
          datastore-snapshot will be absent for the given target
          path.

          The snapshot is encoded relative to the path-prefix.";
      }
    }

    leaf complete {
      type empty;
      description
        "This flag indicates that this is the last
         notification in a series of notifications that together
         constitute a complete snapshot of the subscribed data at
         the event-time.

         The 'update-complete' notification MAY be used as an
         alternative to setting this flag, and is semantically
         equivalent.";
    }
  }

  // TODO - Need to think about list key entries that are no longer
  //        present.
  notification update-complete {
    description
      "This notification indicates the end of a periodic collection
       or resync event for an on-change subscription, and can be used
       to indicate that the receiver has a complete snapshot of the
       subscribed data at the event-time, and hence the client MAY
       use this as a signal that it can purge stale state
       information.

       Alternatively, the 'complete' flag in the update
       notification MAY be used instead of sending this notification
       as a separate message, and both are semantically equivalent.";
    leaf id {
      type subscription-id;
      description
        "The name of the subscription that is the source of
          this notification.";
    }
  }
}

&lt;CODE ENDS&gt;</pre>
</div>
<figcaption><a href="#figure-20" class="selfRef">Figure 20</a>:
<a href="#name-yang-module-ietf-yang-push-" class="selfRef">YANG module ietf-yang-push-2</a>
          </figcaption></figure>
</section>
</div>
</section>
</div>
<div id="config-subs-data-model">
<section id="section-13">
      <h2 id="name-configured-subscription-yan">
<a href="#section-13" class="section-number selfRef">13. </a><a href="#name-configured-subscription-yan" class="section-name selfRef">Configured Subscription YANG Data Model</a>
      </h2>
<p id="section-13-1">This document specifies the ietf-yang-push-2-config YANG module <a href="#yang-push-2-config-yang-module" class="auto internal xref">Section 13.2</a> that defines an NMDA <span>[<a href="#RFC8342" class="cite xref">RFC8342</a>]</span> compatible YANG data model for configuring subscriptions.  Support for this YANG module is <span class="bcp14">OPTIONAL</span> and is advertised using the normal mechanisms, e.g., <span>[<a href="#RFC8525" class="cite xref">RFC8525</a>]</span>.<a href="#section-13-1" class="pilcrow">¶</a></p>
<p id="section-13-2">Below is a tree diagram for the "subscriptions" container.  All objects contained in this tree are described in the YANG module in <a href="#yang-push-2-yang-module" class="auto internal xref">Section 12.2</a>.  In the operational datastore <span>[<a href="#RFC8342" class="cite xref">RFC8342</a>]</span>, the "subscription" list contains entries both for configured and dynamic subscriptions.<a href="#section-13-2" class="pilcrow">¶</a></p>
<span id="name-subscriptions-container-tre"></span><div id="SubscriptionYangTree">
<figure id="figure-21">
        <div class="breakable lang-yangtree sourcecode" id="section-13-3.1">
<pre>
module: ietf-yang-push-2-config
  +--rw datastore-telemetry!
     +--rw subscriptions
        +--rw subscription* [id]
           +--rw id
           |       restricted-subscription-id
           +--rw description?                        string
           +--rw target
           |  +--rw datastore?          identityref
           |  +--rw (filter)
           |     +--:(path)
           |     |  +--rw path          ypath
           |     +--:(subtree)
           |     |  +--rw subtree       &lt;anydata&gt;
           |     +--:(xpath)
           |     |  +--rw xpath         yang:xpath1.0 {yp2:xpath}?
           |     +--:(by-reference)
           |        +--rw filter-ref    filter-ref
           +--rw update-trigger
           |  +--rw periodic!
           |  |  +--rw period         centiseconds
           |  |  +--rw anchor-time?   yang:date-and-time
           |  +--rw on-change! {on-change}?
           |     +--rw sync-on-start?   boolean
           +--rw receiver
           |       -&gt; /datastore-telemetry/receivers/receiver/name
           +--ro status?
           |       yp2:subscription-status
           +--ro type?
           |       yp2:subscription-type
           +--ro encoding?                           yp2:encoding
           +--ro last-sequence-number?
           |       yang:zero-based-counter64
           +--ro last-notification-time?
           |       yang:date-and-time
           +--ro last-periodic-collection-time?
           |       yang:date-and-time
           +--ro last-on-change-notification-time?
           |       yang:date-and-time
           +--ro statistics
           |  +--ro started-notifications?
           |  |       yang:zero-based-counter64
           |  +--ro terminated-notifications?
           |  |       yang:zero-based-counter64
           |  +--ro update-notifications?
           |  |       yang:zero-based-counter64
           |  +--ro periodic-collections?
           |  |       yang:zero-based-counter64
           |  +--ro excluded-events?
           |  |       yang:zero-based-counter64
           |  +--ro receiver-disconnects?
           |          yang:zero-based-counter64
           +---x reset

  augment /yp2:establish-subscription/yp2:input/yp2:target
            /yp2:filter:
    +--:(by-reference)
  augment /yp2:subscription-started/yp2:target:
    +-- filter-ref?   filter-ref
</pre>
</div>
<figcaption><a href="#figure-21" class="selfRef">Figure 21</a>:
<a href="#name-subscriptions-container-tre" class="selfRef">subscriptions container Tree Diagram</a>
        </figcaption></figure>
</div>
<p id="section-13-4">An overview of the behavior for configured subscriptions is specified in <a href="#configured-subscriptions" class="auto internal xref">Section 9.3</a>, with further details specified in the ietf-yang-push-2-config YANG module.<a href="#section-13-4" class="pilcrow">¶</a></p>
<div id="yang-push-2-config-tree">
<section id="section-13.1">
        <h3 id="name-ietf-yang-push-2-config-yan">
<a href="#section-13.1" class="section-number selfRef">13.1. </a><a href="#name-ietf-yang-push-2-config-yan" class="section-name selfRef">ietf-yang-push-2-config YANG tree</a>
        </h3>
<p id="section-13.1-1">This section shows the full tree output for ietf-yang-push-2-config YANG module.<a href="#section-13.1-1" class="pilcrow">¶</a></p>
<p id="section-13.1-2">Note, this output does not include support for any transport configuration, and for any implementation that supports configured subscriptions using this YANG module then at least one transport would expect to be configurable.<a href="#section-13.1-2" class="pilcrow">¶</a></p>
<span id="name-yang-tree-for-yang-push-v2-c"></span><figure id="figure-22">
          <div class="breakable lang-yangtree sourcecode" id="section-13.1-3.1">
<pre>
module: ietf-yang-push-2-config
  +--rw datastore-telemetry!
     +--rw filters
     |  +--rw filter* [name]
     |     +--rw name             string
     |     +--rw (filter)
     |        +--:(path)
     |        |  +--rw path       ypath
     |        +--:(subtree)
     |        |  +--rw subtree    &lt;anydata&gt;
     |        +--:(xpath)
     |           +--rw xpath      yang:xpath1.0 {yp2:xpath}?
     +--rw subscriptions
     |  +--rw subscription* [id]
     |     +--rw id
     |     |       restricted-subscription-id
     |     +--rw description?                        string
     |     +--rw target
     |     |  +--rw datastore?          identityref
     |     |  +--rw (filter)
     |     |     +--:(path)
     |     |     |  +--rw path          ypath
     |     |     +--:(subtree)
     |     |     |  +--rw subtree       &lt;anydata&gt;
     |     |     +--:(xpath)
     |     |     |  +--rw xpath         yang:xpath1.0 {yp2:xpath}?
     |     |     +--:(by-reference)
     |     |        +--rw filter-ref    filter-ref
     |     +--rw update-trigger
     |     |  +--rw periodic!
     |     |  |  +--rw period         centiseconds
     |     |  |  +--rw anchor-time?   yang:date-and-time
     |     |  +--rw on-change! {on-change}?
     |     |     +--rw sync-on-start?   boolean
     |     +--rw receiver
     |     |       -&gt; /datastore-telemetry/receivers/receiver/name
     |     +--ro status?
     |     |       yp2:subscription-status
     |     +--ro type?
     |     |       yp2:subscription-type
     |     +--ro encoding?                           yp2:encoding
     |     +--ro last-sequence-number?
     |     |       yang:zero-based-counter64
     |     +--ro last-notification-time?
     |     |       yang:date-and-time
     |     +--ro last-periodic-collection-time?
     |     |       yang:date-and-time
     |     +--ro last-on-change-notification-time?
     |     |       yang:date-and-time
     |     +--ro statistics
     |     |  +--ro started-notifications?
     |     |  |       yang:zero-based-counter64
     |     |  +--ro terminated-notifications?
     |     |  |       yang:zero-based-counter64
     |     |  +--ro update-notifications?
     |     |  |       yang:zero-based-counter64
     |     |  +--ro periodic-collections?
     |     |  |       yang:zero-based-counter64
     |     |  +--ro excluded-events?
     |     |  |       yang:zero-based-counter64
     |     |  +--ro receiver-disconnects?
     |     |          yang:zero-based-counter64
     |     +---x reset
     +--rw receivers
        +--rw receiver* [name]
           +--rw name                      string
           +--rw encoding                  yp2:encoding
           +--rw dscp?                     inet:dscp
           +---x reset
           +--rw (notification-message-origin)?
           |  +--:(interface-originated)
           |  |  +--rw source-interface?   if:interface-ref
           |  |          {interface-designation}?
           |  +--:(address-originated)
           |     +--rw source-vrf?         leafref {supports-vrf}?
           |     +--rw source-address?     inet:ip-address-no-zone
           +--rw (transport-type)

  augment /yp2:establish-subscription/yp2:input/yp2:target
            /yp2:filter:
    +--:(by-reference)
       +-- filter-ref?   filter-ref
  augment /yp2:subscription-started/yp2:target:
    +-- filter-ref?   filter-ref
</pre>
</div>
<figcaption><a href="#figure-22" class="selfRef">Figure 22</a>:
<a href="#name-yang-tree-for-yang-push-v2-c" class="selfRef">YANG tree for YANG Push v2 Config Module Tree Output</a>
          </figcaption></figure>
</section>
</div>
<div id="yang-push-2-config-yang-module">
<section id="section-13.2">
        <h3 id="name-ietf-yang-push-2-config-yang">
<a href="#section-13.2" class="section-number selfRef">13.2. </a><a href="#name-ietf-yang-push-2-config-yang" class="section-name selfRef">ietf-yang-push-2-config YANG Model</a>
        </h3>
<p id="section-13.2-1">This module has import dependencies on <span>[<a href="#RFC6991" class="cite xref">RFC6991</a>]</span>, <span>[<a href="#RFC8343" class="cite xref">RFC8343</a>]</span>, and <span>[<a href="#RFC8529" class="cite xref">RFC8529</a>]</span>, and ietf-yang-push-lite.yang (this RFC).  In addition, this YANG module references <span>[<a href="#BCP14" class="cite xref">BCP14</a>]</span> (<span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span>), and <span>[<a href="#RFC8529" class="cite xref">RFC8529</a>]</span>.<a href="#section-13.2-1" class="pilcrow">¶</a></p>
<span id="name-yang-module-ietf-yang-push-2"></span><figure id="figure-23">
          <div class="breakable lang-yang sourcecode" id="section-13.2-2.1">
<pre>&lt;CODE BEGINS&gt; file "ietf-yang-push-2-config.yang#0.1.0"

module ietf-yang-push-2-config {
  yang-version 1.1;
  namespace
    "urn:ietf:params:xml:ns:yang:ietf-yang-push-2-config";
  prefix yp2co;

  import ietf-inet-types {
    prefix inet;
    reference
      "RFC 6991: Common YANG Data Types";
  }
  import ietf-interfaces {
    prefix if;
    reference
      "RFC 8343: A YANG Data Model for Interface Management";
  }
  import ietf-network-instance {
    prefix ni;
    reference
      "RFC 8529: YANG Data Model for Network Instances";
  }
  import ietf-yang-types {
    prefix yang;
    reference
      "RFC 6991: Common YANG Data Types";
  }
  import ietf-yang-push-2 {
    prefix yp2;
    reference
      "RFC XXXX: YANG Datastore Telemetry (YANG Push version 2)";
  }

  organization
    "IETF NETCONF (Network Configuration) Working Group";
  contact
    "WG Web:  &lt;https:/datatracker.ietf.org/wg/netconf/&gt;
     WG List: &lt;mailto:netconf@ietf.org&gt;

     Author:  Robert Wilton
              &lt;mailto:rwilton@cisco.com&gt;";
  description
    "This module contains YANG specifications for YANG-Push version 2
     configuration and operational state model.

     The key words 'MUST', 'MUST NOT', 'REQUIRED', 'SHALL', 'SHALL
     NOT', 'SHOULD', 'SHOULD NOT', 'RECOMMENDED', 'NOT RECOMMENDED',
     'MAY', and 'OPTIONAL' in this document are to be interpreted as
     described in BCP 14 (RFC 2119) (RFC 8174) when, and only when,
     they appear in all capitals, as shown here.

     Copyright (c) 2025 IETF Trust and the persons identified as
     authors of the code.  All rights reserved.

     Redistribution and use in source and binary forms, with or
     without modification, is permitted pursuant to, and subject to
     the license terms contained in, the Revised BSD License set
     forth in Section 4.c of the IETF Trust's Legal Provisions
     Relating to IETF Documents
     (https://trustee.ietf.org/license-info).

     This version of this YANG module is part of RFC XXXX
     (https://www.rfc-editor.org/info/rfcXXXX); see the RFC itself
     for full legal notices.";

  revision 2025-08-03 {
    description
      "Initial revision.";
    reference
      "XXX: YANG Datastore Telemetry (YANG Push version 2)";
  }

  /*
   * FEATURES
   */

  feature interface-designation {
    description
      "This feature indicates that a publisher supports sourcing all
       receiver interactions for a configured subscription from a
       single designated egress interface.";
  }

  feature supports-vrf {
    description
      "This feature indicates that a publisher supports VRF
       configuration for configured subscriptions.  VRF support for
       dynamic subscriptions does not require this feature.";
    reference
      "RFC 8529: YANG Data Model for Network Instances,
                 Section 6";
  }

  /*
   * TYPEDEFs
   */

  typedef filter-ref {
    type leafref {
      path "/datastore-telemetry/filters/filter/name";
    }
    description
      "This type is used to reference a selection filter.";
  }

  /*
   * GROUPINGS
   */
  grouping filter-ref {
    description
      "This grouping is used to reference a selection filter.";
    leaf filter-ref {
      type filter-ref;
      mandatory true;
      description
        "References an existing selection filter that is to be
        applied to the subscription.";
    }
  }

  /*
   * DATA NODES
   */

  container datastore-telemetry {
    presence "Enables datastore telemetry";
    description
    "YANG Push v2 Datastore Telemetry Configuration and State.";
    container filters {
      description
        "Contains a list of configurable filters that can be applied
         to subscriptions.  This facilitates the reuse of complex
         filters once defined.";

      list filter {
        key "name";
        description
          "A list of preconfigured filters that can be applied
          to datastore subscriptions.";
        leaf name {
          type string {
            length "1..64";
            pattern '[A-Za-z0-9._-]+';
          }
          description
            "A unique name to identify the selection filters.";
        }
        uses yp2:filter-choice;
      }
    }
    container subscriptions {
      description
        "Contains the list of currently active subscriptions, i.e.,
        subscriptions that are currently in effect, used for
        subscription management and monitoring purposes.  This
        includes subscriptions that have been set up via
        RPC primitives as well as subscriptions that have been
        established via configuration.";
      list subscription {
        key "id";
        description
          "The identity and specific parameters of a subscription.
          Subscriptions in this list can be created using a control
          channel or RPC or can be established through configuration.

          If the 'kill-subscription' RPC or configuration operations
          are used to delete a subscription, a
          'subscription-terminated' message is sent to any active or
          suspended receivers.";

        uses yp2:client-subscription-id;
        uses yp2:subscription-common;

        leaf receiver {
          type leafref {
            path "/datastore-telemetry/receivers/receiver/name";
          }
          mandatory true;
          description
            "Identifies the receiver for a subscription.";
        }

        // leaf status {
        //   type enumeration {
        //     enum disconnected {
        //       description
        //         "This subscription does not have an active session
        //           with the receiver, and it is not trying to
        //           connect.

        //         E.g., this state may be reported if the
        //         subscription is not valid, or has not been started
        //         yet.";
        //     }
        //     enum connecting {
        //       description
        //         "The publisher is trying to establish a session
        //           with the receiver for this subscription.

        //           For a session less transport, this state may be
        //           used to indicate that there is no route to the
        //           receiver.

        //           A receiver in connecting state may indicate that
        //           the transport or associated security session
        //           could not be established, and the publisher is
        //           periodically trying to establish the connection.";
        //     }
        //     enum active {
        //       description
        //         "The publisher has successfully connected (if over
        //           a session based transport) to the receiver for
        //           this subscription, and the publisher is able to
        //           send notifications to the receiver.";
        //     }
        //   }
        //   config false;
        //   description
        //     "Specifies the connection status of the receiver for
        //       this subscription.";
        // }

        leaf status {
          type yp2:subscription-status;
          config false;
          description
            "The presence of this leaf indicates that the
             subscription originated from configuration, not through
             a controlchannel or RPC.  The value indicates the state
             of the subscription as established by the publisher.";
        }

        leaf type {
          type yp2:subscription-type;
          default "configured";
          config false;
          description
            "Whether the subscription is configured or dynamic.";
        }

        leaf encoding {
          type yp2:encoding;
          config false;
          description
            "The type of encoding for notification messages.";
        }

        leaf last-sequence-number {
          type yang:zero-based-counter64;
          config false;
          description
            "The envelope sequence number for the last notification
             sent for this subscription.

             The sequence number is initialized to zero when the
             subscription first becomes active and the first
             subscription-started notification is sent.";
        }

        leaf last-notification-time {
          type yang:date-and-time;
          config false;
          description
            "The notification envelope event-time timestamp of the
             last notification sent for this subscription.

             The timestamp is initialized to the time when the
             subscription first becomes active and the first
             subscription-started notification is sent.";
        }

        leaf last-periodic-collection-time {
          type yang:date-and-time;
          config false;
          description
            "The event-time timestamp of the last completed periodic
             collection or resynchronization collection for this
             subscription, and used as the event-time in the
             notification header.

             The timestamp is initialized to the time when the
             subscription first becomes active and the first
             subscription-started notification is sent.";
        }

        leaf last-on-change-notification-time {
          type yang:date-and-time;
          config false;
          description
            "The notification envelope event-time timestamp of the
             last on-change notification sent for this subscription.

             The timestamp is initialized to the time when the
             subscription first becomes active and the first
             subscription-started notification is sent.";
        }

        container statistics {
          config false;
          description
            "Statistics related to the number of messages generated
             for this subscription.";

          leaf started-notifications {
            type yang:zero-based-counter64;
            config false;
            description
              "The number of subscription-started notifications
               sent for this subscription since the subscription
               list entry was created and the configuration
               was applied by the publisher.";
          }

          leaf terminated-notifications {
            type yang:zero-based-counter64;
            config false;
            description
              "The number of subscription-terminated notifications
               sent for this subscription since the subscription
               list entry was created and the configuration
               was applied by the publisher.";
          }

          leaf update-notifications {
            type yang:zero-based-counter64;
            config false;
            description
              "The number of update records generated for the
               subscription, to be queued to one of more active
               receivers.

               The count is re-initialized to 0 when the
               subscription first becomes active and the
               subscription-started notification is sent.

               The count is incremented even if the update
               record has been generated, but is not queued to
               any receiver.";
          }

          leaf periodic-collections {
            type yang:zero-based-counter64;
            config false;
            description
              "The number of periodic collections completed for
               the subscription.

               The count is re-initialized to 0 when the
               subscription first becomes active and the
               subscription-started notification is sent.

               The count is incremented even if the update
               record has been generated, but is not queued to
               any receiver.";
          }

          leaf excluded-events {
            type yang:zero-based-counter64;
            config false;
            description
              "The number of event records explicitly removed via
              either an event stream filter or an access control
              filter so that they are not passed to a receiver.
              This count is set to zero each time
              'sent-event-records' is initialized.";
          }

          leaf receiver-disconnects {
            type yang:zero-based-counter64;
            config false;
            description
              "The number of times that the receiver has been
                disconnected since the subscription
                receiver entry was created and the configuration
                was applied by the publisher";
          }
        }

        action reset {
          description
            "Reset the subscription.

             This action will cause a new subscription-started
             message to be sent for the subscription";
        }
      }
    }
    container receivers {
      description
        "A container for all instances of configured receivers.";

      list receiver {
        key "name";

        leaf name {
          type string {
            length "1..64";
            pattern '[A-Za-z0-9._-]+';
          }
          description
            "An arbitrary but unique name for this receiver
            instance.";
        }

        leaf encoding {
  /*        when 'not(../transport) or derived-from(../transport,
          "yp2:configurable-encoding")';*/
          type yp2:encoding;
          mandatory true;
          description
            "The type of encoding for notification messages.  For a
             dynamic subscription, if not included as part of an
             'establish-subscription' RPC, the encoding will be
             populated with the encoding used by that RPC.  For a
             configured subscription, if not explicitly configured,
             the encoding will be the default encoding for an
             underlying transport.";
        }

        uses yp2:dscp;

        action reset {
          description
            "Resets all configured subscriptions that reference
             this receiver.

             This action is directly equivalent to invoking the
             'reset' action on all subscriptions that references
             this receiver configuration.";
        }

        choice notification-message-origin {
          description
            "Identifies the egress interface on the publisher
            from which notification messages are to be sent.";
          case interface-originated {
            description
              "When notification messages are to egress a specific,
              designated interface on the publisher.";
            leaf source-interface {
              if-feature "interface-designation";
              type if:interface-ref;
              description
                "References the interface for notification
                 messages.";
            }
          }
          case address-originated {
            description
              "When notification messages are to depart from a
              publisher using a specific originating address and/or
              routing context information.";
            leaf source-vrf {
              if-feature "supports-vrf";
              type leafref {
                path
                  '/ni:network-instances/ni:network-instance/'
                  + 'ni:name';
              }
              description
                "VRF from which notification messages should egress a
                publisher.";
            }
            leaf source-address {
              type inet:ip-address-no-zone;
              description
                "The source address for the notification messages.
                If a source VRF exists but this object doesn't, a
                publisher's default address for that VRF must
                be used.";
            }
          }
        }

        choice transport-type {
          mandatory true;
          description
            "Choice of different types of transports used to
             send notifications.  The 'case' statements must
             be augmented in by other modules.";
        }

        description
          "A list of all receiver instances.";
      }
    }
  }

  augment "/yp2:establish-subscription/yp2:input/yp2:"
        + "target/yp2:filter" {

    description
      "Augment the 'establish-subscription' RPC to allow
       referencing a configured receiver.";

    case by-reference {
      description
        "Incorporates a filter that has been configured
         separately.";
      uses filter-ref {
        refine "filter-ref" {
          mandatory false;
        }
      }
    }
  }

  augment "/yp2:subscription-started/yp2:target" {

    description
      "Allow a subscription-started notification to include a
       referenced named filter";
    uses filter-ref {
      refine "filter-ref" {
        mandatory false;
      }
    }
  }

  augment "/datastore-telemetry/subscriptions/subscription/"
        + "target/filter" {

    description
      "Augment the subscription filter to allow
       referencing a filter configured separately.";

    case by-reference {
      description
        "Incorporates a filter that has been configured
         separately.";
      uses filter-ref;
    }
  }
}

&lt;CODE ENDS&gt;</pre>
</div>
<figcaption><a href="#figure-23" class="selfRef">Figure 23</a>:
<a href="#name-yang-module-ietf-yang-push-2" class="selfRef">YANG module ietf-yang-push-2-config</a>
          </figcaption></figure>
</section>
</div>
</section>
</div>
<div id="capabilities-yang-data-model">
<section id="section-14">
      <h2 id="name-capabilities-yang-data-mode">
<a href="#section-14" class="section-number selfRef">14. </a><a href="#name-capabilities-yang-data-mode" class="section-name selfRef">Capabilities YANG Data Model</a>
      </h2>
<div id="yang-push-2-capabilities-tree">
<section id="section-14.1">
        <h3 id="name-ietf-yang-push-2-capabiliti">
<a href="#section-14.1" class="section-number selfRef">14.1. </a><a href="#name-ietf-yang-push-2-capabiliti" class="section-name selfRef">ietf-yang-push-2-capabilities YANG tree</a>
        </h3>
<p id="section-14.1-1">This section shows the tree output for ietf-yang-push-2-capabilities YANG module, which augments the ietf-system-capabilities YANG module <span>[<a href="#RFC9196" class="cite xref">RFC9196</a>]</span>.<a href="#section-14.1-1" class="pilcrow">¶</a></p>
<span id="name-yang-tree-for-yang-push-v2-ca"></span><figure id="figure-24">
          <div class="lang-yangtree sourcecode" id="section-14.1-2.1">
<pre>
module: ietf-yang-push-2-capabilities

  augment /sysc:system-capabilities:
    +--ro datastore-telemetry
       +--ro periodic-notifications-supported?   notification-support
       +--ro (update-period)?
       |  +--:(minimum-update-period)
       |  |  +--ro minimum-update-period?        uint32
       |  +--:(supported-update-period)
       |     +--ro supported-update-period*      uint32
       +--ro on-change-supported?                notification-support
       +--ro transport
          +--ro transport-capability* [transport-protocol]
             +--ro transport-protocol    identityref
             +--ro security-protocol?    identityref
             +--ro encoding-format*      identityref
  augment /sysc:system-capabilities/sysc:datastore-capabilities
            /sysc:per-node-capabilities:
    +--ro datastore-telemetry
       +--ro periodic-notifications-supported?   notification-support
       +--ro (update-period)?
       |  +--:(minimum-update-period)
       |  |  +--ro minimum-update-period?        uint32
       |  +--:(supported-update-period)
       |     +--ro supported-update-period*      uint32
       +--ro on-change-supported?                notification-support
</pre>
</div>
<figcaption><a href="#figure-24" class="selfRef">Figure 24</a>:
<a href="#name-yang-tree-for-yang-push-v2-ca" class="selfRef">YANG tree for YANG Push v2 Capabilities Module Tree Output</a>
          </figcaption></figure>
</section>
</div>
<div id="yang-push-2-yang-capabilities-module">
<section id="section-14.2">
        <h3 id="name-ietf-yang-push-2-capabilitie">
<a href="#section-14.2" class="section-number selfRef">14.2. </a><a href="#name-ietf-yang-push-2-capabilitie" class="section-name selfRef">ietf-yang-push-2-capabilities YANG Model</a>
        </h3>
<p id="section-14.2-1">This module imports typedefs from the yang-push-lite YANG module.<a href="#section-14.2-1" class="pilcrow">¶</a></p>
<p id="section-14.2-2">This module augments the ietf-system-capabilities YANG module <span>[<a href="#RFC9196" class="cite xref">RFC9196</a>]</span>.<a href="#section-14.2-2" class="pilcrow">¶</a></p>
<span id="name-yang-module-ietf-yang-push-2-"></span><figure id="figure-25">
          <div class="breakable lang-yang sourcecode" id="section-14.2-3.1">
<pre>&lt;CODE BEGINS&gt; file "ietf-yang-push-2-capabilities.yang#0.1.0"

module ietf-yang-push-2-capabilities {
  yang-version 1.1;
  namespace
    "urn:ietf:params:xml:ns:yang:ietf-yang-push-2-capabilities";
  prefix yp2ca;

  import ietf-system-capabilities {
    prefix sysc;
    reference
      "RFC 9196: YANG Modules Describing Capabilities for Systems
       and Datastore Update Notifications";
  }
  import ietf-yang-push-2 {
    prefix yp2;
    reference
      "RFC XXX: YANG Datastore Telemetry (YANG Push version 2)";
  }

  organization
    "IETF NETCONF (Network Configuration) Working Group";
  contact
    "WG Web:  &lt;https:/datatracker.ietf.org/wg/netconf/&gt;
     WG List: &lt;mailto:netconf@ietf.org&gt;

     Author:  Robert Wilton
              &lt;mailto:rwilton@cisco.com&gt;";
  description
    "This module contains YANG specifications for YANG-Push lite.

     The key words 'MUST', 'MUST NOT', 'REQUIRED', 'SHALL', 'SHALL
     NOT', 'SHOULD', 'SHOULD NOT', 'RECOMMENDED', 'NOT RECOMMENDED',
     'MAY', and 'OPTIONAL' in this document are to be interpreted as
     described in BCP 14 (RFC 2119) (RFC 8174) when, and only when,
     they appear in all capitals, as shown here.

     Copyright (c) 2025 IETF Trust and the persons identified as
     authors of the code.  All rights reserved.

     Redistribution and use in source and binary forms, with or
     without modification, is permitted pursuant to, and subject to
     the license terms contained in, the Revised BSD License set
     forth in Section 4.c of the IETF Trust's Legal Provisions
     Relating to IETF Documents
     (https://trustee.ietf.org/license-info).

     This version of this YANG module is part of RFC XXXX
     (https://www.rfc-editor.org/info/rfcXXXX); see the RFC itself
     for full legal notices.";

  revision 2024-11-11 {
    description
      "Initial revision.";
    reference
      "XXX: YANG Datastore Telemetry (YANG Push version 2)";
  }

  /*
   * IDENTITIES
   */

  identity security-protocol {
    description
      "Identity for security protocols.";
  }

  identity tls12 {
    base security-protocol;
    description
      "Indicates TLS Protocol Version 1.2. TLS 1.2 is obsolete,
       and thus it is NOT RECOMMENDED to enable this feature.";
    reference
      "RFC 5246: The Transport Layer Security (TLS) Protocol
                 Version 1.2";
  }

  identity tls13 {
    base security-protocol;
    description
      "Indicates TLS Protocol Version 1.3.";
    reference
      "RFC 8446: The Transport Layer Security (TLS)
                 Protocol Version 1.3";
  }

  identity dtls12 {
    base security-protocol;
    description
      "Indicates DTLS Protocol Version 1.2. TLS 1.2 is obsolete,
       and thus it is NOT RECOMMENDED to enable this feature.";
    reference
      "RFC 6347: The Datagram Transport Layer Security (TLS) Protocol
                 Version 1.2";
  }

  identity dtls13 {
    base security-protocol;
    description
      "Indicates DTLS Protocol Version 1.3.";
    reference
      "RFC 9147: The Datagram Transport Layer Security (TLS)
                 Protocol Version 1.3";
  }

  identity ssh {
    base security-protocol;
    description
      "Indicates SSH.";
  }


  grouping yp-lite-capabilities {
    description
      "Capabilities related to YANG Push Lite subscriptions
       and notifications";
    container datastore-telemetry {
      description
        "Capabilities related to YANG Push List subscriptions
         and notifications";
      typedef notification-support {
        type bits {
          bit config-changes {
            description
              "The publisher is capable of sending
               notifications for 'config true' nodes for the
               relevant scope and subscription type.";
          }
          bit state-changes {
            description
              "The publisher is capable of sending
               notifications for 'config false' nodes for the
               relevant scope and subscription type.";
          }
        }
        description
          "Type for defining whether 'on-change' or
           'periodic' notifications are supported for all data nodes,
           'config false' data nodes, 'config true' data nodes, or
           no data nodes.

           The bits config-changes or state-changes have no effect
           when they are set for a datastore or for a set of nodes
           that does not contain nodes with the indicated config
           value.  In those cases, the effect is the same as if no
           support was declared.  One example of this is indicating
           support for state-changes for a candidate datastore that
           has no effect.";
      }

      leaf periodic-notifications-supported {
        type notification-support;
        description
          "Specifies whether the publisher is capable of
           sending 'periodic' notifications for the selected
           data nodes, including any subtrees that may exist
           below them.";
        reference
          "RFC 8641: Subscription to YANG Notifications for
           Datastore Updates, 'periodic' subscription concept";
      }
      choice update-period {
        description
          "Supported update period value or values for
           'periodic' subscriptions.";
        leaf minimum-update-period {
          type uint32;
          units "centiseconds";
          description
            "Indicates the minimal update period that is
             supported for a 'periodic' subscription.

             A subscription request to the selected data nodes with
             a smaller period than what this leaf specifies is
             likely to result in a 'period-unsupported' error.";
        }
        leaf-list supported-update-period {
          type uint32;
          units "centiseconds";
          description
            "Supported update period values for a 'periodic'
             subscription.

             A subscription request to the selected data nodes with a
             period not included in the leaf-list will result in a
             'period-unsupported' error.";
        }
      }
      leaf on-change-supported {
        type notification-support;
        description
          "Specifies whether the publisher is capable of
           sending 'on-change' notifications for the selected
           data nodes and the subtree below them.";
      }
    }
  }

  grouping yp-lite-transport-capabilities {
    description
      "Capabilities related to transports supporting Yang Push Lite";
    container transport {
      description
        "Specifies capabilities related to YANG-Push transports.";
      list transport-capability {
        key "transport-protocol";
        description
          "Indicates a list of capabilities related to notification
                  transport.";
        leaf transport-protocol {
          type identityref {
            base yp2:transport;
          }
          description
            "Indicates supported transport protocol for YANG-Push.";
        }
        leaf security-protocol {
          type identityref {
            base security-protocol;
          }
          description
            "Indicates transport security protocol.";
        }
        leaf-list encoding-format {
          type identityref {
            base yp2:encoding;
          }
          description
            "Indicates supported encoding formats.";
        }
      }
    }
  }

  // YANG Push Lite Capabilities
  augment "/sysc:system-capabilities" {
    description
      "Adds system level capabilities for YANG Push Lite";
    uses yp-lite-capabilities;
  }

  augment "/sysc:system-capabilities/yp2ca:datastore-telemetry" {
    description
      "Adds system level Yang Push Lite transport capabilities";
    uses yp-lite-transport-capabilities;
  }

  augment "/sysc:system-capabilities/sysc:datastore-capabilities"
        + "/sysc:per-node-capabilities" {
    description
      "Add datastore and node-level capabilities";
    uses yp-lite-capabilities;
  }
}

&lt;CODE ENDS&gt;</pre>
</div>
<figcaption><a href="#figure-25" class="selfRef">Figure 25</a>:
<a href="#name-yang-module-ietf-yang-push-2-" class="selfRef">YANG module ietf-yang-push-2-capabilities</a>
          </figcaption></figure>
</section>
</div>
</section>
</div>
<div id="security">
<section id="section-15">
      <h2 id="name-security-considerations">
<a href="#section-15" class="section-number selfRef">15. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-15-1">With configured subscriptions, one or more publishers could be used to overwhelm a receiver.  To counter this, notification messages <span class="bcp14">SHOULD NOT</span> be sent to any receiver that does not support this specification.  Receivers that do not want notification messages need only terminate or refuse any transport sessions from the publisher.<a href="#section-15-1" class="pilcrow">¶</a></p>
<p id="section-15-2">When a receiver of a configured subscription gets a new "subscription-started" message for a known subscription where it is already consuming events, it may indicate that an attacker has done something that has momentarily disrupted receiver connectivity. <strong>TODO - Do we still want this paragraph?</strong>.<a href="#section-15-2" class="pilcrow">¶</a></p>
<p id="section-15-3">For dynamic subscriptions, implementations need to protect against malicious or buggy subscribers that may send a large number of "establish-subscription" requests and thereby use up system resources.  To cover this possibility, operators <span class="bcp14">SHOULD</span> monitor for such cases and, if discovered, take remedial action to limit the resources used, such as suspending or terminating a subset of the subscriptions or, if the underlying transport is session based, terminating the underlying transport session.<a href="#section-15-3" class="pilcrow">¶</a></p>
<p id="section-15-4">Using DNS names for configured subscription's receiver "name" lookups can cause situations where the name resolves differently than expected on the publisher, so the recipient would be different than expected.<a href="#section-15-4" class="pilcrow">¶</a></p>
<div id="use-of-yang-push-v2-with-nacm">
<section id="section-15.1">
        <h3 id="name-use-of-yang-push-v2-with-na">
<a href="#section-15.1" class="section-number selfRef">15.1. </a><a href="#name-use-of-yang-push-v2-with-na" class="section-name selfRef">Use of YANG Push v2 with NACM</a>
        </h3>
<p id="section-15.1-1"><strong>TODO, do we even need this section?</strong><a href="#section-15.1-1" class="pilcrow">¶</a></p>
<p id="section-15.1-2">This specification <span class="bcp14">MAY</span> be used with access control tools, such as NACM <span>[<a href="#RFC8341" class="cite xref">RFC8341</a>]</span>.  Please refer to that specification for normative guidance of how NACM applies.<a href="#section-15.1-2" class="pilcrow">¶</a></p>
<p id="section-15.1-3">For informative purposes, please note that NACM can be used:<a href="#section-15.1-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-15.1-4.1">
            <p id="section-15.1-4.1.1">NACM can be used to control access to the data nodes and RPCs defined in the YANG modules defined in this document.<a href="#section-15.1-4.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-15.1-4.2">
            <p id="section-15.1-4.2.1">NACM can be used to control access to the data included in the YANG <em>update</em> notifications.<a href="#section-15.1-4.2.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="receiver-authorization">
<section id="section-15.2">
        <h3 id="name-receiver-authorization">
<a href="#section-15.2" class="section-number selfRef">15.2. </a><a href="#name-receiver-authorization" class="section-name selfRef">Receiver Authorization</a>
        </h3>
<p id="section-15.2-1"><strong>TODO Relax when access control must be checked.</strong><a href="#section-15.2-1" class="pilcrow">¶</a></p>
<p id="section-15.2-2"><strong>TODO Consider if this is the best place in the document, but this text needs to be updated regardless.</strong><a href="#section-15.2-2" class="pilcrow">¶</a></p>
<p id="section-15.2-3">A receiver of subscription data <span class="bcp14">MUST</span> only be sent updates for which it has proper authorization.  A publisher <span class="bcp14">MUST</span> ensure that no unauthorized data is included in push updates.  To do so, it needs to apply all corresponding checks applicable at the time of a specific pushed update and, if necessary, silently remove any unauthorized data from datastore subtrees.  This enables YANG data that is pushed based on subscriptions to be authorized in a way that is equivalent to a regular data retrieval ("get") operation.<a href="#section-15.2-3" class="pilcrow">¶</a></p>
<p id="section-15.2-4">Each "push-update" and "push-change-update" <span class="bcp14">MUST</span> have access control applied, as depicted in Figure 5.  This includes validating that read access is permitted for any new objects selected since the last notification message was sent to a particular receiver.  A publisher <span class="bcp14">MUST</span> silently omit data nodes from the results that the client is not authorized to see.  To accomplish this, implementations <span class="bcp14">SHOULD</span> apply the conceptual authorization model of <span>[<a href="#RFC8341" class="cite xref">RFC8341</a>]</span>, specifically Section 3.2.4, extended to apply analogously to data nodes included in notifications, not just &lt;rpc-reply&gt; messages sent in response to
&lt;get&gt; and &lt;get-config&gt; requests.<a href="#section-15.2-4" class="pilcrow">¶</a></p>
<span id="name-access-control-for-push-upd"></span><figure id="figure-26">
          <div class="alignLeft art-text artwork" id="section-15.2-5.1">
<pre>
                     +-----------------+      +--------------------+
  push-update or --&gt; | datastore node  |  yes | add datastore node |
 push-change-update  | access allowed? | ---&gt; | to update record   |
                     +-----------------+      +--------------------+
</pre>
</div>
<figcaption><a href="#figure-26" class="selfRef">Figure 26</a>:
<a href="#name-access-control-for-push-upd" class="selfRef">Access Control for Push Updates</a>
          </figcaption></figure>
<p id="section-15.2-6">A publisher <span class="bcp14">MUST</span> allow for the possibility that a subscription's selection filter references nonexistent data or data that a receiver is not allowed to access.  Such support permits a receiver the ability to monitor the entire lifecycle of some datastore tree without needing to explicitly enumerate every individual datastore node.  If, after access control has been applied, there are no objects remaining in an update record, then the effect varies given if the subscription is a periodic or on-change subscription.  For a periodic subscription, an empty "push-update" notification <span class="bcp14">MUST</span> be sent, so that clients do not get confused into thinking that an update was lost.  For an on-change subscription, a "push-update" notification <span class="bcp14">MUST NOT</span> be sent, so that clients remain unaware of changes made to nodes they don't have read-access for.<a href="#section-15.2-6" class="pilcrow">¶</a></p>
<p id="section-15.2-7">A publisher <span class="bcp14">MAY</span> choose to reject an "establish-subscription" request that selects nonexistent data or data that a receiver is not allowed to access.  The error identity "unchanging-selection" <span class="bcp14">SHOULD</span> be returned as the reason for the rejection.  In addition, a publisher <span class="bcp14">MAY</span> choose to terminate a dynamic subscription or suspend a configured receiver when the authorization privileges of a receiver change or the access controls for subscribed objects change.  In that case, the publisher <span class="bcp14">SHOULD</span> include the error identity "unchanging-selection" as the reason when sending the "subscription-terminated" or "subscription-suspended" notification, respectively.  Such a capability enables the publisher to avoid having to support
continuous and total filtering of a subscription's content for every update record.  It also reduces the possibility of leakage of access-controlled objects.<a href="#section-15.2-7" class="pilcrow">¶</a></p>
<p id="section-15.2-8">If read access into previously accessible nodes has been lost due to a receiver permissions change, this <span class="bcp14">SHOULD</span> be reported as a patch "delete" operation for on-change subscriptions.  If not capable of handling such receiver permission changes with such a "delete", publisher implementations <span class="bcp14">MUST</span> force dynamic subscription re-establishment or configured subscription reinitialization so that appropriate filtering is installed.<a href="#section-15.2-8" class="pilcrow">¶</a></p>
</section>
</div>
<div id="yang-module-security-considerations">
<section id="section-15.3">
        <h3 id="name-yang-module-security-consid">
<a href="#section-15.3" class="section-number selfRef">15.3. </a><a href="#name-yang-module-security-consid" class="section-name selfRef">YANG Module Security Considerations</a>
        </h3>
<p id="section-15.3-1">This section is modeled after the template described in Section 3.7.1 of <span>[<a href="#I-D.draft-ietf-netmod-rfc8407bis" class="cite xref">I-D.draft-ietf-netmod-rfc8407bis</a>]</span>.<a href="#section-15.3-1" class="pilcrow">¶</a></p>
<p id="section-15.3-2">The "ietf-yang-push-2" YANG module defines a data model that is designed to be accessed via YANG-based management protocols, such as NETCONF <span>[<a href="#RFC6241" class="cite xref">RFC6241</a>]</span> and RESTCONF <span>[<a href="#RFC8040" class="cite xref">RFC8040</a>]</span>. These protocols have to use a secure transport layer (e.g., SSH <span>[<a href="#RFC4252" class="cite xref">RFC4252</a>]</span>, TLS <span>[<a href="#RFC8446" class="cite xref">RFC8446</a>]</span>, and QUIC <span>[<a href="#RFC9000" class="cite xref">RFC9000</a>]</span>) and have to use mutual authentication.<a href="#section-15.3-2" class="pilcrow">¶</a></p>
<p id="section-15.3-3">The Network Configuration Access Control Model (NACM) <span>[<a href="#RFC8341" class="cite xref">RFC8341</a>]</span> provides the means to restrict access for particular NETCONF or RESTCONF users to a pre-configured subset of all available NETCONF or RESTCONF protocol operations and content.<a href="#section-15.3-3" class="pilcrow">¶</a></p>
<p id="section-15.3-4">There are a number of data nodes defined in this YANG module that are writable/creatable/deletable (i.e., "config true", which is the default).  All writable data nodes are likely to be reasonably sensitive or vulnerable in some network environments.  Write operations (e.g., edit-config) and delete operations to these data nodes without proper protection or authentication can have a negative effect on network operations.  The following subtrees and data nodes have particular sensitivities/vulnerabilities:<a href="#section-15.3-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-15.3-5.1">
            <p id="section-15.3-5.1.1">There are no particularly sensitive writable data nodes.<a href="#section-15.3-5.1.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-15.3-6">Some of the readable data nodes in this YANG module may be considered sensitive or vulnerable in some network environments.  It is thus important to control read access (e.g., via get, get-config, or notification) to these data nodes. Specifically, the following subtrees and data nodes have particular sensitivities/vulnerabilities:<a href="#section-15.3-6" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-15.3-7.1">
            <p id="section-15.3-7.1.1">There are no particularly sensitive readable data nodes.<a href="#section-15.3-7.1.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-15.3-8">Some of the RPC or action operations in this YANG module may be considered sensitive or vulnerable in some network environments. It is thus important to control access to these operations. Specifically, the following operations have particular sensitivities/vulnerabilities:<a href="#section-15.3-8" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-15.3-9.1">
            <p id="section-15.3-9.1.1">kill-subscription - this RPC operation allows the caller to kill any dynamic subscription, even those created via other users, or other transport sessions.<a href="#section-15.3-9.1.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="iana-considerations">
<section id="section-16">
      <h2 id="name-iana-considerations">
<a href="#section-16" class="section-number selfRef">16. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<div id="namespace-uri-registrations">
<section id="section-16.1">
        <h3 id="name-namespace-uri-registrations">
<a href="#section-16.1" class="section-number selfRef">16.1. </a><a href="#name-namespace-uri-registrations" class="section-name selfRef">Namespace URI registrations</a>
        </h3>
<p id="section-16.1-1">This document registers the following namespace URI in the "IETF XML Registry" <span>[<a href="#RFC3688" class="cite xref">RFC3688</a>]</span>:<a href="#section-16.1-1" class="pilcrow">¶</a></p>
<span id="name-namespace-uri-registrations-2"></span><table class="center" id="table-1">
          <caption>
<a href="#table-1" class="selfRef">Table 1</a>:
<a href="#name-namespace-uri-registrations-2" class="selfRef">Namespace URI registrations</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">URI</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">urn:ietf:params:xml:ns:yang:ietf-yang-push-2</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">urn:ietf:params:xml:ns:yang:ietf-yang-push-2-config</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">urn:ietf:params:xml:ns:yang:ietf-yang-push-2-capabilities</td>
            </tr>
          </tbody>
        </table>
<p id="section-16.1-3">For all registrations:<a href="#section-16.1-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-16.1-4.1">
            <p id="section-16.1-4.1.1">Registrant Contact: The IESG.<a href="#section-16.1-4.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-16.1-4.2">
            <p id="section-16.1-4.2.1">XML: N/A; the requested URI is an XML namespace.<a href="#section-16.1-4.2.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="yang-module-name-registrations">
<section id="section-17">
      <h2 id="name-yang-module-name-registrati">
<a href="#section-17" class="section-number selfRef">17. </a><a href="#name-yang-module-name-registrati" class="section-name selfRef">YANG Module Name registrations</a>
      </h2>
<p id="section-17-1">This document registers the following YANG modules in the "YANG Module Names" registry <span>[<a href="#RFC6020" class="cite xref">RFC6020</a>]</span>:<a href="#section-17-1" class="pilcrow">¶</a></p>
<span id="name-yang-module-name-registratio"></span><table class="center" id="table-2">
        <caption>
<a href="#table-2" class="selfRef">Table 2</a>:
<a href="#name-yang-module-name-registratio" class="selfRef">YANG Module Name Registrations</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" rowspan="1" colspan="1">Name</th>
            <th class="text-left" rowspan="1" colspan="1">Namespace</th>
            <th class="text-left" rowspan="1" colspan="1">Prefix</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">ietf-yang-push-2</td>
            <td class="text-left" rowspan="1" colspan="1">urn:ietf:params:xml:ns:yang:ietf-yang-push-2</td>
            <td class="text-left" rowspan="1" colspan="1">ypl</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">ietf-yang-push-2-config</td>
            <td class="text-left" rowspan="1" colspan="1">urn:ietf:params:xml:ns:yang:ietf-yang-push-2-config</td>
            <td class="text-left" rowspan="1" colspan="1">yplco</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">ietf-yang-push-2-capabilities</td>
            <td class="text-left" rowspan="1" colspan="1">urn:ietf:params:xml:ns:yang:ietf-yang-push-2-capabilities</td>
            <td class="text-left" rowspan="1" colspan="1">yplca</td>
          </tr>
        </tbody>
      </table>
<p id="section-17-3">For all registration the reference is "RFC XXXX".<a href="#section-17-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="acknowledgments">
<section id="section-18">
      <h2 id="name-acknowledgments">
<a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="section-18-1">This initial draft is early work is based on discussions with various folk, particularly Thomas Graf, Holger Keller, Dan Voyer, Nils Warnke, and Alex Huang Feng; but also wider conversations that include: Benoit Claise, Pierre Francois, Paolo Lucente, Jean Quilbeuf, among others.<a href="#section-18-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="contributors">
<section id="section-19">
      <h2 id="name-contributors">
<a href="#name-contributors" class="section-name selfRef">Contributors</a>
      </h2>
<p id="section-19-1">The following individuals have actively contributed to this draft and the YANG Push Solution.<a href="#section-19-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-19-2.1">
          <p id="section-19-2.1.1">Dan Voyer<a href="#section-19-2.1.1" class="pilcrow">¶</a></p>
</li>
      </ul>
</section>
</div>
<div id="sec-combined-references">
<section id="section-20">
      <h2 id="name-references">
<a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<div id="sec-normative-references">
<section id="section-20.1">
        <h3 id="name-normative-references">
<a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="BCP14">[BCP14]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.draft-ietf-netconf-notif-envelope">[I-D.draft-ietf-netconf-notif-envelope]</dt>
        <dd>
<span class="refAuthor">Feng, A. H.</span>, <span class="refAuthor">Francois, P.</span>, <span class="refAuthor">Graf, T.</span>, and <span class="refAuthor">B. Claise</span>, <span class="refTitle">"Extensible YANG Model for YANG-Push Notifications"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-netconf-notif-envelope-03</span>, <time datetime="2025-10-20" class="refDate">20 October 2025</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-netconf-notif-envelope-03">https://datatracker.ietf.org/doc/html/draft-ietf-netconf-notif-envelope-03</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2474">[RFC2474]</dt>
        <dd>
<span class="refAuthor">Nichols, K.</span>, <span class="refAuthor">Blake, S.</span>, <span class="refAuthor">Baker, F.</span>, and <span class="refAuthor">D. Black</span>, <span class="refTitle">"Definition of the Differentiated Services Field (DS Field) in the IPv4 and IPv6 Headers"</span>, <span class="seriesInfo">RFC 2474</span>, <span class="seriesInfo">DOI 10.17487/RFC2474</span>, <time datetime="1998-12" class="refDate">December 1998</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2474">https://www.rfc-editor.org/rfc/rfc2474</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6241">[RFC6241]</dt>
        <dd>
<span class="refAuthor">Enns, R., Ed.</span>, <span class="refAuthor">Bjorklund, M., Ed.</span>, <span class="refAuthor">Schoenwaelder, J., Ed.</span>, and <span class="refAuthor">A. Bierman, Ed.</span>, <span class="refTitle">"Network Configuration Protocol (NETCONF)"</span>, <span class="seriesInfo">RFC 6241</span>, <span class="seriesInfo">DOI 10.17487/RFC6241</span>, <time datetime="2011-06" class="refDate">June 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6241">https://www.rfc-editor.org/rfc/rfc6241</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6991">[RFC6991]</dt>
        <dd>
<span class="refAuthor">Schoenwaelder, J., Ed.</span>, <span class="refTitle">"Common YANG Data Types"</span>, <span class="seriesInfo">RFC 6991</span>, <span class="seriesInfo">DOI 10.17487/RFC6991</span>, <time datetime="2013-07" class="refDate">July 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6991">https://www.rfc-editor.org/rfc/rfc6991</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7950">[RFC7950]</dt>
        <dd>
<span class="refAuthor">Bjorklund, M., Ed.</span>, <span class="refTitle">"The YANG 1.1 Data Modeling Language"</span>, <span class="seriesInfo">RFC 7950</span>, <span class="seriesInfo">DOI 10.17487/RFC7950</span>, <time datetime="2016-08" class="refDate">August 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7950">https://www.rfc-editor.org/rfc/rfc7950</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7951">[RFC7951]</dt>
        <dd>
<span class="refAuthor">Lhotka, L.</span>, <span class="refTitle">"JSON Encoding of Data Modeled with YANG"</span>, <span class="seriesInfo">RFC 7951</span>, <span class="seriesInfo">DOI 10.17487/RFC7951</span>, <time datetime="2016-08" class="refDate">August 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7951">https://www.rfc-editor.org/rfc/rfc7951</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8340">[RFC8340]</dt>
        <dd>
<span class="refAuthor">Bjorklund, M.</span> and <span class="refAuthor">L. Berger, Ed.</span>, <span class="refTitle">"YANG Tree Diagrams"</span>, <span class="seriesInfo">BCP 215</span>, <span class="seriesInfo">RFC 8340</span>, <span class="seriesInfo">DOI 10.17487/RFC8340</span>, <time datetime="2018-03" class="refDate">March 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8340">https://www.rfc-editor.org/rfc/rfc8340</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8341">[RFC8341]</dt>
        <dd>
<span class="refAuthor">Bierman, A.</span> and <span class="refAuthor">M. Bjorklund</span>, <span class="refTitle">"Network Configuration Access Control Model"</span>, <span class="seriesInfo">STD 91</span>, <span class="seriesInfo">RFC 8341</span>, <span class="seriesInfo">DOI 10.17487/RFC8341</span>, <time datetime="2018-03" class="refDate">March 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8341">https://www.rfc-editor.org/rfc/rfc8341</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8342">[RFC8342]</dt>
        <dd>
<span class="refAuthor">Bjorklund, M.</span>, <span class="refAuthor">Schoenwaelder, J.</span>, <span class="refAuthor">Shafer, P.</span>, <span class="refAuthor">Watsen, K.</span>, and <span class="refAuthor">R. Wilton</span>, <span class="refTitle">"Network Management Datastore Architecture (NMDA)"</span>, <span class="seriesInfo">RFC 8342</span>, <span class="seriesInfo">DOI 10.17487/RFC8342</span>, <time datetime="2018-03" class="refDate">March 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8342">https://www.rfc-editor.org/rfc/rfc8342</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8525">[RFC8525]</dt>
        <dd>
<span class="refAuthor">Bierman, A.</span>, <span class="refAuthor">Bjorklund, M.</span>, <span class="refAuthor">Schoenwaelder, J.</span>, <span class="refAuthor">Watsen, K.</span>, and <span class="refAuthor">R. Wilton</span>, <span class="refTitle">"YANG Library"</span>, <span class="seriesInfo">RFC 8525</span>, <span class="seriesInfo">DOI 10.17487/RFC8525</span>, <time datetime="2019-03" class="refDate">March 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8525">https://www.rfc-editor.org/rfc/rfc8525</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8529">[RFC8529]</dt>
        <dd>
<span class="refAuthor">Berger, L.</span>, <span class="refAuthor">Hopps, C.</span>, <span class="refAuthor">Lindem, A.</span>, <span class="refAuthor">Bogdanovic, D.</span>, and <span class="refAuthor">X. Liu</span>, <span class="refTitle">"YANG Data Model for Network Instances"</span>, <span class="seriesInfo">RFC 8529</span>, <span class="seriesInfo">DOI 10.17487/RFC8529</span>, <time datetime="2019-03" class="refDate">March 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8529">https://www.rfc-editor.org/rfc/rfc8529</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8791">[RFC8791]</dt>
        <dd>
<span class="refAuthor">Bierman, A.</span>, <span class="refAuthor">Björklund, M.</span>, and <span class="refAuthor">K. Watsen</span>, <span class="refTitle">"YANG Data Structure Extensions"</span>, <span class="seriesInfo">RFC 8791</span>, <span class="seriesInfo">DOI 10.17487/RFC8791</span>, <time datetime="2020-06" class="refDate">June 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8791">https://www.rfc-editor.org/rfc/rfc8791</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9196">[RFC9196]</dt>
        <dd>
<span class="refAuthor">Lengyel, B.</span>, <span class="refAuthor">Clemm, A.</span>, and <span class="refAuthor">B. Claise</span>, <span class="refTitle">"YANG Modules Describing Capabilities for Systems and Datastore Update Notifications"</span>, <span class="seriesInfo">RFC 9196</span>, <span class="seriesInfo">DOI 10.17487/RFC9196</span>, <time datetime="2022-02" class="refDate">February 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9196">https://www.rfc-editor.org/rfc/rfc9196</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9254">[RFC9254]</dt>
        <dd>
<span class="refAuthor">Veillette, M., Ed.</span>, <span class="refAuthor">Petrov, I., Ed.</span>, <span class="refAuthor">Pelov, A.</span>, <span class="refAuthor">Bormann, C.</span>, and <span class="refAuthor">M. Richardson</span>, <span class="refTitle">"Encoding of Data Modeled with YANG in the Concise Binary Object Representation (CBOR)"</span>, <span class="seriesInfo">RFC 9254</span>, <span class="seriesInfo">DOI 10.17487/RFC9254</span>, <time datetime="2022-07" class="refDate">July 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9254">https://www.rfc-editor.org/rfc/rfc9254</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9485">[RFC9485]</dt>
        <dd>
<span class="refAuthor">Bormann, C.</span> and <span class="refAuthor">T. Bray</span>, <span class="refTitle">"I-Regexp: An Interoperable Regular Expression Format"</span>, <span class="seriesInfo">RFC 9485</span>, <span class="seriesInfo">DOI 10.17487/RFC9485</span>, <time datetime="2023-10" class="refDate">October 2023</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9485">https://www.rfc-editor.org/rfc/rfc9485</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9595">[RFC9595]</dt>
      <dd>
<span class="refAuthor">Veillette, M., Ed.</span>, <span class="refAuthor">Pelov, A., Ed.</span>, <span class="refAuthor">Petrov, I., Ed.</span>, <span class="refAuthor">Bormann, C.</span>, and <span class="refAuthor">M. Richardson</span>, <span class="refTitle">"YANG Schema Item iDentifier (YANG SID)"</span>, <span class="seriesInfo">RFC 9595</span>, <span class="seriesInfo">DOI 10.17487/RFC9595</span>, <time datetime="2024-07" class="refDate">July 2024</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9595">https://www.rfc-editor.org/rfc/rfc9595</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
<div id="sec-informative-references">
<section id="section-20.2">
        <h3 id="name-informative-references">
<a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="Consistency">[Consistency]</dt>
        <dd>
<span class="refAuthor">Wikipedia</span>, <span class="refTitle">"Consistency (database systems)"</span>, <span>&lt;<a href="https://en.wikipedia.org/wiki/Consistency_(database_systems)">https://en.wikipedia.org/wiki/Consistency_(database_systems)</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="EventualConsistency">[EventualConsistency]</dt>
        <dd>
<span class="refAuthor">Rouse, M.</span>, <span class="refTitle">"Eventual Consistency"</span>, <span>&lt;<a href="https://www.techopedia.com/definition/29165/eventual-consistency">https://www.techopedia.com/definition/29165/eventual-consistency</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="gNMI">[gNMI]</dt>
        <dd>
<span class="refAuthor">OpenConfig</span>, <span class="refTitle">"gRPC Network Management Interface (gNMI)"</span>, <span>&lt;<a href="https://github.com/openconfig/reference/blob/master/rpc/gnmi/gnmi-specification.md">https://github.com/openconfig/reference/blob/master/rpc/gnmi/gnmi-specification.md</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.draft-ietf-netconf-distributed-notif">[I-D.draft-ietf-netconf-distributed-notif]</dt>
        <dd>
<span class="refAuthor">Zhou, T.</span>, <span class="refAuthor">Zheng, G.</span>, <span class="refAuthor">Voit, E.</span>, <span class="refAuthor">Graf, T.</span>, and <span class="refAuthor">P. Francois</span>, <span class="refTitle">"Subscription to Notifications in a Distributed Architecture"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-netconf-distributed-notif-16</span>, <time datetime="2025-10-19" class="refDate">19 October 2025</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-netconf-distributed-notif-16">https://datatracker.ietf.org/doc/html/draft-ietf-netconf-distributed-notif-16</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.draft-ietf-netconf-https-notif">[I-D.draft-ietf-netconf-https-notif]</dt>
        <dd>
<span class="refAuthor">Jethanandani, M.</span> and <span class="refAuthor">K. Watsen</span>, <span class="refTitle">"An HTTPS-based Transport for YANG Notifications"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-netconf-https-notif-15</span>, <time datetime="2024-02-01" class="refDate">1 February 2024</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-netconf-https-notif-15">https://datatracker.ietf.org/doc/html/draft-ietf-netconf-https-notif-15</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.draft-ietf-netconf-udp-notif">[I-D.draft-ietf-netconf-udp-notif]</dt>
        <dd>
<span class="refAuthor">Feng, A. H.</span>, <span class="refAuthor">Francois, P.</span>, <span class="refAuthor">Zhou, T.</span>, <span class="refAuthor">Graf, T.</span>, and <span class="refAuthor">P. Lucente</span>, <span class="refTitle">"UDP-based Transport for Configured Subscriptions"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-netconf-udp-notif-24</span>, <time datetime="2025-11-20" class="refDate">20 November 2025</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-netconf-udp-notif-24">https://datatracker.ietf.org/doc/html/draft-ietf-netconf-udp-notif-24</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.draft-ietf-netmod-rfc8407bis">[I-D.draft-ietf-netmod-rfc8407bis]</dt>
        <dd>
<span class="refAuthor">Bierman, A.</span>, <span class="refAuthor">Boucadair, M.</span>, and <span class="refAuthor">Q. Wu</span>, <span class="refTitle">"Guidelines for Authors and Reviewers of Documents Containing YANG Data Models"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-netmod-rfc8407bis-28</span>, <time datetime="2025-06-05" class="refDate">5 June 2025</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-netmod-rfc8407bis-28">https://datatracker.ietf.org/doc/html/draft-ietf-netmod-rfc8407bis-28</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.draft-netana-netconf-yp-transport-capabilities">[I-D.draft-netana-netconf-yp-transport-capabilities]</dt>
        <dd>
<span class="refAuthor">Wu, Q.</span>, <span class="refAuthor">Ma, Q.</span>, <span class="refAuthor">Feng, A. H.</span>, and <span class="refAuthor">T. Graf</span>, <span class="refTitle">"YANG Notification Transport Capabilities"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-netana-netconf-yp-transport-capabilities-01</span>, <time datetime="2025-01-17" class="refDate">17 January 2025</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-netana-netconf-yp-transport-capabilities-01">https://datatracker.ietf.org/doc/html/draft-netana-netconf-yp-transport-capabilities-01</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-netconf-distributed-notif">[I-D.ietf-netconf-distributed-notif]</dt>
        <dd>
<span class="refAuthor">Zhou, T.</span>, <span class="refAuthor">Zheng, G.</span>, <span class="refAuthor">Voit, E.</span>, <span class="refAuthor">Graf, T.</span>, and <span class="refAuthor">P. Francois</span>, <span class="refTitle">"Subscription to Notifications in a Distributed Architecture"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-netconf-distributed-notif-16</span>, <time datetime="2025-10-19" class="refDate">19 October 2025</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-netconf-distributed-notif-16">https://datatracker.ietf.org/doc/html/draft-ietf-netconf-distributed-notif-16</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-nmop-network-anomaly-architecture">[I-D.ietf-nmop-network-anomaly-architecture]</dt>
        <dd>
<span class="refAuthor">Graf, T.</span>, <span class="refAuthor">Du, W.</span>, <span class="refAuthor">Francois, P.</span>, and <span class="refAuthor">A. H. Feng</span>, <span class="refTitle">"A Framework for a Network Anomaly Detection Architecture"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-nmop-network-anomaly-architecture-06</span>, <time datetime="2025-11-21" class="refDate">21 November 2025</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-nmop-network-anomaly-architecture-06">https://datatracker.ietf.org/doc/html/draft-ietf-nmop-network-anomaly-architecture-06</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-nmop-yang-message-broker-integration">[I-D.ietf-nmop-yang-message-broker-integration]</dt>
        <dd>
<span class="refAuthor">Graf, T.</span> and <span class="refAuthor">A. Elhassany</span>, <span class="refTitle">"An Architecture for YANG-Push to Message Broker Integration"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-nmop-yang-message-broker-integration-09</span>, <time datetime="2025-10-20" class="refDate">20 October 2025</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-nmop-yang-message-broker-integration-09">https://datatracker.ietf.org/doc/html/draft-ietf-nmop-yang-message-broker-integration-09</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.tgraf-netconf-notif-sequencing">[I-D.tgraf-netconf-notif-sequencing]</dt>
        <dd>
<span class="refAuthor">Graf, T.</span>, <span class="refAuthor">Quilbeuf, J.</span>, and <span class="refAuthor">A. H. Feng</span>, <span class="refTitle">"Support of Hostname and Sequencing in YANG Notifications"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-tgraf-netconf-notif-sequencing-06</span>, <time datetime="2024-06-29" class="refDate">29 June 2024</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-tgraf-netconf-notif-sequencing-06">https://datatracker.ietf.org/doc/html/draft-tgraf-netconf-notif-sequencing-06</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.tgraf-netconf-yang-push-observation-time">[I-D.tgraf-netconf-yang-push-observation-time]</dt>
        <dd>
<span class="refAuthor">Graf, T.</span>, <span class="refAuthor">Claise, B.</span>, and <span class="refAuthor">A. H. Feng</span>, <span class="refTitle">"Support of Observation Timestamp in YANG-Push Notifications"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-tgraf-netconf-yang-push-observation-time-03</span>, <time datetime="2024-12-14" class="refDate">14 December 2024</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-tgraf-netconf-yang-push-observation-time-03">https://datatracker.ietf.org/doc/html/draft-tgraf-netconf-yang-push-observation-time-03</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="Kafka">[Kafka]</dt>
        <dd>
<span class="refAuthor">Apache.org</span>, <span class="refTitle">"Apache Kafka"</span>, <span>&lt;<a href="https://kafka.apache.org/">https://kafka.apache.org/</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3411">[RFC3411]</dt>
        <dd>
<span class="refAuthor">Harrington, D.</span>, <span class="refAuthor">Presuhn, R.</span>, and <span class="refAuthor">B. Wijnen</span>, <span class="refTitle">"An Architecture for Describing Simple Network Management Protocol (SNMP) Management Frameworks"</span>, <span class="seriesInfo">STD 62</span>, <span class="seriesInfo">RFC 3411</span>, <span class="seriesInfo">DOI 10.17487/RFC3411</span>, <time datetime="2002-12" class="refDate">December 2002</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc3411">https://www.rfc-editor.org/rfc/rfc3411</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3688">[RFC3688]</dt>
        <dd>
<span class="refAuthor">Mealling, M.</span>, <span class="refTitle">"The IETF XML Registry"</span>, <span class="seriesInfo">BCP 81</span>, <span class="seriesInfo">RFC 3688</span>, <span class="seriesInfo">DOI 10.17487/RFC3688</span>, <time datetime="2004-01" class="refDate">January 2004</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc3688">https://www.rfc-editor.org/rfc/rfc3688</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4252">[RFC4252]</dt>
        <dd>
<span class="refAuthor">Ylonen, T.</span> and <span class="refAuthor">C. Lonvick, Ed.</span>, <span class="refTitle">"The Secure Shell (SSH) Authentication Protocol"</span>, <span class="seriesInfo">RFC 4252</span>, <span class="seriesInfo">DOI 10.17487/RFC4252</span>, <time datetime="2006-01" class="refDate">January 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc4252">https://www.rfc-editor.org/rfc/rfc4252</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5277">[RFC5277]</dt>
        <dd>
<span class="refAuthor">Chisholm, S.</span> and <span class="refAuthor">H. Trevino</span>, <span class="refTitle">"NETCONF Event Notifications"</span>, <span class="seriesInfo">RFC 5277</span>, <span class="seriesInfo">DOI 10.17487/RFC5277</span>, <time datetime="2008-07" class="refDate">July 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc5277">https://www.rfc-editor.org/rfc/rfc5277</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6020">[RFC6020]</dt>
        <dd>
<span class="refAuthor">Bjorklund, M., Ed.</span>, <span class="refTitle">"YANG - A Data Modeling Language for the Network Configuration Protocol (NETCONF)"</span>, <span class="seriesInfo">RFC 6020</span>, <span class="seriesInfo">DOI 10.17487/RFC6020</span>, <time datetime="2010-10" class="refDate">October 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6020">https://www.rfc-editor.org/rfc/rfc6020</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7049">[RFC7049]</dt>
        <dd>
<span class="refAuthor">Bormann, C.</span> and <span class="refAuthor">P. Hoffman</span>, <span class="refTitle">"Concise Binary Object Representation (CBOR)"</span>, <span class="seriesInfo">RFC 7049</span>, <span class="seriesInfo">DOI 10.17487/RFC7049</span>, <time datetime="2013-10" class="refDate">October 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7049">https://www.rfc-editor.org/rfc/rfc7049</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7540">[RFC7540]</dt>
        <dd>
<span class="refAuthor">Belshe, M.</span>, <span class="refAuthor">Peon, R.</span>, and <span class="refAuthor">M. Thomson, Ed.</span>, <span class="refTitle">"Hypertext Transfer Protocol Version 2 (HTTP/2)"</span>, <span class="seriesInfo">RFC 7540</span>, <span class="seriesInfo">DOI 10.17487/RFC7540</span>, <time datetime="2015-05" class="refDate">May 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7540">https://www.rfc-editor.org/rfc/rfc7540</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8040">[RFC8040]</dt>
        <dd>
<span class="refAuthor">Bierman, A.</span>, <span class="refAuthor">Bjorklund, M.</span>, and <span class="refAuthor">K. Watsen</span>, <span class="refTitle">"RESTCONF Protocol"</span>, <span class="seriesInfo">RFC 8040</span>, <span class="seriesInfo">DOI 10.17487/RFC8040</span>, <time datetime="2017-01" class="refDate">January 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8040">https://www.rfc-editor.org/rfc/rfc8040</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8071">[RFC8071]</dt>
        <dd>
<span class="refAuthor">Watsen, K.</span>, <span class="refTitle">"NETCONF Call Home and RESTCONF Call Home"</span>, <span class="seriesInfo">RFC 8071</span>, <span class="seriesInfo">DOI 10.17487/RFC8071</span>, <time datetime="2017-02" class="refDate">February 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8071">https://www.rfc-editor.org/rfc/rfc8071</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8072">[RFC8072]</dt>
        <dd>
<span class="refAuthor">Bierman, A.</span>, <span class="refAuthor">Bjorklund, M.</span>, and <span class="refAuthor">K. Watsen</span>, <span class="refTitle">"YANG Patch Media Type"</span>, <span class="seriesInfo">RFC 8072</span>, <span class="seriesInfo">DOI 10.17487/RFC8072</span>, <time datetime="2017-02" class="refDate">February 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8072">https://www.rfc-editor.org/rfc/rfc8072</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8259">[RFC8259]</dt>
        <dd>
<span class="refAuthor">Bray, T., Ed.</span>, <span class="refTitle">"The JavaScript Object Notation (JSON) Data Interchange Format"</span>, <span class="seriesInfo">STD 90</span>, <span class="seriesInfo">RFC 8259</span>, <span class="seriesInfo">DOI 10.17487/RFC8259</span>, <time datetime="2017-12" class="refDate">December 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8259">https://www.rfc-editor.org/rfc/rfc8259</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8343">[RFC8343]</dt>
        <dd>
<span class="refAuthor">Bjorklund, M.</span>, <span class="refTitle">"A YANG Data Model for Interface Management"</span>, <span class="seriesInfo">RFC 8343</span>, <span class="seriesInfo">DOI 10.17487/RFC8343</span>, <time datetime="2018-03" class="refDate">March 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8343">https://www.rfc-editor.org/rfc/rfc8343</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8446">[RFC8446]</dt>
        <dd>
<span class="refAuthor">Rescorla, E.</span>, <span class="refTitle">"The Transport Layer Security (TLS) Protocol Version 1.3"</span>, <span class="seriesInfo">RFC 8446</span>, <span class="seriesInfo">DOI 10.17487/RFC8446</span>, <time datetime="2018-08" class="refDate">August 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8446">https://www.rfc-editor.org/rfc/rfc8446</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8639">[RFC8639]</dt>
        <dd>
<span class="refAuthor">Voit, E.</span>, <span class="refAuthor">Clemm, A.</span>, <span class="refAuthor">Gonzalez Prieto, A.</span>, <span class="refAuthor">Nilsen-Nygaard, E.</span>, and <span class="refAuthor">A. Tripathy</span>, <span class="refTitle">"Subscription to YANG Notifications"</span>, <span class="seriesInfo">RFC 8639</span>, <span class="seriesInfo">DOI 10.17487/RFC8639</span>, <time datetime="2019-09" class="refDate">September 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8639">https://www.rfc-editor.org/rfc/rfc8639</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8640">[RFC8640]</dt>
        <dd>
<span class="refAuthor">Voit, E.</span>, <span class="refAuthor">Clemm, A.</span>, <span class="refAuthor">Gonzalez Prieto, A.</span>, <span class="refAuthor">Nilsen-Nygaard, E.</span>, and <span class="refAuthor">A. Tripathy</span>, <span class="refTitle">"Dynamic Subscription to YANG Events and Datastores over NETCONF"</span>, <span class="seriesInfo">RFC 8640</span>, <span class="seriesInfo">DOI 10.17487/RFC8640</span>, <time datetime="2019-09" class="refDate">September 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8640">https://www.rfc-editor.org/rfc/rfc8640</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8641">[RFC8641]</dt>
        <dd>
<span class="refAuthor">Clemm, A.</span> and <span class="refAuthor">E. Voit</span>, <span class="refTitle">"Subscription to YANG Notifications for Datastore Updates"</span>, <span class="seriesInfo">RFC 8641</span>, <span class="seriesInfo">DOI 10.17487/RFC8641</span>, <time datetime="2019-09" class="refDate">September 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8641">https://www.rfc-editor.org/rfc/rfc8641</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9000">[RFC9000]</dt>
        <dd>
<span class="refAuthor">Iyengar, J., Ed.</span> and <span class="refAuthor">M. Thomson, Ed.</span>, <span class="refTitle">"QUIC: A UDP-Based Multiplexed and Secure Transport"</span>, <span class="seriesInfo">RFC 9000</span>, <span class="seriesInfo">DOI 10.17487/RFC9000</span>, <time datetime="2021-05" class="refDate">May 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9000">https://www.rfc-editor.org/rfc/rfc9000</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="XPATH">[XPATH]</dt>
      <dd>
<span class="refAuthor">W3C</span>, <span class="refTitle">"XML Path Language (XPath) Version 1.0"</span>, <span>&lt;<a href="https://www.w3.org/TR/1999/REC-xpath-19991116/">https://www.w3.org/TR/1999/REC-xpath-19991116/</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
</section>
</div>
<div id="DifferencesFromYangPush">
<section id="appendix-A">
      <h2 id="name-functional-changes-between-">
<a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-functional-changes-between-" class="section-name selfRef">Functional changes between YANG Push v2 and YANG Push</a>
      </h2>
<p id="appendix-A-1">This non-normative section highlights the significant functional changes where the YANG Push v2 implementation differs from YANG Push.  However, the main body of this document, from <a href="#overview" class="auto internal xref">Section 4</a> onwards, provides the normative definition of the YANG Push v2 specification, except for any text or sections that explicitly indicate that they are informative rather being normative.<a href="#appendix-A-1" class="pilcrow">¶</a></p>
<p id="appendix-A-2"><em>Note to reviewers: If you notice mistakes in this section during development of the document and solution then please point them out to the authors and the working group.</em> <strong>(RFC editor, please remove this paragraph prior to publication)</strong><a href="#appendix-A-2" class="pilcrow">¶</a></p>
<div id="removed-functionality">
<section id="appendix-A.1">
        <h3 id="name-removed-functionality">
<a href="#appendix-A.1" class="section-number selfRef">A.1. </a><a href="#name-removed-functionality" class="section-name selfRef">Removed Functionality</a>
        </h3>
<p id="appendix-A.1-1">This section lists functionality specified in <span>[<a href="#RFC8639" class="cite xref">RFC8639</a>]</span> and YANG Push which is not specified in YANG Push v2.<a href="#appendix-A.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A.1-2.1">
            <p id="appendix-A.1-2.1.1">Negotiation and hints of failed subscriptions.<a href="#appendix-A.1-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.1-2.2">
            <p id="appendix-A.1-2.2.1">The RPC to modify an existing dynamic subscription, instead the subscription must be terminated and re-established.<a href="#appendix-A.1-2.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.1-2.3">
            <p id="appendix-A.1-2.3.1">The ability to suspend and resume a dynamic subscription.  Instead a dynamic subscription is terminated if the device cannot reliably fulfill the subscription or a receiver is too slow causing the subscription to be back pressured.<a href="#appendix-A.1-2.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.1-2.4">
            <p id="appendix-A.1-2.4.1">Specifying a subscription stop time, and the corresponding subscription-completed notification have been removed.<a href="#appendix-A.1-2.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.1-2.5">
            <p id="appendix-A.1-2.5.1">Replaying of buffered event records are not supported, for both configured and dynamic subscriptions.  The nearest equivalent is requesting a sync-on-start replay when the subscription transport session comes up which will reply the current state.<a href="#appendix-A.1-2.5.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.1-2.6">
            <p id="appendix-A.1-2.6.1">QoS weighting and dependency between subscriptions has been removed due to the complexity of implementation.<a href="#appendix-A.1-2.6.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.1-2.7">
            <p id="appendix-A.1-2.7.1">Support for reporting subscription error hints has been removed.  The device <span class="bcp14">SHOULD</span> reject subscriptions that are likely to overload the device, but more onus is placed on the operator configuring the subscriptions or setting up the dynamic subscriptions to ensure that subscriptions are reasonable, as they would be expected to do for any other configuration.<a href="#appendix-A.1-2.7.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.1-2.8">
            <p id="appendix-A.1-2.8.1">The "subscription-state-notif" extension has been removed.<a href="#appendix-A.1-2.8.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.1-2.9">
            <p id="appendix-A.1-2.9.1">The YANG Patch format <span>[<a href="#RFC8072" class="cite xref">RFC8072</a>]</span> is no longer used for on-change subscriptions.<a href="#appendix-A.1-2.9.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.1-2.10">
            <p id="appendix-A.1-2.10.1">Support for multiple receivers for a configured subscription.<a href="#appendix-A.1-2.10.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="changed-functionality">
<section id="appendix-A.2">
        <h3 id="name-changed-functionality">
<a href="#appendix-A.2" class="section-number selfRef">A.2. </a><a href="#name-changed-functionality" class="section-name selfRef">Changed Functionality</a>
        </h3>
<p id="appendix-A.2-1">This section documents behavior that exists in both YANG Push and YANG Push v2, but the behavior differs between the two:<a href="#appendix-A.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A.2-2.1">
            <p id="appendix-A.2-2.1.1">All YANG Push v2 notifications messages use <span>[<a href="#I-D.draft-ietf-netconf-notif-envelope" class="cite xref">I-D.draft-ietf-netconf-notif-envelope</a>]</span> rather than <span>[<a href="#RFC5277" class="cite xref">RFC5277</a>]</span> used by YANG Push <span>[<a href="#RFC8641" class="cite xref">RFC8641</a>]</span>.<a href="#appendix-A.2-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.2-2.2">
            <p id="appendix-A.2-2.2.1">There is a lot more alignment in data model, behavior, and state machined in YANG Push v2, aiming to minimize differences.<a href="#appendix-A.2-2.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.2-2.3">
            <p id="appendix-A.2-2.3.1">Changes to handling receivers:<a href="#appendix-A.2-2.3.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A.2-2.3.2.1">
                <p id="appendix-A.2-2.3.2.1.1">Receivers are always configured separately from the subscription and are referenced.<a href="#appendix-A.2-2.3.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="appendix-A.2-2.3.2.2">
                <p id="appendix-A.2-2.3.2.2.1">Transport and Encoding parameters are configured as part of a receiver definition, and are used by all subscriptions directed towards a given receiver.<a href="#appendix-A.2-2.3.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="appendix-A.2-2.3.2.3">
                <p id="appendix-A.2-2.3.2.3.1">Encoding is now a mandatory parameter under a receiver and dynamic subscription (rather than specifying a default).<a href="#appendix-A.2-2.3.2.3.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="appendix-A.2-2.3.2.4">
                <p id="appendix-A.2-2.3.2.4.1">Invoking the <em>reset</em> RPC operation on a receiver requires and forces a reset of any transport sessions associated with that receiver.  Previously, the sessions would not be reset if they were used by other subscriptions.<a href="#appendix-A.2-2.3.2.4.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="normal" id="appendix-A.2-2.4">
            <p id="appendix-A.2-2.4.1">Periodic and on-change message uses a common <em>update</em> notification message format, allowing for the messages to be processed by clients in a similar fashion and to support combined periodic and on-change subscriptions.<a href="#appendix-A.2-2.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.2-2.5">
            <p id="appendix-A.2-2.5.1">Changes related to the configuration model:<a href="#appendix-A.2-2.5.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A.2-2.5.2.1">
                <p id="appendix-A.2-2.5.2.1.1">Subscriptions are identified by a string identifier rather than a numeric identifier.  The prefix 'dyn-' is reserved for publisher allocated dyanmic subscription ids.  Clients may provide the id to be used for dynamic subscriptions.  There is changed handling for conflicting subscription-ids between configured and dynamic.<a href="#appendix-A.2-2.5.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="appendix-A.2-2.5.2.2">
                <p id="appendix-A.2-2.5.2.2.1">Purpose has been renamed to Description (since it is a more generic term), limited to 1k characters, but also available for dynamic subscriptions.<a href="#appendix-A.2-2.5.2.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="normal" id="appendix-A.2-2.6">
            <p id="appendix-A.2-2.6.1">On-change dampening:<a href="#appendix-A.2-2.6.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A.2-2.6.2.1">
                <p id="appendix-A.2-2.6.2.1.1">Client configurable on-change dampening has been removed.<a href="#appendix-A.2-2.6.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="appendix-A.2-2.6.2.2">
                <p id="appendix-A.2-2.6.2.2.1">However, YANG Push v2 allows a publisher to limit the rate at which a data node is sampled for on-change notifications.  See <a href="#OnChangeConsiderations" class="auto internal xref">Section 7.5.1</a> for further details.<a href="#appendix-A.2-2.6.2.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="normal" id="appendix-A.2-2.7">
            <p id="appendix-A.2-2.7.1">Dynamic subscriptions are no longer mandatory to implement, either or both of Configured and Dynamic Subscriptions may be implemented in YANG Push v2.<a href="#appendix-A.2-2.7.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.2-2.8">
            <p id="appendix-A.2-2.8.1">The solution focuses solely on datastore subscriptions that each have their own event stream.  Filters cannot be applied to the event stream, only to the set of datastore data nodes that are monitored by the subscription.<a href="#appendix-A.2-2.8.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.2-2.9">
            <p id="appendix-A.2-2.9.1">The lifecycle events of when a subscription-started or subscription-terminated may be sent differs from RFC 8639/RFC 8649:<a href="#appendix-A.2-2.9.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A.2-2.9.2.1">
                <p id="appendix-A.2-2.9.2.1.1">Subscription-started notifications are also sent for dynamic subscriptions.<a href="#appendix-A.2-2.9.2.1.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="normal" id="appendix-A.2-2.10">
            <p id="appendix-A.2-2.10.1">Some of the requirements on transport have been relaxed.<a href="#appendix-A.2-2.10.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.2-2.11">
            <p id="appendix-A.2-2.11.1">The encoding identities have been extended with CBOR encodings, and the "encoding-" prefix has been removed (so that there is a better on the wire representation).<a href="#appendix-A.2-2.11.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.2-2.12">
            <p id="appendix-A.2-2.12.1">YANG Push v2 allows for a publisher to provide an eventually consistent distributed view of the operational datastore, rather than a fully consistent datastore where on-change updates are sent as logic diffs to that datastore.<a href="#appendix-A.2-2.12.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="added-functionality">
<section id="appendix-A.3">
        <h3 id="name-added-functionality">
<a href="#appendix-A.3" class="section-number selfRef">A.3. </a><a href="#name-added-functionality" class="section-name selfRef">Added Functionality</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-A.3-1.1">
            <p id="appendix-A.3-1.1.1">Device capabilities are reported via XXX and additional models that augment that data model.<a href="#appendix-A.3-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.3-1.2">
            <p id="appendix-A.3-1.2.1">A new <em>update</em> message:<a href="#appendix-A.3-1.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A.3-1.2.2.1">
                <p id="appendix-A.3-1.2.2.1.1">Covers both on-change and periodic events.<a href="#appendix-A.3-1.2.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="appendix-A.3-1.2.2.2">
                <p id="appendix-A.3-1.2.2.2.1">Allows multiple updates to be sent in a single message (e.g., for on-change).<a href="#appendix-A.3-1.2.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="appendix-A.3-1.2.2.3">
                <p id="appendix-A.3-1.2.2.3.1">Allows for a common path prefix to be specified, with any paths and encoded YANG data to be encoded relative to the common path prefix.<a href="#appendix-A.3-1.2.2.3.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="normal" id="appendix-A.3-1.3">
            <p id="appendix-A.3-1.3.1">A <em>collection-complete</em> notification, and associated configuration, has been defined to inform collectors when a subscription's periodic collection cycle is complete.<a href="#appendix-A.3-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.3-1.4">
            <p id="appendix-A.3-1.4.1">TODO - More operational data on the subscription load and performance.<a href="#appendix-A.3-1.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-A.3-1.5">
            <p id="appendix-A.3-1.5.1">All YANG Push v2 configuration is under a new <em>datastore-telemetry</em> presence container<a href="#appendix-A.3-1.5.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="subscription-errors-from-rfc-8641">
<section id="appendix-B">
      <h2 id="name-subscription-errors-from-rf">
<a href="#appendix-B" class="section-number selfRef">Appendix B. </a><a href="#name-subscription-errors-from-rf" class="section-name selfRef">Subscription Errors (from RFC 8641)</a>
      </h2>
<div id="rpc-failures-1">
<section id="appendix-B.1">
        <h3 id="name-rpc-failures-2">
<a href="#appendix-B.1" class="section-number selfRef">B.1. </a><a href="#name-rpc-failures-2" class="section-name selfRef">RPC Failures</a>
        </h3>
<p id="appendix-B.1-1">Rejection of an RPC for any reason is indicated via an RPC error
response from the publisher.  Valid RPC errors returned include both
(1) existing transport-layer RPC error codes, such as those seen with
NETCONF in <span>[<a href="#RFC6241" class="cite xref">RFC6241</a>]</span> and (2) subscription-specific errors, such as
those defined in the YANG data model.  As a result, how subscription
errors are encoded in an RPC error response is transport dependent.<a href="#appendix-B.1-1" class="pilcrow">¶</a></p>
<p id="appendix-B.1-2">References to specific identities in the ietf-subscribed-
notifications YANG module <span>[<a href="#RFC8639" class="cite xref">RFC8639</a>]</span> or the ietf-yang-push YANG module
may be returned as part of the error responses resulting from failed
attempts at datastore subscription.  For errors defined as part of
the ietf-subscribed-notifications YANG module, please refer to
<span>[<a href="#RFC8639" class="cite xref">RFC8639</a>]</span>.  The errors defined in this document, grouped per RPC, are
as follows:<a href="#appendix-B.1-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-B.1-3">
<pre>
      establish-subscription          modify-subscription
      ---------------------------     ---------------------
       cant-exclude                    period-unsupported
       datastore-not-subscribable      update-too-big
       on-change-unsupported           sync-too-big
       on-change-sync-unsupported      unchanging-selection
       period-unsupported
       update-too-big                 resync-subscription
       sync-too-big                   ----------------------------
       unchanging-selection            no-such-subscription-resync
                                       sync-too-big
</pre><a href="#appendix-B.1-3" class="pilcrow">¶</a>
</div>
<p id="appendix-B.1-4">There is one final set of transport-independent RPC error elements
included in the YANG data model.  These are the four yang-data
structures for failed datastore subscriptions:<a href="#appendix-B.1-4" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="appendix-B.1-5">
<li id="appendix-B.1-5.1">
            <p id="appendix-B.1-5.1.1">yang-data "establish-subscription-error-datastore": This <span class="bcp14">MUST</span> be
returned if information identifying the reason for an RPC error
has not been placed elsewhere in the transport portion of a
failed "establish-subscription" RPC response.  This <span class="bcp14">MUST</span> be sent
if hints are included.<a href="#appendix-B.1-5.1.1" class="pilcrow">¶</a></p>
</li>
          <li id="appendix-B.1-5.2">
            <p id="appendix-B.1-5.2.1">yang-data "modify-subscription-error-datastore": This <span class="bcp14">MUST</span> be
returned if information identifying the reason for an RPC error
has not been placed elsewhere in the transport portion of a
failed "modify-subscription" RPC response.  This <span class="bcp14">MUST</span> be sent if
hints are included.<a href="#appendix-B.1-5.2.1" class="pilcrow">¶</a></p>
</li>
          <li id="appendix-B.1-5.3">
            <p id="appendix-B.1-5.3.1">yang-data "sn:delete-subscription-error": This <span class="bcp14">MUST</span> be returned
if information identifying the reason for an RPC error has not
been placed elsewhere in the transport portion of a failed
"delete-subscription" or "kill-subscription" RPC response.<a href="#appendix-B.1-5.3.1" class="pilcrow">¶</a></p>
</li>
          <li id="appendix-B.1-5.4">
            <p id="appendix-B.1-5.4.1">yang-data "resync-subscription-error": This <span class="bcp14">MUST</span> be returned if
information identifying the reason for an RPC error has not been
placed elsewhere in the transport portion of a failed
"resync-subscription" RPC response.<a href="#appendix-B.1-5.4.1" class="pilcrow">¶</a></p>
</li>
        </ol>
</section>
</div>
<div id="failure-notifications">
<section id="appendix-B.2">
        <h3 id="name-failure-notifications">
<a href="#appendix-B.2" class="section-number selfRef">B.2. </a><a href="#name-failure-notifications" class="section-name selfRef">Failure Notifications</a>
        </h3>
<p id="appendix-B.2-1">A subscription may be unexpectedly terminated or suspended
independently of any RPC or configuration operation.  In such cases,
indications of such a failure <span class="bcp14">MUST</span> be provided.  To accomplish this,
a number of errors can be returned as part of the corresponding
subscription state change notification.  For this purpose, the
following error identities are introduced in this document, in
addition to those that were already defined in <span>[<a href="#RFC8639" class="cite xref">RFC8639</a>]</span>:<a href="#appendix-B.2-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-B.2-2">
<pre>
  subscription-terminated        subscription-suspended
  ---------------------------    ----------------------
  datastore-not-subscribable     period-unsupported
  unchanging-selection           update-too-big
                                  synchronization-size
</pre><a href="#appendix-B.2-2" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="Examples">
<section id="appendix-C">
      <h2 id="name-examples">
<a href="#appendix-C" class="section-number selfRef">Appendix C. </a><a href="#name-examples" class="section-name selfRef">Examples</a>
      </h2>
<p id="appendix-C-1">Notes on examples:<a href="#appendix-C-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-C-2.1">
          <p id="appendix-C-2.1.1">To allow for programmatic validation, most notification examples in this section exclude the mandatory notification envelope and associated metadata defined in <span>[<a href="#I-D.draft-ietf-netconf-notif-envelope" class="cite xref">I-D.draft-ietf-netconf-notif-envelope</a>]</span>.  Only the full notification example in <a href="#FullNotificationExample" class="auto internal xref">Section 7.1</a> includes the notification header.<a href="#appendix-C-2.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="appendix-C-2.2">
          <p id="appendix-C-2.2.1">These notification message examples are given using a JSON encoding, but could be encoded using XML or CBOR.<a href="#appendix-C-2.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="appendix-C-2.3">
          <p id="appendix-C-2.3.1">Some additional meta data fields, e.g., like those defined in <span>[<a href="#I-D.tgraf-netconf-notif-sequencing" class="cite xref">I-D.tgraf-netconf-notif-sequencing</a>]</span> would also likely be included, but have also been excluded to allow for slightly more concise examples.<a href="#appendix-C-2.3.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="appendix-C-2.4">
          <p id="appendix-C-2.4.1">The examples include the <span>[<a href="#I-D.tgraf-netconf-yang-push-observation-time" class="cite xref">I-D.tgraf-netconf-yang-push-observation-time</a>]</span> field for the existing YANG-Push Notification format, and the proposed equivalent "observation-time" leaf for the new update notification format.<a href="#appendix-C-2.4.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="appendix-C-2.5">
          <p id="appendix-C-2.5.1">All these examples are created by hand, may contain errors, and may not parse correctly.<a href="#appendix-C-2.5.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<div id="example-of-periodic-update-messages">
<section id="appendix-C.1">
        <h3 id="name-example-of-periodic-update-">
<a href="#appendix-C.1" class="section-number selfRef">C.1. </a><a href="#name-example-of-periodic-update-" class="section-name selfRef">Example of periodic update messages</a>
        </h3>
<p id="appendix-C.1-1">In this example, a subscription is for <em>/ietf-interfaces:interfaces/interface</em>.  However, for efficiency reasons, the publisher is internally returning the data from two different data providers.<a href="#appendix-C.1-1" class="pilcrow">¶</a></p>
<p id="appendix-C.1-2">Of note:<a href="#appendix-C.1-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-C.1-3.1">
            <p id="appendix-C.1-3.1.1">The first periodic message is published for the entries in the <em>/ietf-interfaces:interface/interfaces</em> list, but doesn't contain the data in the <em>statistics</em> child container.<a href="#appendix-C.1-3.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-C.1-3.2">
            <p id="appendix-C.1-3.2.1">the <em>path-prefix</em> is to the subscription subtree, since the device will never return data outside of the subscription subtree.<a href="#appendix-C.1-3.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-C.1-3.3">
            <p id="appendix-C.1-3.3.1">the <em>target-path</em> is elided because the data is returned at the subscription point. **TODO, or should it actually be to the element above? **<a href="#appendix-C.1-3.3.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<span id="name-example-periodic-update-for"></span><figure id="figure-27">
          <div class="lang-JSON sourcecode" id="appendix-C.1-4.1">
<pre>
{
  "ietf-yang-push-2:update": {
    "id": "interfaces",
    "path-prefix": "/ietf-interfaces:interfaces/interface",
    "snapshot-type": "periodic",
    "observation-time": "2024-10-10T08:00:05.11Z",
    "updates": [
      {
        "target-path": "",
        "data": {
          "ietf-interfaces:interface": [
            {
              "name": "eth0",
              "type": "iana-if-type:ethernetCsmacd",
              "enabled": true,
              "ietf-interfaces:oper-status": "up",
              "ietf-interfaces:admin-status": "up"
            },
            {
              "name": "eth1",
              "type": "iana-if-type:ethernetCsmacd",
              "enabled": true,
              "ietf-interfaces:oper-status": "up",
              "ietf-interfaces:admin-status": "up"
            }
          ]
        }
      }
    ],
    "complete": [null]
  }
}
</pre>
</div>
<figcaption><a href="#figure-27" class="selfRef">Figure 27</a>:
<a href="#name-example-periodic-update-for" class="selfRef">Example periodic update for interfaces list</a>
          </figcaption></figure>
<p id="appendix-C.1-5">For the second notification related to the same subscription:<a href="#appendix-C.1-5" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-C.1-6.1">
            <p id="appendix-C.1-6.1.1">the second periodic message is published for only the statistics associated with the interfaces.<a href="#appendix-C.1-6.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-C.1-6.2">
            <p id="appendix-C.1-6.2.1">as above, the <em>path-prefix</em> is still to the subscription subtree.<a href="#appendix-C.1-6.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-C.1-6.3">
            <p id="appendix-C.1-6.3.1">the second notification uses a separate observation-time, but would use the same event-time in the notification header so that the two messages can be correlated to the same periodic collection event.<a href="#appendix-C.1-6.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-C.1-6.4">
            <p id="appendix-C.1-6.4.1">the second periodic message has set the <em>complete</em> flag to indicate that it is the last notification as part of the periodic collection.  A separate <em>update-complete</em> notification could have been sent instead.<a href="#appendix-C.1-6.4.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<span id="name-example-periodic-update-for-"></span><figure id="figure-28">
          <div class="lang-JSON sourcecode" id="appendix-C.1-7.1">
<pre>
{
  "ietf-yang-push-2:update": {
    "id": "interfaces",
    "path-prefix": "/ietf-interfaces:interfaces/interface",
    "snapshot-type": "periodic",
    "observation-time": "2024-10-10T08:00:05.21Z",
    "updates": [
      {
        "target-path": "",
        "data": {
          "ietf-interfaces:interface": [
            {
              "name": "eth0",
              "statistics": {
                "in-octets": 123456,
                "out-octets": 654321
              }
            },
            {
              "name": "eth1",
              "statistics": {
                "in-octets": 789012,
                "out-octets": 210987
              }
            }
          ]
        }
      }
    ]
  }
}
</pre>
</div>
<figcaption><a href="#figure-28" class="selfRef">Figure 28</a>:
<a href="#name-example-periodic-update-for-" class="selfRef">Example periodic update for interface statistics</a>
          </figcaption></figure>
</section>
</div>
<div id="example-of-an-on-change-update-notification-using-the-new-style-update-message">
<section id="appendix-C.2">
        <h3 id="name-example-of-an-on-change-upd">
<a href="#appendix-C.2" class="section-number selfRef">C.2. </a><a href="#name-example-of-an-on-change-upd" class="section-name selfRef">Example of an on-change-update notification using the new style update message</a>
        </h3>
<p id="appendix-C.2-1">If the subscription is for on-change notifications, or periodic-and-on-change-notifications, then, if the interface state changed (specifically if the 'state' leaf of the interface changed state), and if the device was capable of generating on-change notifications, then you may see the following message.  A few points of notes here:<a href="#appendix-C.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-C.2-2.1">
            <p id="appendix-C.2-2.1.1">The on-change notification contains <strong>all</strong> of the state at the "target-path"<a href="#appendix-C.2-2.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-C.2-2.1.2.1">
                <p id="appendix-C.2-2.1.2.1.1">Not present in the below example, but if the notification excluded some state under an interfaces list entry (e.g., the line-state leaf) then this would logically represent the implicit deletion of that field under the given list entry.<a href="#appendix-C.2-2.1.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="appendix-C.2-2.1.2.2">
                <p id="appendix-C.2-2.1.2.2.1">In this example it is restricted to a single interface. It could also publish an on-change notification for all interfaces, by indicating a target-path without any keys specified.  TODO - Can it represent notifications for a subset of interfaces?<a href="#appendix-C.2-2.1.2.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="normal" id="appendix-C.2-2.2">
            <p id="appendix-C.2-2.2.1">The schema of the change message is exactly the same as for the equivalent periodic message.  It doesn't use the YANG Patch format <span>[<a href="#RFC8072" class="cite xref">RFC8072</a>]</span> for on-change messages.<a href="#appendix-C.2-2.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-C.2-2.3">
            <p id="appendix-C.2-2.3.1">The "observation time" leaf represents when the system first observed the on-change event occurring.<a href="#appendix-C.2-2.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-C.2-2.4">
            <p id="appendix-C.2-2.4.1">The on-change event doesn't differentiate the type of change to operational state.  The on-change-update snapshot type is used to indicate the creation of a new entry or some update to some existing state.  Basically, the message can be thought of as the state existing with some current value.<a href="#appendix-C.2-2.4.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<span id="name-example-yang-push-v2-on-cha"></span><figure id="figure-29">
          <div class="lang-JSON sourcecode" id="appendix-C.2-3.1">
<pre>&lt;CODE BEGINS&gt; file "on-change-msg.json"

{
  "ietf-yp-notification:envelope": {
    "event-time": "2024-09-27T14:16:30.973Z",
    "hostname": "example-router",
    "sequence-number": 454,
    "contents": {
      "ietf-yp-ext:update": {
        "id": 1,
        "subscription-path":
          "Cisco-IOS-XR-pfi-im-cmd-oper:interfaces",
        "target-path":
          "Cisco-IOS-XR-pfi-im-cmd-oper:interfaces/interfaces/
          interface[interface=GigabitEthernet0/0/0/0]",
        "snapshot-type": "on-change-update"
        "observation-time": "2024-09-27T14:16:30.973Z",
        "datastore-snapshot": {
          "interfaces": {
            "interface": [
              {
                "interface-name": "GigabitEthernet0/0/0/0",
                "interface": "GigabitEthernet0/0/0/0",
                "state": "im-state-up",
                "line-state": "im-state-up"
              }
            ]
          }
        }
      }
    }
  }
}

&lt;CODE ENDS&gt;</pre>
</div>
<figcaption><a href="#figure-29" class="selfRef">Figure 29</a>:
<a href="#name-example-yang-push-v2-on-cha" class="selfRef">Example YANG Push v2 on-change update message</a>
          </figcaption></figure>
</section>
</div>
<div id="example-of-an-on-change-delete-notification-using-the-new-style-update-message">
<section id="appendix-C.3">
        <h3 id="name-example-of-an-on-change-del">
<a href="#appendix-C.3" class="section-number selfRef">C.3. </a><a href="#name-example-of-an-on-change-del" class="section-name selfRef">Example of an on-change-delete notification using the new style update message</a>
        </h3>
<div id="update-message-with-single-deleted-data-node">
<section id="appendix-C.3.1">
          <h4 id="name-update-message-with-single-">
<a href="#appendix-C.3.1" class="section-number selfRef">C.3.1. </a><a href="#name-update-message-with-single-" class="section-name selfRef">Update message with single deleted data node</a>
          </h4>
<p id="appendix-C.3.1-1">If the interface was deleted, and if the system was capable of reporting on-change events for the delete event, then an on-change delete message would be encoded as per the following message.<a href="#appendix-C.3.1-1" class="pilcrow">¶</a></p>
<p id="appendix-C.3.1-2">Of note:<a href="#appendix-C.3.1-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-C.3.1-3.1">
              <p id="appendix-C.3.1-3.1.1">The ietf-yp-notification:envelope has been elided<a href="#appendix-C.3.1-3.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="appendix-C.3.1-3.2">
              <p id="appendix-C.3.1-3.2.1">The deleted data is identified by the target node in the <em>updates/target-path</em> element.<a href="#appendix-C.3.1-3.2.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="appendix-C.3.1-3.3">
              <p id="appendix-C.3.1-3.3.1">The observation time represents the time at which the delete event occurred, e.g., perhaps when the system processed a configuration change.<a href="#appendix-C.3.1-3.3.1" class="pilcrow">¶</a></p>
</li>
          </ul>
<span id="name-example-yang-push-v2-on-chan"></span><figure id="figure-30">
            <div class="lang-JSON sourcecode" id="appendix-C.3.1-4.1">
<pre>
{
  "ietf-yang-push-2:update": {
    "id": "interfaces",
    "snapshot-type": "on-change-delete",
    "observation-time": "2025-10-10T08:16:15.11Z",
    "updates": [
      {
        "target-path": "/ietf-interfaces:interfaces/interface[name='eth0']"
      }
    ]
  }
}
</pre>
</div>
<figcaption><a href="#figure-30" class="selfRef">Figure 30</a>:
<a href="#name-example-yang-push-v2-on-chan" class="selfRef">Example YANG Push v2 on-change delete message</a>
            </figcaption></figure>
</section>
</div>
<div id="update-message-with-multiple-on-change-deletes">
<section id="appendix-C.3.2">
          <h4 id="name-update-message-with-multipl">
<a href="#appendix-C.3.2" class="section-number selfRef">C.3.2. </a><a href="#name-update-message-with-multipl" class="section-name selfRef">Update message with multiple on-change deletes</a>
          </h4>
<p id="appendix-C.3.2-1">This follow example illustrates how a single update notification message can contain multiple on-change delete events for different data nodes.  In this example, two separate interfaces are being deleted.<a href="#appendix-C.3.2-1" class="pilcrow">¶</a></p>
<p id="appendix-C.3.2-2">Of note:<a href="#appendix-C.3.2-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-C.3.2-3.1">
              <p id="appendix-C.3.2-3.1.1">The ietf-yp-notification:envelope has been elided<a href="#appendix-C.3.2-3.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="appendix-C.3.2-3.2">
              <p id="appendix-C.3.2-3.2.1"><em>prefix-path</em> is used to shorten the target-paths, the full paths can be constructed concatenating the <em>prefix-path</em> with each <em>target-path</em> in the <em>updates</em> list.<a href="#appendix-C.3.2-3.2.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="appendix-C.3.2-3.3">
              <p id="appendix-C.3.2-3.3.1">all delete events share a common observation-time of when the delete events occurred.  If it is necessary to identify separate observation times then the publisher would send separate messages.<a href="#appendix-C.3.2-3.3.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="appendix-C.3.2-3.4">
              <p id="appendix-C.3.2-3.4.1">data node subtrees that are deleted (list entries in this case) are identified by separate entries in the <em>updates</em> list.<a href="#appendix-C.3.2-3.4.1" class="pilcrow">¶</a></p>
</li>
          </ul>
<span id="name-example-yang-push-v2-on-chang"></span><figure id="figure-31">
            <div class="lang-JSON sourcecode" id="appendix-C.3.2-4.1">
<pre>
{
  "ietf-yang-push-2:update": {
    "id": "interfaces",
    "path-prefix": "/ietf-interfaces:interfaces",
    "snapshot-type": "on-change-delete",
    "observation-time": "2025-10-10T08:16:16.11Z",
    "updates": [
      {
        "target-path": "interface[name='eth0']"
      },
      {
        "target-path": "interface[name='eth1']"
      }
    ]
  }
}
</pre>
</div>
<figcaption><a href="#figure-31" class="selfRef">Figure 31</a>:
<a href="#name-example-yang-push-v2-on-chang" class="selfRef">Example YANG Push v2 on-change delete message</a>
            </figcaption></figure>
</section>
</div>
</section>
</div>
<div id="netconf-dynamic-subscription-rpc-examples">
<section id="appendix-C.4">
        <h3 id="name-netconf-dynamic-subscriptio">
<a href="#appendix-C.4" class="section-number selfRef">C.4. </a><a href="#name-netconf-dynamic-subscriptio" class="section-name selfRef">NETCONF Dynamic Subscription RPC examples</a>
        </h3>
<p id="appendix-C.4-1">The examples in this section illustrate NETCONF RPCs for establishing and deleting dynamic subscriptions using YANG Push v2.  The examples include one successfully establishing a subscription, and a second to illustrate how errors are returned if a request to establish the subscription fails.  Examples of the <em>update</em> and subscription lifecycle notifications have been given in the previous section.<a href="#appendix-C.4-1" class="pilcrow">¶</a></p>
<div id="successful-periodic-subscription">
<section id="appendix-C.4.1">
          <h4 id="name-successful-periodic-subscri">
<a href="#appendix-C.4.1" class="section-number selfRef">C.4.1. </a><a href="#name-successful-periodic-subscri" class="section-name selfRef">Successful periodic subscription</a>
          </h4>
<p id="appendix-C.4.1-1">The subscriber sends an "establish-subscription" RPC with the parameters listed in <a href="#EstablishDynamic" class="auto internal xref">Section 9.4.1</a>  An example might look like:<a href="#appendix-C.4.1-1" class="pilcrow">¶</a></p>
<span id="name-example-establish-subscript"></span><figure id="figure-32">
            <div class="lang-XML sourcecode" id="appendix-C.4.1-2.1">
<pre>
&lt;netconf:rpc
message-id="101" xmlns:netconf="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
  &lt;establish-subscription xmlns="urn:ietf:params:xml:ns:yang:ietf-yp-lite"&gt;
    &lt;name&gt;if-stats-sub&lt;/name&gt;
    &lt;description&gt;Subscribe to interface statistics&lt;/description&gt;
    &lt;target&gt;
      &lt;datastore xmlns:ds="urn:ietf:params:xml:ns:yang:ietf-datastores"&gt;
        ds:operational
      &lt;/datastore&gt;
      &lt;path&gt;/ietf-interfaces:interfaces/interface/statistics&lt;/path&gt;
    &lt;/target&gt;
    &lt;update-trigger&gt;
      &lt;periodic&gt;
        &lt;period&gt;3000&lt;/period&gt;
      &lt;/periodic&gt;
    &lt;/update-trigger&gt;
    &lt;encoding&gt;json&lt;/encoding&gt;
  &lt;/establish-subscription&gt;
&lt;/netconf:rpc&gt;
</pre>
</div>
<figcaption><a href="#figure-32" class="selfRef">Figure 32</a>:
<a href="#name-example-establish-subscript" class="selfRef">Example establish-subscription RPC for interface statistics</a>
            </figcaption></figure>
<p id="appendix-C.4.1-3">If a publisher is happy to accept the subscription, then it returns a positive response that includes the "id" of the accepted subscription.  For example,<a href="#appendix-C.4.1-3" class="pilcrow">¶</a></p>
<span id="name-example-establish-subscripti"></span><figure id="figure-33">
            <div class="lang-XML sourcecode" id="appendix-C.4.1-4.1">
<pre>
&lt;rpc-reply
message-id="101" xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
  &lt;id xmlns="urn:ietf:params:xml:ns:yang:ietf-yp-lite"&gt;52&lt;/id&gt;
&lt;/rpc-reply&gt;
</pre>
</div>
<figcaption><a href="#figure-33" class="selfRef">Figure 33</a>:
<a href="#name-example-establish-subscripti" class="selfRef">Example establish-subscription RPC successful reply</a>
            </figcaption></figure>
<p id="appendix-C.4.1-5">Once established, the publisher would send a <em>subscription-started</em> notification message followed by <em>update</em> notification messages at the requested periodic cadence.<a href="#appendix-C.4.1-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="failed-periodic-subscription">
<section id="appendix-C.4.2">
          <h4 id="name-failed-periodic-subscriptio">
<a href="#appendix-C.4.2" class="section-number selfRef">C.4.2. </a><a href="#name-failed-periodic-subscriptio" class="section-name selfRef">Failed periodic subscription</a>
          </h4>
<p id="appendix-C.4.2-1">A subscription can be rejected for multiple reasons, including the
lack of authorization to establish a subscription, no capacity to
serve the subscription at the publisher, or the inability of the
publisher to select datastore content at the requested cadence.<a href="#appendix-C.4.2-1" class="pilcrow">¶</a></p>
<p id="appendix-C.4.2-2">If a request is rejected because the publisher is not able to serve
it, the publisher <span class="bcp14">SHOULD</span> include in the returned error hints that
help a subscriber understand what subscription parameters might have
been accepted for the request.  These hints would be included in the
yang-data structure "establish-subscription-error-datastore".
However, even with these hints, there are no guarantees that
subsequent requests will in fact be accepted.<a href="#appendix-C.4.2-2" class="pilcrow">¶</a></p>
<p id="appendix-C.4.2-3">The specific parameters to be returned as part of the RPC error
response depend on the specific transport that is used to manage the
subscription.  For NETCONF, those parameters are defined in
<span>[<a href="#RFC8640" class="cite xref">RFC8640</a>]</span>.  For example, for the following NETCONF request:<a href="#appendix-C.4.2-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-C.4.2-4">
<pre>
  &lt;rpc message-id="101"
      xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
    &lt;establish-subscription
        xmlns=
          "urn:ietf:params:xml:ns:yang:ietf-subscribed-notifications"
        xmlns:yp="urn:ietf:params:xml:ns:yang:ietf-yang-push"&gt;
      &lt;yp:datastore
          xmlns:ds="urn:ietf:params:xml:ns:yang:ietf-datastores"&gt;
        ds:operational
      &lt;/yp:datastore&gt;
      &lt;yp:datastore-xpath-filter
          xmlns:ex="https://example.com/sample-data/1.0"&gt;
        /ex:foo
      &lt;/yp:datastore-xpath-filter&gt;
      &lt;yp:on-change&gt;
      &lt;/yp:on-change&gt;
    &lt;/establish-subscription&gt;
  &lt;/rpc&gt;

      Figure 12: "establish-subscription" Request: Example 2
</pre><a href="#appendix-C.4.2-4" class="pilcrow">¶</a>
</div>
<p id="appendix-C.4.2-5">A publisher that cannot serve on-change updates but can serve
periodic updates might return the following NETCONF response:<a href="#appendix-C.4.2-5" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-C.4.2-6">
<pre>
 &lt;rpc-reply message-id="101"
   xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
   xmlns:yp="urn:ietf:params:xml:ns:yang:ietf-subscribed-notifications"&gt;
   &lt;rpc-error&gt;
     &lt;error-type&gt;application&lt;/error-type&gt;
     &lt;error-tag&gt;operation-failed&lt;/error-tag&gt;
     &lt;error-severity&gt;error&lt;/error-severity&gt;
     &lt;error-path&gt;/yp:periodic/yp:period&lt;/error-path&gt;
     &lt;error-info&gt;
       &lt;yp:establish-subscription-error-datastore&gt;
         &lt;yp:reason&gt;yp:on-change-unsupported&lt;/yp:reason&gt;
       &lt;/yp:establish-subscription-error-datastore&gt;
     &lt;/error-info&gt;
   &lt;/rpc-error&gt;
 &lt;/rpc-reply&gt;

       Figure 13: "establish-subscription" Error Response: Example 2
</pre><a href="#appendix-C.4.2-6" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="delete-subscription-rpc">
<section id="appendix-C.4.3">
          <h4 id="name-delete-subscription-rpc">
<a href="#appendix-C.4.3" class="section-number selfRef">C.4.3. </a><a href="#name-delete-subscription-rpc" class="section-name selfRef">"delete-subscription" RPC</a>
          </h4>
<p id="appendix-C.4.3-1">To stop receiving updates from a subscription and effectively delete
a subscription that had previously been established using an
"establish-subscription" RPC, a subscriber can send a
"delete-subscription" RPC, which takes as its only input the
subscription's "id".  This RPC is unmodified from <span>[<a href="#RFC8639" class="cite xref">RFC8639</a>]</span>.<a href="#appendix-C.4.3-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="OpenIssuesTracker">
<section id="appendix-D">
      <h2 id="name-summary-of-open-issues-pote">
<a href="#appendix-D" class="section-number selfRef">Appendix D. </a><a href="#name-summary-of-open-issues-pote" class="section-name selfRef">Summary of Open Issues &amp; Potential Enhancements</a>
      </h2>
<p id="appendix-D-1">This temporary section lists open issues and enhancements that require further discussion by the authors, or the WG.  Once adopted, it is anticipated that tracking the open issues would move to github.<a href="#appendix-D-1" class="pilcrow">¶</a></p>
<p id="appendix-D-2">The issues are ordered/grouped by the sections in the current document.  I.e., to make it easier to review/update sections of the document.<a href="#appendix-D-2" class="pilcrow">¶</a></p>
<div id="issues-related-to-general-ietf-process">
<section id="appendix-D.1">
        <h3 id="name-issues-related-to-general-i">
<a href="#appendix-D.1" class="section-number selfRef">D.1. </a><a href="#name-issues-related-to-general-i" class="section-name selfRef">Issues related to general IETF process</a>
        </h3>
<ol start="1" type="1" class="normal type-1" id="appendix-D.1-1">
<li id="appendix-D.1-1.1">
            <p id="appendix-D.1-1.1.1">If this work progresses we will need simple bis versions of the transports document so that they augment into the new data model paths.  Drafts that would need to be updated as documented in  <a href="#DraftRelationships" class="auto internal xref">Section 3.4</a>.  <a href="https://github.com/rgwilton/draft-yp-observability/issues/27">Issue 27</a><a href="#appendix-D.1-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li id="appendix-D.1-1.2">
            <p id="appendix-D.1-1.2.1">Do we need to fold in any text from RFC 8640? and RESTCONF? <a href="https://github.com/rgwilton/draft-yp-observability/issues/26">Issue 26</a><a href="#appendix-D.1-1.2.1" class="pilcrow">¶</a></p>
</li>
        </ol>
</section>
</div>
<div id="issue-related-to-terminologydefinitions">
<section id="appendix-D.2">
        <h3 id="name-issue-related-to-terminolog">
<a href="#appendix-D.2" class="section-number selfRef">D.2. </a><a href="#name-issue-related-to-terminolog" class="section-name selfRef">Issue related to Terminology/Definitions</a>
        </h3>
<ol start="1" type="1" class="normal type-1" id="appendix-D.2-1">
<li id="appendix-D.2-1.1">
            <p id="appendix-D.2-1.1.1">Should we use the object terminology? Tracked as editorial, in <a href="https://github.com/rgwilton/draft-yp-observability/issues/15">Issue 15</a><a href="#appendix-D.2-1.1.1" class="pilcrow">¶</a></p>
</li>
        </ol>
</section>
</div>
<div id="issues-related-to-yang-push-v2-overview">
<section id="appendix-D.3">
        <h3 id="name-issues-related-to-yang-push">
<a href="#appendix-D.3" class="section-number selfRef">D.3. </a><a href="#name-issues-related-to-yang-push" class="section-name selfRef">Issues related to YANG Push v2 Overview</a>
        </h3>
<p id="appendix-D.3-1">None currently.<a href="#appendix-D.3-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="issues-related-to-subscription-paths-and-selection-filters">
<section id="appendix-D.4">
        <h3 id="name-issues-related-to-subscript">
<a href="#appendix-D.4" class="section-number selfRef">D.4. </a><a href="#name-issues-related-to-subscript" class="section-name selfRef">Issues related to Subscription Paths and Selection Filters</a>
        </h3>
<ol start="1" type="1" class="normal type-1" id="appendix-D.4-1">
<li id="appendix-D.4-1.1">
            <p id="appendix-D.4-1.1.1">This draft introduces a new simple yang path (ypath) format that is like a JSON instance data path, that all implementations <span class="bcp14">MUST</span> support.  <a href="https://github.com/rgwilton/draft-yp-observability/issues/29">Issue 29</a><a href="#appendix-D.4-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li id="appendix-D.4-1.2">
            <p id="appendix-D.4-1.2.1">Advertising subscription schema: <a href="https://github.com/rgwilton/draft-yp-observability/issues/11">Issue 11</a><a href="#appendix-D.4-1.2.1" class="pilcrow">¶</a></p>
</li>
        </ol>
</section>
</div>
<div id="issues-related-to-datastore-event-streams-message-format">
<section id="appendix-D.5">
        <h3 id="name-issues-related-to-datastore">
<a href="#appendix-D.5" class="section-number selfRef">D.5. </a><a href="#name-issues-related-to-datastore" class="section-name selfRef">Issues related to Datastore Event Streams &amp; message format</a>
        </h3>
<ol start="1" type="1" class="normal type-1" id="appendix-D.5-1">
<li id="appendix-D.5-1.1">
            <p id="appendix-D.5-1.1.1">Agree format and usage of <em>update</em> notification. <a href="https://github.com/rgwilton/draft-yp-observability/issues/32">Issue 32</a><a href="#appendix-D.5-1.1.1" class="pilcrow">¶</a></p>
</li>
        </ol>
</section>
</div>
<div id="issues-related-to-receivers-transports-encodings">
<section id="appendix-D.6">
        <h3 id="name-issues-related-to-receivers">
<a href="#appendix-D.6" class="section-number selfRef">D.6. </a><a href="#name-issues-related-to-receivers" class="section-name selfRef">Issues related to Receivers, Transports, &amp; Encodings</a>
        </h3>
<div id="issues-related-to-transports">
<section id="appendix-D.6.1">
          <h4 id="name-issues-related-to-transport">
<a href="#appendix-D.6.1" class="section-number selfRef">D.6.1. </a><a href="#name-issues-related-to-transport" class="section-name selfRef">Issues related to Transports:</a>
          </h4>
<ol start="1" type="1" class="normal type-1" id="appendix-D.6.1-1">
<li id="appendix-D.6.1-1.1">
              <p id="appendix-D.6.1-1.1.1"><a href="#transports" class="auto internal xref">Section 8.2</a> lists quite a lot of rules on what are valid transports and what negotiation/etc is required.  I think we need to check whether we can weaken some of these (although it is possible that these were imposed during a transport directorate review).<a href="#appendix-D.6.1-1.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-D.6.1-1.1.2.1">
                  <p id="appendix-D.6.1-1.1.2.1.1"><strong>Rob: Authors, I've updated the transport section, <a href="#transports" class="auto internal xref">Section 8.2</a>, please can you re-review.</strong>. Tracked as part of <a href="https://github.com/rgwilton/draft-yp-observability/issues/17">Issue 17</a><a href="#appendix-D.6.1-1.1.2.1.1" class="pilcrow">¶</a></p>
</li>
              </ul>
</li>
            <li id="appendix-D.6.1-1.2">
              <p id="appendix-D.6.1-1.2.1">James: We also need to add some text into security section.<a href="#appendix-D.6.1-1.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-D.6.1-1.2.2.1">
                  <p id="appendix-D.6.1-1.2.2.1.1">Rob: Is this transport specific, or related to application layer authorization?<a href="#appendix-D.6.1-1.2.2.1.1" class="pilcrow">¶</a></p>
</li>
              </ul>
</li>
            <li id="appendix-D.6.1-1.3">
              <p id="appendix-D.6.1-1.3.1">What is the rules/restrictions for subscription receiver instances vs transport sessions?  E.g., is this entirely down to the transport to define.<a href="#appendix-D.6.1-1.3.1" class="pilcrow">¶</a></p>
</li>
          </ol>
</section>
</div>
</section>
</div>
<div id="issues-related-to-setting-up-managing-subscriptions">
<section id="appendix-D.7">
        <h3 id="name-issues-related-to-setting-u">
<a href="#appendix-D.7" class="section-number selfRef">D.7. </a><a href="#name-issues-related-to-setting-u" class="section-name selfRef">Issues related to Setting up &amp; Managing Subscriptions</a>
        </h3>
<div id="issues-related-to-the-configuration-model">
<section id="appendix-D.7.1">
          <h4 id="name-issues-related-to-the-confi">
<a href="#appendix-D.7.1" class="section-number selfRef">D.7.1. </a><a href="#name-issues-related-to-the-confi" class="section-name selfRef">Issues related to the configuration model:</a>
          </h4>
<ol start="1" type="1" class="normal type-1" id="appendix-D.7.1-1">
<li id="appendix-D.7.1-1.1">
              <p id="appendix-D.7.1-1.1.1">YP Lite is somewhat different (separate namespace, separate receivers, no event filters, some config has moved to a separate receivers list).  See the data model and <a href="#DifferencesFromYangPush" class="auto internal xref">Appendix A</a>.  Note some of these apply or impact dynamic subscriptions as well. <a href="https://github.com/rgwilton/draft-yp-observability/issues/30">Issue 30</a><a href="#appendix-D.7.1-1.1.1" class="pilcrow">¶</a></p>
</li>
          </ol>
</section>
</div>
<div id="issues-related-to-dynamic-subscriptions">
<section id="appendix-D.7.2">
          <h4 id="name-issues-related-to-dynamic-s">
<a href="#appendix-D.7.2" class="section-number selfRef">D.7.2. </a><a href="#name-issues-related-to-dynamic-s" class="section-name selfRef">Issues related to dynamic subscriptions:</a>
          </h4>
<ol start="1" type="1" class="normal type-1" id="appendix-D.7.2-1">
<li id="appendix-D.7.2-1.1">
              <p id="appendix-D.7.2-1.1.1">Do we want to change how RPC errors are reported?  E.g., change the RPC ok response to indicate whether the subscription was successfully created or not, or included extra error information.  Note NETCONF and RESTCONF already define how errors are encoded in XML and JSON (for RESTCONF only), is it possible to unify this so we don't need large extra separate documents.<a href="#appendix-D.7.2-1.1.1" class="pilcrow">¶</a></p>
</li>
          </ol>
</section>
</div>
</section>
</div>
<div id="issues-related-to-subscription-lifecycle">
<section id="appendix-D.8">
        <h3 id="name-issues-related-to-subscripti">
<a href="#appendix-D.8" class="section-number selfRef">D.8. </a><a href="#name-issues-related-to-subscripti" class="section-name selfRef">Issues related to Subscription Lifecycle</a>
        </h3>
<ol start="1" type="1" class="normal type-1" id="appendix-D.8-1">
<li id="appendix-D.8-1.1">
            <p id="appendix-D.8-1.1.1">Use subscription name as the unique identifier for the subscription configuration.  Subscription id identifies a subscription session.  I.e., if a configured subscription is terminated and re-established then a new subscription id is allocated. <a href="https://github.com/rgwilton/draft-yp-observability/issues/19">Issue 19</a><a href="#appendix-D.8-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li id="appendix-D.8-1.2">
            <p id="appendix-D.8-1.2.1">Should subscription-started notification include a fingerprint of the schema that is covered by the subscription that would guaranteed to change if the subscription changes? <a href="https://github.com/rgwilton/draft-yp-observability/issues/11">Issue 11</a><a href="#appendix-D.8-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li id="appendix-D.8-1.3">
            <p id="appendix-D.8-1.3.1">If a subscription references a filter, then should that be included inline in the subscription started notification (as per the RFC 8641 text), or should it indicate that it is a referenced filter? <a href="https://github.com/rgwilton/draft-yp-observability/issues/20">Issue 20</a><a href="#appendix-D.8-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li id="appendix-D.8-1.4">
            <p id="appendix-D.8-1.4.1">When a subscription is terminated, should it be <span class="bcp14">MUST NOT</span> send any more notifications after the terminated message, or <span class="bcp14">SHOULD NOT</span>?  For a dynamic subscription, should the RPC be synchronous and not reply until it knows that all queues have been drained? <a href="https://github.com/rgwilton/draft-yp-observability/issues/13">Issue 13</a><a href="#appendix-D.8-1.4.1" class="pilcrow">¶</a></p>
</li>
          <li id="appendix-D.8-1.5">
            <p id="appendix-D.8-1.5.1">Is a publisher allowed to arbitrarily send a sync-on-start resync, e.g., if it detects data loss, or should it always just terminate and reinitialize the subscription? <a href="https://github.com/rgwilton/draft-yp-observability/issues/22">Issue 22</a><a href="#appendix-D.8-1.5.1" class="pilcrow">¶</a></p>
</li>
          <li id="appendix-D.8-1.6">
            <p id="appendix-D.8-1.6.1">Should we have a YANG Action to reset a receiver or a subscription?  E.g., discussed in <a href="#reset" class="auto internal xref">Section 9.3.4</a>. <a href="https://github.com/rgwilton/draft-yp-observability/issues/24">Issue 24</a><a href="#appendix-D.8-1.6.1" class="pilcrow">¶</a></p>
</li>
          <li id="appendix-D.8-1.7">
            <p id="appendix-D.8-1.7.1">Should we support configurable subscription-level keepalives? <a href="https://github.com/rgwilton/draft-yp-observability/issues/14">Issue 14</a><a href="#appendix-D.8-1.7.1" class="pilcrow">¶</a></p>
</li>
        </ol>
</section>
</div>
<div id="issues-related-to-performance-reliability-subscription-monitoring">
<section id="appendix-D.9">
        <h3 id="name-issues-related-to-performan">
<a href="#appendix-D.9" class="section-number selfRef">D.9. </a><a href="#name-issues-related-to-performan" class="section-name selfRef">Issues related to Performance, Reliability &amp; Subscription Monitoring</a>
        </h3>
<div id="issuesquestions-related-to-operational-data">
<section id="appendix-D.9.1">
          <h4 id="name-issues-questions-related-to">
<a href="#appendix-D.9.1" class="section-number selfRef">D.9.1. </a><a href="#name-issues-questions-related-to" class="section-name selfRef">Issues/questions related to operational data:</a>
          </h4>
<ol start="1" type="1" class="normal type-1" id="appendix-D.9.1-1">
<li id="appendix-D.9.1-1.1">
              <p id="appendix-D.9.1-1.1.1">Should we define some additional operational data to help operators check that the telemetry infrastructure is performing correctly, to get an approximation of the load, etc.<a href="#appendix-D.9.1-1.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-D.9.1-1.1.2.1">
                  <p id="appendix-D.9.1-1.1.2.1.1">Rob: probably, but lower priority.<a href="#appendix-D.9.1-1.1.2.1.1" class="pilcrow">¶</a></p>
</li>
                <li class="normal" id="appendix-D.9.1-1.1.2.2">
                  <p id="appendix-D.9.1-1.1.2.2.1">Tracked by <a href="https://github.com/rgwilton/draft-yp-observability/issues/31">Issue 31</a><a href="#appendix-D.9.1-1.1.2.2.1" class="pilcrow">¶</a></p>
</li>
              </ul>
</li>
            <li id="appendix-D.9.1-1.2">
              <p id="appendix-D.9.1-1.2.1">Should dynamic subscriptions use the same receivers structure as for configured subscriptions, or should they be inline in the configured subscription?  Also tracked by <a href="https://github.com/rgwilton/draft-yp-observability/issues/31">Issue 31</a><a href="#appendix-D.9.1-1.2.1" class="pilcrow">¶</a></p>
</li>
          </ol>
</section>
</div>
</section>
</div>
<div id="issues-related-to-conformance-and-capabilities">
<section id="appendix-D.10">
        <h3 id="name-issues-related-to-conforman">
<a href="#appendix-D.10" class="section-number selfRef">D.10. </a><a href="#name-issues-related-to-conforman" class="section-name selfRef">Issues related to Conformance and Capabilities</a>
        </h3>
<ol start="1" type="1" class="normal type-1" id="appendix-D.10-1">
<li id="appendix-D.10-1.1">
            <p id="appendix-D.10-1.1.1">Do we advertise that conformance via capabilities and/or YANG features (both for configured and dynamic subscriptions)?<a href="#appendix-D.10-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li id="appendix-D.10-1.2">
            <p id="appendix-D.10-1.2.1">For on-change, should a subscription be rejected (or not brought up) if there are no on-change notifiable nodes?<a href="#appendix-D.10-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li id="appendix-D.10-1.3">
            <p id="appendix-D.10-1.3.1">Further work and discussion is required for advertising capabilities for filter paths.  E.g., listing all of the paths that support on-change could be a very long list.  Related, does the draft need to advertise at what points a publisher would decompose a higher subscription into more specific subscriptions.<a href="#appendix-D.10-1.3.1" class="pilcrow">¶</a></p>
</li>
        </ol>
<p id="appendix-D.10-2">All tracked via <a href="https://github.com/rgwilton/draft-yp-observability/issues/18">Issue 18</a><a href="#appendix-D.10-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="issues-related-to-the-yang-modules">
<section id="appendix-D.11">
        <h3 id="name-issues-related-to-the-yang-">
<a href="#appendix-D.11" class="section-number selfRef">D.11. </a><a href="#name-issues-related-to-the-yang-" class="section-name selfRef">Issues related to the YANG Modules</a>
        </h3>
<p id="appendix-D.11-1">None open.<a href="#appendix-D.11-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="issues-related-to-the-security-considerations-nacm-filtering">
<section id="appendix-D.12">
        <h3 id="name-issues-related-to-the-secur">
<a href="#appendix-D.12" class="section-number selfRef">D.12. </a><a href="#name-issues-related-to-the-secur" class="section-name selfRef">Issues related to the Security Considerations (&amp; NACM filtering)</a>
        </h3>
<ol start="1" type="1" class="normal type-1" id="appendix-D.12-1">
<li id="appendix-D.12-1.1">
            <p id="appendix-D.12-1.1.1">Need to consider how NACM applies to YANG Push v2, which may differ for dynamic vs configured subscription, but generally we want the permissions to be checked when the subscription is created rather than each time a path is accessed.<a href="#appendix-D.12-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li id="appendix-D.12-1.2">
            <p id="appendix-D.12-1.2.1">Where should this be in the document (current it in the security considerations section)<a href="#appendix-D.12-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li id="appendix-D.12-1.3">
            <p id="appendix-D.12-1.3.1">Do we want to retain the the current text in <a href="#events" class="auto internal xref">Section 7</a> introduction related to terminating a subscription if permissions change?<a href="#appendix-D.12-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li id="appendix-D.12-1.4">
            <p id="appendix-D.12-1.4.1">Also note, text was removed from the transport section related to RPC authorization, and which should be moved to an application (rather than transport) layer security mechanism.<a href="#appendix-D.12-1.4.1" class="pilcrow">¶</a></p>
</li>
        </ol>
<p id="appendix-D.12-2">All tracked via <a href="https://github.com/rgwilton/draft-yp-observability/issues/33">Issue 33</a><a href="#appendix-D.12-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="issues-related-to-the-iana">
<section id="appendix-D.13">
        <h3 id="name-issues-related-to-the-iana">
<a href="#appendix-D.13" class="section-number selfRef">D.13. </a><a href="#name-issues-related-to-the-iana" class="section-name selfRef">Issues related to the IANA</a>
        </h3>
<p id="appendix-D.13-1">None open.<a href="#appendix-D.13-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="issues-related-to-the-appendixes">
<section id="appendix-D.14">
        <h3 id="name-issues-related-to-the-appen">
<a href="#appendix-D.14" class="section-number selfRef">D.14. </a><a href="#name-issues-related-to-the-appen" class="section-name selfRef">Issues related to the Appendixes</a>
        </h3>
<div id="examples-related-issuesquestions">
<section id="appendix-D.14.1">
          <h4 id="name-examples-related-issues-que">
<a href="#appendix-D.14.1" class="section-number selfRef">D.14.1. </a><a href="#name-examples-related-issues-que" class="section-name selfRef">Examples related issues/questions:</a>
          </h4>
<ol start="1" type="1" class="normal type-1" id="appendix-D.14.1-1">
<li id="appendix-D.14.1-1.1">
              <p id="appendix-D.14.1-1.1.1">Not a question, but a note that many examples need to be updated to reflect the data models currently in the draft.<a href="#appendix-D.14.1-1.1.1" class="pilcrow">¶</a></p>
</li>
          </ol>
</section>
</div>
</section>
</div>
<div id="summary-of-closedresolved-issues">
<section id="appendix-D.15">
        <h3 id="name-summary-of-closed-resolved-">
<a href="#appendix-D.15" class="section-number selfRef">D.15. </a><a href="#name-summary-of-closed-resolved-" class="section-name selfRef">Summary of closed/resolved issues</a>
        </h3>
<p id="appendix-D.15-1">This appendix is only intended while the authors/WG are working on the document, and should be deleted prior to WG LC.<a href="#appendix-D.15-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="appendix-D.15-2">
<li id="appendix-D.15-2.1">
            <p id="appendix-D.15-2.1.1">Rename subscription-terminated to subscription-stopped (Change rejected 21 Feb 25, unnecessary renaming.)<a href="#appendix-D.15-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li id="appendix-D.15-2.2">
            <p id="appendix-D.15-2.2.1"><span class="bcp14">MUST</span> use envelope, hostname and sequence-number (and event-time) (Decided 21 Feb 25)<a href="#appendix-D.15-2.2.1" class="pilcrow">¶</a></p>
</li>
          <li id="appendix-D.15-2.3">
            <p id="appendix-D.15-2.3.1">Don't mandate configured or dynamic subscriptions, allow implementations to implement one or both of them. (Decided 21 Feb 25)<a href="#appendix-D.15-2.3.1" class="pilcrow">¶</a></p>
</li>
          <li id="appendix-D.15-2.4">
            <p id="appendix-D.15-2.4.1">Dynamic subscriptions require the encoding to be specified. (Decided 21 Feb 25)<a href="#appendix-D.15-2.4.1" class="pilcrow">¶</a></p>
</li>
          <li id="appendix-D.15-2.5">
            <p id="appendix-D.15-2.5.1">DSCP settings are only specified under the receiver (for configured subscriptions) (Decided 21 Feb 25)<a href="#appendix-D.15-2.5.1" class="pilcrow">¶</a></p>
</li>
          <li id="appendix-D.15-2.6">
            <p id="appendix-D.15-2.6.1">Config and dynamic subscriptions should be aligned as much as possible.<a href="#appendix-D.15-2.6.1" class="pilcrow">¶</a></p>
</li>
          <li id="appendix-D.15-2.7">
            <p id="appendix-D.15-2.7.1">If subscription parameters change then force subscription down and up again, <a href="https://github.com/rgwilton/draft-yp-observability/issues/14">issue 14</a><a href="#appendix-D.15-2.7.1" class="pilcrow">¶</a></p>
</li>
          <li id="appendix-D.15-2.8">
            <p id="appendix-D.15-2.8.1">No RPC to modify a dynamic subscription, use delete-subscription then create-subscription.<a href="#appendix-D.15-2.8.1" class="pilcrow">¶</a></p>
</li>
          <li id="appendix-D.15-2.9">
            <p id="appendix-D.15-2.9.1">Lifecycle messages are sent per subscription rather than per receiver, and we only support a single receiver per subscription.<a href="#appendix-D.15-2.9.1" class="pilcrow">¶</a></p>
</li>
          <li id="appendix-D.15-2.10">
            <p id="appendix-D.15-2.10.1">Encoding is set per subscription, and we don't allow different per-receiver encodings for a subscription with more than one receiver.  <a href="https://github.com/rgwilton/draft-yp-observability/issues/17">issue 17</a><a href="#appendix-D.15-2.10.1" class="pilcrow">¶</a></p>
</li>
          <li id="appendix-D.15-2.11">
            <p id="appendix-D.15-2.11.1">We have a updated-completed flag/notification to allow deleted data to be implicitly detected.  Something similar may be added to gNMI.  <a href="https://github.com/rgwilton/draft-yp-observability/issues/12">issue 12</a><a href="#appendix-D.15-2.11.1" class="pilcrow">¶</a></p>
</li>
          <li id="appendix-D.15-2.12">
            <p id="appendix-D.15-2.12.1">We use a string identifier to uniquely identify a subscription rather than a numeric id.  Reserve 'dyn-' for server allocated dynamic subscription ids.  Agreed config/dynamic conflict policy.  Restricted names for fitler-id and receiver name.  Don't use a union type (could be added in future). (Dec 8th)<a href="#appendix-D.15-2.12.1" class="pilcrow">¶</a></p>
</li>
          <li id="appendix-D.15-2.13">
            <p id="appendix-D.15-2.13.1">Draft renamed from Yang Push Lite to Yang Push 2. (Dec 8th)<a href="#appendix-D.15-2.13.1" class="pilcrow">¶</a></p>
</li>
        </ol>
</section>
</div>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-E">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Robert Wilton (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:rwilton@cisco.com" class="email">rwilton@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Holger Keller</span></div>
<div dir="auto" class="left"><span class="org">Deuetsche Telekom</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:Holger.Keller@telekom.de" class="email">Holger.Keller@telekom.de</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Benoit Claise</span></div>
<div dir="auto" class="left"><span class="org">Everything OPS</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:benoit@everything-ops.net" class="email">benoit@everything-ops.net</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Ebben Aries</span></div>
<div dir="auto" class="left"><span class="org">Juniper</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:exa@juniper.net" class="email">exa@juniper.net</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">James Cumming</span></div>
<div dir="auto" class="left"><span class="org">Nokia</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:james.cumming@nokia.com" class="email">james.cumming@nokia.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Thomas Graf</span></div>
<div dir="auto" class="left"><span class="org">Swisscom</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:Thomas.Graf@swisscom.com" class="email">Thomas.Graf@swisscom.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
